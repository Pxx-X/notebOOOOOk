<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Flow - notebOOOOOOk</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Flow";
        var mkdocs_page_input_path = "flow.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> notebOOOOOOk
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">EDA</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../EDA4PR/">EDA4PR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../EDA4PR-Analog/">EDA4PR-Analog</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../EDA4PR-Digtal/">EDA4PR-Digtal</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../EDA4PR-LCM/">EDA4PR-LCM</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Flow</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#_1">模拟设计流程</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#1-pdk-install">1. PDK install</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#11">1.1 导入数字库</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#2-new-liabrary">2. New Liabrary</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#1-new-cdslib">1. new cds.lib</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#2-run-virtuoso">2. run virtuoso</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#3-new-library">3. new Library</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#3-new-cells-schematic-and-symbol">3. new Cell‘s schematic and symbol</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#4-testbench">4. 搭建testbench</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#5-ade">5. ADE前仿</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#6pvt">6.前仿PVT验证</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#7">7.画版图</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#_3">常用技巧</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#_4">一个能够较快手动布线的技巧</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#_5">源漏共用</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#mos">MOS匹配</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#tips">Tips</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#8drc-lvs">8.DRC, LVS</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#9pex">9.寄生参数提取（PEX）</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#10">10.后仿</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#_6">参考：</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#_7">数字设计流程</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#_8">前端</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#0">0. 系统级仿真</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#1-hdl">1. 写HDL</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#2-testbench-vcsverdi">2. 写testbench, 用vcs编译仿真，用verdi看波形</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#3-fpga">3. FPGA上板验证</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#_9">综合</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#_10">后端</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#_11">参考</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#formality">Formality</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#drc">DRC</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#violation">忽略部分violation</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#_12">参考</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#lvs">LVS</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#buglist">buglist</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#_13">参考</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#startrc">StartRC</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#_14">参考</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#primetime">PrimeTime</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#_15">后仿</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#vcs-">VCS-纯数字</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#virtuoso">virtuoso</a>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#_16">数字芯片流片工具链</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#vcs">VCS</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#_17">简介</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#_18">运行脚本示例</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#command">command</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#_19">参考</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#dc">DC</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#_20">简介</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#_21">流程</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#_22">基本脚本</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#_23">时序约束</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#_27">面积约束</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#_28">驱动强度、电容负载约束</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#_29">设置设计规则约束</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#_31">综合编译</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#notes">notes</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#command_1">command补充解释</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#_33">参考</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#innovus_">Innovus_</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#cerebrus">Cerebrus</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#starrc">StarRC</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#formality_1">Formality</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#_34">参考</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#calibre">Calibre</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#prime-time">Prime Time</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#_35">模拟芯片流片工具链</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#virtuoso_1">Virtuoso</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#schematic">schematic</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#simulation-ade">simulation ADE</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#layout">Layout</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#tips_1">tips</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#_40">相关快捷键</a>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#_42">混合仿真流程</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#_43">前仿</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#_44">参考</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#lvs_1">LVS</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#buglist_1">buglist</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#drc_1">DRC</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#buglist_2">Buglist</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#_45">后仿</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#_46">数字模块时序反标</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#_47">模拟模块提取寄生参数并替换网表</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#corner">设置corner</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#io-pad">加I/O PAD</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#_48">基础知识</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#_49">结构</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#cell-categories">Cell categories</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#dc-and-ac-specification">DC and AC Specification</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#_50">技巧：</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#_51">参考</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#lvsdrc">LVS/DRC</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#seal-ring">加seal ring</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#smic28">SMIC28实例</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#_52">参考</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#dummyfiller">运行dummy脚本填充FIller</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#smic28_1">SMIC28 流程示例</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#_53">再次后仿</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#_54">提交</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#tips_2">tips</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#innovus">innovus</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#flow_1">flow</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#floorplan">floorplan</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#placement">placement</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#cts">CTS</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#route">route</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#sign-off">sign off</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#common-command">common command</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#_61">实战</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#0_">0_所需文件：</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#1_">1_数据初始化</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#2_import">2_import</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#3_floorplan">3_floorPlan</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#4_powerplan">4_powerPlan</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#5_place_opt">5_place_opt</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#6_cts">6_CTS</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#7_cts_opt">7_cts_opt</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#8_route">8_route</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#_62">优化</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#_63">优化目标</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#innovus_1">innovus 优化流程</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#_64">文件名称</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#install">install</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#_65">依赖</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#_66">解压</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#_67">安装</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#_68">破解</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#_69">环境变量</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#_70">大致结束</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#bug">其他相关 bug</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#_71">参考</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#_72">参考</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#pdk">PDK</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#_73">概述</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#_74">生态</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#_75">金属层</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#aa">AA</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#poly">POLY</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#pc">PC</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#ct">CT</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#gt">GT</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#mx">Mx</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#vx">Vx</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#fin">Fin</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#_76">文件汇总</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#spcdl">sp/cdl</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#lef">LEF</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#def">DEF</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#lib">Lib</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#db">DB</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#itf-ict">ITF, ICT</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#sdf">SDF</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#gds">GDS</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#map">map</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#innovusdat">Innovus.dat</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#map-layermap">各种map, layermap</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#spef">spef</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#nxtgrd">nxtgrd</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#_79">工艺类型</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#planar">Planar</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#finfet">FinFET</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#gaa">GAA</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#smic">SMIC</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#_80">文件目录简要介绍</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#_82">标准单元库</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#pvt">同一标准单元库下不同时序模型和PVT条件组合</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#tsmc">TSMC</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#_87">参考</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pdk_1">开源PDK</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#sky130">sky130</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#gf180">GF180</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#freepdk45">FreePDK45</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#nangate45">nangate45</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#ihp-open-source-pdk">IHP Open Source PDK</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#asap7">ASAP7</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#asap5">ASAP5</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#_88">参考</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#openroadorfsopenlane">OpenROAD/ORFS/OpenLane</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#_89">特点</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#_90">优点</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#_91">缺点</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#relation-between-openroadsrfsopenlane">relation between openroad/SRFS/openlane</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#openroad">openroad</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#orfs">ORFS</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#openlance">openlance</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#architecture">Architecture</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#openlane-flow-stages">OpenLane Flow Stages</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pdk_2">PDK</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#open-source-pdks">Open-Source PDKs</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#proprietary-pdks">Proprietary PDKs</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#basic-run">Basic Run</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#basic-command">Basic Command</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#area">area</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#save-image">Save Image#</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#select-objects">Select Objects</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#add-a-single-net-to-selection">Add a single net to selection</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#add-multiple-nets-to-selection">Add multiple nets to selection</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#add-a-single-inst-to-selection">Add a single inst to selection</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#add-multiple-insts-to-selection">Add multiple insts to selection</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#select-at-point-or-area">Select at point or area</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#select-next-item-from-selection">Select next item from selection</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#select-previous-item-from-selection">Select previous item from selection</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#clear-selection">Clear Selection</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#set-heatmap">Set Heatmap</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#dump-heatmap-to-file">Dump Heatmap to file</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#init">init</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#floorplant">floorplant</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#placement_1">placement</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#routing">Routing</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#globle-routing">globle routing</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#report-and-dump">report and dump</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#write-macro-placement">Write Macro Placement</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#global-routing-fastroute41">Global Routing - FastRoute4.1</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#using-macro-in-openlane">Using Macro in openlane</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#debug-in-openroad">debug in openroad</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#make-as-follow">make as follow</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#my-lancunjson">my lancun.json</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#install_1">install</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#ieda">iEDA</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#magical">Magical</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#align">ALIGN</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#klayout">KLayout</a>
    </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Tools</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../Algorithms/">Algorithms</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../Hardware/">Hardware</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../OS/">OS</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../Program/">Program</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../Tools/">Tools</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Other</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../Literature/">Good Things</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">notebOOOOOOk</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">EDA</li>
      <li class="breadcrumb-item active">Flow</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="flow">flow<a class="headerlink" href="#flow" title="Permanent link">&para;</a></h1>
<h2 id="_1">模拟设计流程<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h2>
<ul>
<li>以一个环振PLL的模拟部分为例</li>
<li>PDK: SMIC 28nm</li>
<li>工具链：virtuoso</li>
<li>环境: 学院服务器, 使用服务器的脚本source 相关的软件环境</li>
</ul>
<h3 id="1-pdk-install">1. PDK install<a class="headerlink" href="#1-pdk-install" title="Permanent link">&para;</a></h3>
<p>一般会给多个工艺库选项，这次SMIC 28 项目中:SPDK28HKCPlus==LG==_0925_OA_CDS_V1和SPDK28HKCPlus==RF==_0925_OA_CDS_V1.0_REV5_1需要选择一个进行安装</p>
<div class="highlight"><pre><span></span><code>SPDK28HKCPlusLG_0925_OA_CDS_V1.0_REV5_2和SPDK28HKCPlusRF_0925_OA_CDS_V1.0_REV5_1这两个PDK的主要区别如下：
主要区别
工艺技术定位:
LG (Logic Gate): 主要用于常规数字逻辑电路设计，专注于低功耗和高性能的通用逻辑电路
RF (Radio Frequency): 特别针对射频电路设计优化，包含专门的射频元器件模型和参数
特殊器件支持:
RF PDK 包含了大量射频专用器件模型:
高Q值电感 (ind_spiral, ind_2Tdiff, ind_3Tdiff)
射频变容二极管 (rf_var)
射频电阻模型 (rf_res)
MOM电容 (rf_mom)
LG PDK 主要包含标准逻辑单元所需的基本器件模型
文件结构:
RF PDK的spectre目录有明显更多的射频特定模型文件
RF PDK包含额外的emxkit目录，用于电磁仿真
版本差异:
LG是REV5_2版本，比RF的REV5_1版本更新
RF特别标明了金属层配置: 1P10M_8Ic_1TMc_1MTTc_ALPA2（1个poly层，10个金属层）
适用场景
SPDK28HKCPlusLG:
适合纯数字电路设计
适合低功耗应用
更适合标准单元库开发和ASIC设计
SPDK28HKCPlusRF:
适合射频电路设计（如RF收发器、PLL、混频器等）
支持高频模拟电路
包含特殊射频器件模型（电感、变容二极管等）
适合混合信号RF SoC设计
</code></pre></div>
<p>这里选择RF，然后安装：</p>
<div class="highlight"><pre><span></span><code><span class="k">1.</span> README.INSTALL                             ---&gt; This file.
<span class="k">2.</span> SMIC_PDK_install                           ---&gt; Perl script to install SMIC PDK.
<span class="k">3.</span> smic28hkcPlusrf_Enhance_0925_oa_cds_vxx     ---&gt; PDK source data for installation.  

How to Install:
<span class="k">1.</span> Type &quot;SMIC_PDK_install&quot; in command line to execute the script, then follow the instruction step by step to install your required PDK option. 
<span class="k">2.</span> User can get help by typing &quot;SMIC_PDK_install -h&quot;, or refer to the quick start located at &quot;smic28hkcPluslg_0925_oa_cds_vxx/docs/SMIC_OA_CDS_quick_start_28HKCPlusLG_0925_Vxx.pdf&quot;for more details.
</code></pre></div>
<blockquote>
<p>有个点需要注意：</p>
<p>NOTICE: This PDK only contains RC extraction files for below metal options:
1P8M for 8X + ultra thick Cu top metal layers ALPA2=28k,
For the other metal options, user can download RC files from SMICNOW, or raise request if 
no such supply, we will deliver upon request. </p>
</blockquote>
<p><img alt="image-20250604144320130" src="../assets/image-20250604144320130.png" /></p>
<h4 id="11">1.1 导入数字库<a class="headerlink" href="#11" title="Permanent link">&para;</a></h4>
<p>第一次做的时候所有的基本逻辑门都是自己搭的，这是不需要的，至少对于大多数非关键性能的逻辑门。</p>
<p>数字标准库中的器件相比自己手画，往往具有更高的性能，所以要导入数字库</p>
<h5 id="111-symbol">1.1.1 导入symbol<a class="headerlink" href="#111-symbol" title="Permanent link">&para;</a></h5>
<ul>
<li>
<p>可以使用Verilog In(<code>SMIC28</code>不知道为什么导入是<code>VDD!, VSS!</code>)，</p>
</li>
<li>
<p>或者复制pdk数字库中的<code>cdn_symbol</code>文件到当前library（这种方法不知道怎么在virtuoso中导入，我是直接将对应的器件symbol文件夹复制过去的）</p>
</li>
<li>
<p>对应脚本：</p>
<div class="highlight"><pre><span></span><code><span class="c">#!/usr/bin/env bash</span>
<span class="k">set</span><span class="w"> </span><span class="o">-</span>euo<span class="w"> </span>pipefail

<span class="nv">SRC</span><span class="err">=</span><span class="s2">&quot;/SM05/home/phd2024/phd202411094979/project/cpicp25/pdk/STDCELL/SCC28NHKCP_HDC30P140_RVT_V0p2/cdn_symbol/scc28nhkcp_hdc30p140_rvt_oa&quot;</span>
<span class="nv">DST</span><span class="err">=</span><span class="s2">&quot;/SM05/home/phd2024/phd202411094979/project/cpicp25/analog/mylib_new/hdc_lib&quot;</span>

<span class="nv">mkdir</span><span class="w"> </span><span class="o">-</span>p<span class="w"> </span><span class="s2">&quot;$DST&quot;</span>

<span class="c"># 遍历所有器件目录，若存在 symbol 子目录则覆盖复制到目标</span>
<span class="nv">find</span><span class="w"> </span><span class="s2">&quot;$SRC&quot;</span><span class="w"> </span><span class="o">-</span>mindepth<span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">-</span>maxdepth<span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">-</span>type<span class="w"> </span>d<span class="w"> </span><span class="o">|</span><span class="w"> </span>while<span class="w"> </span>read<span class="w"> </span><span class="o">-</span>r<span class="w"> </span>cellDir<span class="k">;</span><span class="w"> </span><span class="nv">do</span>
<span class="w">  </span><span class="nv">cellName</span><span class="err">=</span><span class="s2">&quot;$(basename &quot;</span><span class="nv">$cellDir</span><span class="s2">&quot;)&quot;</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="k">[</span><span class="w"> </span><span class="nv">-d</span><span class="w"> </span><span class="s2">&quot;$cellDir/symbol&quot;</span><span class="w"> </span><span class="k">];</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span><span class="nv">mkdir</span><span class="w"> </span><span class="o">-</span>p<span class="w"> </span><span class="s2">&quot;$DST/$cellName&quot;</span>
<span class="w">    </span><span class="c"># rsync -a --delete &quot;$cellDir/symbol/&quot; &quot;$DST/$cellName/symbol/&quot;</span>
<span class="w">    </span><span class="nv">cp</span><span class="w"> </span><span class="o">-</span>r<span class="w"> </span><span class="s2">&quot;$SRC/$cellName/symbol&quot;</span><span class="w"> </span><span class="s2">&quot;$DST/$cellName/symbol&quot;</span>
<span class="w">    </span><span class="nv">echo</span><span class="w"> </span><span class="s2">&quot;Copied: $cellName&quot;</span>
<span class="w">  </span><span class="nv">fi</span>
<span class="nv">done</span>

<span class="nv">echo</span><span class="w"> </span><span class="s2">&quot;Done.&quot;</span>
</code></pre></div>
</li>
</ul>
<h5 id="112-layout">1.1.2 导入layout<a class="headerlink" href="#112-layout" title="Permanent link">&para;</a></h5>
<p>使用Stream In， 导入gds 文件</p>
<blockquote>
<p>和倒数数字模块一样</p>
</blockquote>
<h5 id="113-schematic">1.1.3 导入schematic<a class="headerlink" href="#113-schematic" title="Permanent link">&para;</a></h5>
<p>有的标准库的verilog文件是可以在Verilog In 的时候导入的，但是有些不行（至少SMIC28不行）。
使用Spice In, 通过<code>.cdl</code>文件导入</p>
<blockquote>
<p>注意<code>device_map</code>文件的书写, 貌似只要把<code>.cdl</code>文件里面的pmos, nmos, diode 写进来就行</p>
<p>注意进行参数映射，<code>.cdl</code>的参数和pdk中的参数定义可能不一样，区分大小写</p>
<div class="highlight"><pre><span></span><code>-- Device Mapping file generated from SpiceIn GUI
devSelect := p09_ckt p09_ckt
  propMap := W w L l

devSelect := n09_ckt n09_ckt
  propMap := W w L l

devSelect := ndio09 ndio09
  propMap := AREA area
</code></pre></div>
<p>[!WARNING]</p>
<p>发现这部分器件长宽对不上的情况</p>
</blockquote>
<h6 id="_2">参考<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h6>
<ul>
<li><a href="https://blog.csdn.net/weixin_45894265/article/details/143484308">数字标准单元库cdl导入virtuoso_virtuoso导入cdl-CSDN博客</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/678951019">通过virtuoso的spice in功能批量将数字标准单元库网表转换成schematic的方法 - 知乎</a></li>
</ul>
<h3 id="2-new-liabrary">2. New Liabrary<a class="headerlink" href="#2-new-liabrary" title="Permanent link">&para;</a></h3>
<h4 id="1-new-cdslib">1. new <code>cds.lib</code><a class="headerlink" href="#1-new-cdslib" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>DEFINE<span class="w"> </span>cdsDefTechLib<span class="w"> </span><span class="nv">$CDSHOME</span>/tools/dfII/etc/cdsDefTechLib<span class="w"> </span>
DEFINE<span class="w"> </span>basic<span class="w">         </span><span class="nv">$CDSHOME</span>/tools/dfII/etc/cdslib/basic<span class="w"> </span>
DEFINE<span class="w"> </span>analogLib<span class="w">     </span><span class="nv">$CDSHOME</span>/tools/dfII/etc/cdslib/artist/analogLib<span class="w"> </span>
DEFINE<span class="w"> </span>smic28hkmg<span class="w"> </span>~/pdk/SMIC28_uncomp/PDK/SPDK28HKCPlusRF_0925_OA_CDS_V1.0_REV5_1/smic28hkcPlusrf_0925_1P10M_8Ic_1TMc_1MTTc_ALPA2_oa_cds_2021_12_15_v1.0_rev5_1/smic28hkmg/
</code></pre></div>
<ul>
<li>cdsDefTechLib: Cadence默认技术库，包含基本的技术定义和参数。它为Virtuoso环境提供默认设置和配置，是Cadence工具运行的基础库。</li>
<li>basic: 基本元件库，包含电路设计所需的最基础组件和原语。它提供了如引脚(pin)、端口(port)等基本元素，这些是原理图绘制和版图设计的基础构建模块。</li>
<li>analogLib: : 模拟组件库，包含用于模拟电路仿真的==理想化组件==。这个库中有理想电压源/电流源、无源元件(电阻、电容、电感)、各种分析模型，以及基本的数字组件如缓冲器、反相器等。这些组件都是与工艺无关的，通常用于初始设计探索和仿真。</li>
<li>smic28hkmg: PDK 安装后生成的路径</li>
</ul>
<h4 id="2-run-virtuoso">2. run virtuoso<a class="headerlink" href="#2-run-virtuoso" title="Permanent link">&para;</a></h4>
<ul>
<li>当前文件夹</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="p">|</span>--<span class="w"> </span>README.md<span class="w"> </span>-&gt;<span class="w"> </span>.cursor/rules/analogdesign.mdc
<span class="p">|</span>--<span class="w"> </span>bak
<span class="p">|</span><span class="w">   </span><span class="sb">`</span>--<span class="w"> </span>scripts
<span class="p">|</span>--<span class="w"> </span>docs
<span class="p">|</span><span class="w">   </span><span class="sb">`</span>--<span class="w"> </span>xxx.pdf
<span class="p">|</span>--<span class="w"> </span>mylib
<span class="p">|</span>--<span class="w"> </span>runspace
<span class="p">|</span><span class="w">   </span><span class="p">|</span>--<span class="w"> </span>cds.lib<span class="w"> </span>-&gt;<span class="w"> </span>../scripts/cds.lib
<span class="p">|</span><span class="w">   </span><span class="p">|</span>--<span class="w"> </span>libManager.log
<span class="p">|</span><span class="w">   </span><span class="sb">`</span>--<span class="w"> </span>logs_phd202411094979
<span class="sb">`</span>--<span class="w"> </span>scripts
<span class="w">    </span><span class="sb">`</span>--<span class="w"> </span>cds.lib
</code></pre></div>
<blockquote>
<p>./scripts：下放所有脚本</p>
<p>./runspace: virtuoso的启动路径，运行后virtuoso会在这个目录下生成一些log文件。我这里在<code>runspace</code>下建了一个<code>scripts/cds.lib</code>的软链</p>
<p>./docs：放一些相关文档</p>
<p>./mylib: 之后放有一些新建的<code>library</code></p>
</blockquote>
<ul>
<li>
<p>bash CMD: <code>virtuoso</code></p>
</li>
<li>
<p>Click: <code>Tools --&gt; Library Manager</code></p>
</li>
<li>
<p><img src="assets/image-20250526110921171.png" alt="image-20250526110921171" style="zoom:33%;" /></p>
</li>
<li>
<p>如果cds没写错，<code>Library Manager</code>长这样， <code>smic28hkmg</code>就是PDK安装后的库</p>
</li>
</ul>
<p><img alt="image-20250526111128540" src="../assets/image-20250526111128540.png" /></p>
<blockquote>
<p>my_div_lib是我已经建好的，按照教程现在其实是没有的</p>
<p>红框内就是对应的器件</p>
<p>中间的<code>Cell</code>是各种器件</p>
<p>右边的<code>View</code>就是每个<code>Cell</code>的一些原理图<code>schematic</code>, 图标<code>symbol</code>, 版图<code>layout</code>, 测试环境<code>state</code>&amp;<code>maestro</code>, <code>constraint</code>等</p>
</blockquote>
<h4 id="3-new-library">3. new <code>Library</code><a class="headerlink" href="#3-new-library" title="Permanent link">&para;</a></h4>
<p><img alt="image-20250526113012974" src="../assets/image-20250526113012974.png" /></p>
<p><img alt="image-20250526113047336" src="../assets/image-20250526113047336.png" /></p>
<blockquote>
<p>Compile an ASCII technology file (编译ASCII技术文件)</p>
<ul>
<li>
<p>当你有自定义的ASCII格式技术文件(.tf)时使用</p>
</li>
<li>
<p>系统会根据此文件编译并创建新的技术库</p>
</li>
<li>
<p>适用于:<strong>需要自定义工艺规则的情况</strong></p>
</li>
</ul>
<p>Reference existing technology libraries (引用现有技术库)</p>
<ul>
<li>
<p>允许<strong>引用多个已存在的技术库</strong></p>
</li>
<li>
<p>不创建新的技术库，而是引用现有库的技术信息</p>
</li>
<li>
<p>适用于:<strong>需要多个技术库信息的设计</strong></p>
</li>
</ul>
<p>Attach to an existing technology library (附加到现有技术库) </p>
<ul>
<li>
<p>直接将新库附加到一个现有的已编译技术库</p>
</li>
<li>
<p><strong>新库将完全继承该技术库的所有设置，包括层级定义、DRC规则等</strong></p>
</li>
<li>
<p>适用于:在现有工艺下创建标准设计库(最常用选项)</p>
</li>
</ul>
<p>Do not need process information (不需要工艺信息)</p>
<ul>
<li>
<p>创建不含任何工艺信息的库</p>
</li>
<li>
<p>适用于:仅含符号的库、行为模型库等不需物理版图信息的库</p>
</li>
</ul>
</blockquote>
<p>在SMIC 28nm设计中，选择第3个选项，附加到已有的工艺库(<code>smic28hkmg</code>)。</p>
<p><img alt="image-20250526113119698" src="../assets/image-20250526113119698.png" /></p>
<ul>
<li>也可以使用<code>Tools --&gt;  Library Path Editor</code>新建或者添加别人的<code>Library</code></li>
</ul>
<p><img alt="image-20250526111825969" src="../assets/image-20250526111825969.png" /></p>
<blockquote>
<p><code>cds.lib</code>现在变为：</p>
<div class="highlight"><pre><span></span><code><span class="c1"># File Created by  at Mon May 26 10:59:50 2025</span>
<span class="c1"># assisted by CdsLibEditor</span>
DEFINE<span class="w"> </span>cdsDefTechLib<span class="w"> </span><span class="nv">$CDSHOME</span>/tools/dfII/etc/cdsDefTechLib
DEFINE<span class="w"> </span>basic<span class="w"> </span><span class="nv">$CDSHOME</span>/tools/dfII/etc/cdslib/basic
DEFINE<span class="w"> </span>analogLib<span class="w"> </span><span class="nv">$CDSHOME</span>/tools/dfII/etc/cdslib/artist/analogLib
DEFINE<span class="w"> </span>smic28hkmg<span class="w"> </span>~/pdk/SMIC28_uncomp/PDK/SPDK28HKCPlusRF_0925_OA_CDS_V1.0_REV5_1/smic28hkcPlusrf_0925_1P10M_8Ic_1TMc_1MTTc_ALPA2_oa_cds_2021_12_15_v1.0_rev5_1/smic28hkmg/
DEFINE<span class="w"> </span>my_div_lib<span class="w"> </span>/SM05/home/phd2024/phd202411094979/project/cpicp25/mylib/my_div_lib
DEFINE<span class="w"> </span>ropll<span class="w"> </span>/SM05/home/pgs2024/pgs202421065159/s28/ropll/ropll
DEFINE<span class="w"> </span>test_library<span class="w"> </span>/SM05/home/phd2024/phd202411094979/project/cpicp25/mylib/test_library
</code></pre></div>
</blockquote>
<h3 id="3-new-cells-schematic-and-symbol">3. new Cell‘s schematic and symbol<a class="headerlink" href="#3-new-cells-schematic-and-symbol" title="Permanent link">&para;</a></h3>
<blockquote>
<p>import basic logic gate from imported digtal library</p>
</blockquote>
<p><img alt="image-20250526114620071" src="../assets/image-20250526114620071.png" /></p>
<ul>
<li>
<p><img alt="image-20250526114812968" src="../assets/image-20250526114812968.png" /></p>
</li>
<li>
<p>新建<code>Cell</code>一般是先新建<code>schematic</code>，这里<code>OR</code>就是要新建的<code>Cell</code>的名字</p>
</li>
<li>
<p>编辑<code>schematic</code>原理图</p>
</li>
<li>
<p>用快捷键<code>i</code>插入器件</p>
<p><img alt="image-20250526115934722" src="../assets/image-20250526115934722.png" /></p>
</li>
<li>
<p>用快捷键<code>q</code>编辑器件属性</p>
<p><img alt="image-20250526115500707" src="../assets/image-20250526115500707.png" /></p>
</li>
<li>
<p>用快捷键<code>c</code>复制器件</p>
</li>
<li>
<p>用快捷键<code>u</code>撤销编辑</p>
</li>
<li>
<p>用快捷键<code>w</code>布线</p>
<p><img alt="image-20250526115823217" src="../assets/image-20250526115823217.png" /></p>
</li>
<li>
<p>用快捷键<code>L（小写）</code>加入<code>label</code>, 相同的<code>label</code>的<code>wire</code>是连在一起的</p>
</li>
<li>
<p>用快捷键<code>r</code>旋转器件等</p>
</li>
<li>
<p>用快捷键<code>p</code>加入<code>port</code>, 也就是这个<code>Cell</code>的外部引脚，注意输入输出等</p>
</li>
<li>
<p><img alt="image-20250526120308868" src="../assets/image-20250526120308868.png" /></p>
</li>
<li>
<p><img src="assets/image-20250526120533482.png" alt="image-20250526120533482" style="zoom:80%;" /></p>
</li>
<li>
<p><img alt="image-20250526120828088" src="../assets/image-20250526120828088.png" /></p>
<blockquote>
<p>模拟电源一般命名为AVDD和AVSS</p>
<p>数字则是DVDD, DVSS</p>
</blockquote>
</li>
<li>
<p><code>Ctrl +s</code>保存<code>schematic</code>，再点击<code>Check and Save</code></p>
<p><img alt="image-20250526120746456" src="../assets/image-20250526120746456.png" /></p>
<p><img alt="image-20250526154522915" src="../assets/image-20250526154522915.png" /></p>
<blockquote>
<p>现在Library Manager 里面就有了相应的View， 其他也是一样的</p>
<p>对应的文件也在`./mylib/my_div_lib/NOR/下面</p>
</blockquote>
<p><img alt="image-20250526121721931" src="../assets/image-20250526121721931.png" /></p>
</li>
<li>
<p>新建<code>symbol</code></p>
</li>
</ul>
<p><img alt="image-20250526121620334" src="../assets/image-20250526121620334.png" /></p>
<p><img alt="image-20250526121913691" src="../assets/image-20250526121913691.png" /></p>
<p><img alt="image-20250526122001563" src="../assets/image-20250526122001563.png" /></p>
<p><img alt="image-20250526122055209" src="../assets/image-20250526122055209.png" /></p>
<blockquote>
<p>这里可以简单绘制一下，默认也行，就是一个矩形</p>
</blockquote>
<p>保存</p>
<p><img alt="image-20250526122043641" src="../assets/image-20250526122043641.png" /></p>
<p><img alt="image-20250526122214508" src="../assets/image-20250526122214508.png" /></p>
<ul>
<li>同理，新建<code>OR</code>的<code>schematic</code>， 使用创建好的<code>symbol</code>来画原理图，实现复用</li>
</ul>
<p><img alt="image-20250526122620277" src="../assets/image-20250526122620277.png" /></p>
<blockquote>
<p>NOR + INV = OR</p>
</blockquote>
<ul>
<li></li>
</ul>
<h3 id="4-testbench">4. 搭建<code>testbench</code><a class="headerlink" href="#4-testbench" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>新建原理图</p>
</li>
<li>
<p>插入自己设计的模块的<code>symbol</code></p>
</li>
</ul>
<p><img alt="image-20250526151722886" src="../assets/image-20250526151722886.png" /></p>
<p><img alt="image-20250526151643616" src="../assets/image-20250526151643616.png" /></p>
<blockquote>
<p>一个分频器示例</p>
</blockquote>
<ul>
<li>gnd, 直流源, clk等在<code>anlogLib</code>中</li>
</ul>
<h3 id="5-ade">5. ADE前仿<a class="headerlink" href="#5-ade" title="Permanent link">&para;</a></h3>
<ul>
<li>简单的任务可以用<code>ADE L</code>, 复杂了可以用<code>ADE Explorer</code> 和<code>ADE Assembler</code>, 具体使用查看<a href="# simulation ADE">这里</a></li>
</ul>
<blockquote>
<p>貌似现在还用<code>ADE L</code>有点落伍了0.0</p>
</blockquote>
<p><img src="assets/image-20250526152440163.png" alt="image-20250526152440163" style="zoom:67%;" /><img src="assets/image-20250526152535568.png" alt="image-20250526152535568" style="zoom:67%;" /></p>
<blockquote>
<p>这里选择做一个简单的瞬态仿真</p>
</blockquote>
<ul>
<li>
<p>选择观察信号</p>
<p><img alt="image-20250526152757060" src="../assets/image-20250526152757060.png" /></p>
<p><code>ADE Explorer</code> 中的做法：</p>
<p><img alt="image-20250905102345585" src="../assets/image-20250905102345585.png" /></p>
<p><img alt="image-20250526152823524" src="../assets/image-20250526152823524.png" /></p>
<blockquote>
<p>简单选取<code>schematic</code>中的<code>wire</code></p>
<p>也可以自定义一些表达式</p>
</blockquote>
</li>
<li>
<p><img alt="image-20250526153028358" src="../assets/image-20250526153028358.png" /></p>
</li>
<li>
<p>点击后会变颜色</p>
<p><img alt="image-20250526153118930" src="../assets/image-20250526153118930.png" /></p>
<blockquote>
<p>点击<code>wire</code>是电压，<code>pin</code>是电流</p>
<p>可以给原理图一些<code>label</code>明确一下是哪个信号</p>
</blockquote>
</li>
<li>
<p>开启仿真</p>
<p><img alt="image-20250526153217260" src="../assets/image-20250526153217260.png" /></p>
<ul>
<li><code>ADE Explorer</code><img alt="image-20250905102446195" src="../assets/image-20250905102446195.png" /></li>
</ul>
<p>仿真运行中：</p>
<p><img src="assets/image-20250526154153622.png" alt="image-20250526154153622" style="zoom:50%;" /><img src="assets/image-20250526154308816.png" alt="image-20250526154308816" style="zoom:50%;" /></p>
</li>
<li>
<p>仿真结束，弹出波形</p>
<p><img alt="image-20250526171212555" src="../assets/image-20250526171212555.png" /></p>
<ul>
<li><code>ADE Explorer</code></li>
</ul>
<p><img src="assets/image-20250905102551442.png" alt="image-20250905102551442" style="zoom: 80%;" /></p>
<p><img alt="image-20250526171228577" src="../assets/image-20250526171228577.png" /></p>
<blockquote>
<p>可以右键<code>split current strip--&gt;trace</code>把波形分开，然后可以拖动、缩放波形</p>
</blockquote>
</li>
<li>
<p>检查波形</p>
<ul>
<li>
<p>可以使用快捷键<code>v</code>实现测量</p>
</li>
<li>
<p>选中一个光标以后按<code>d</code>, 可以看两个光标之间的距离</p>
</li>
<li>
<p>也可以使用<code>calculator</code>的表达式功能</p>
</li>
</ul>
<p><img alt="image-20250905102630381" src="../assets/image-20250905102630381.png" /></p>
<p><img alt="image-20250905102818943" src="../assets/image-20250905102818943.png" /></p>
<p><img alt="image-20250905103019628" src="../assets/image-20250905103019628.png" /></p>
<p><img alt="image-20250905103149383" src="../assets/image-20250905103149383.png" /></p>
</li>
<li>
<p>仿真结束可以保存为<code>state</code>，一般用<code>cellview</code></p>
</li>
</ul>
<p><img src="assets/image-20250528225958962.png" alt="image-20250528225958962" style="zoom:50%;" /><img src="assets/image-20250528230019126.png" alt="image-20250528230019126" style="zoom:50%;" /></p>
<p>然后在这个<code>Cell</code>的<code>Veiw</code>里面就会有个<code>state</code>, 这个也可以导入到<code>ADE Explorer</code></p>
<h3 id="6pvt">6.前仿PVT验证<a class="headerlink" href="#6pvt" title="Permanent link">&para;</a></h3>
<blockquote>
<p>[!NOTE]</p>
<p>感觉这一步可以不做？如果没时间，或者性能卡得很死才做</p>
</blockquote>
<ol>
<li>获取<code>corner.scs</code></li>
</ol>
<p><img alt="image-20250529201519432" src="../assets/image-20250529201519432.png" /></p>
<blockquote>
<p>别人给我的，不知道, </p>
<p>安装目录有自带的，在<code>install/models/spectre/**.scs</code>, 或者<code>install/models/spectre/**.lib</code></p>
<p><code>ADE Explorer</code>下也可以看到</p>
<p><img alt="image-20250529173813929" src="../assets/image-20250529173813929.png" /><img src="assets/image-20250529173852265.png" alt="image-20250529173852265" style="zoom: 50%;" /></p>
</blockquote>
<ul>
<li>
<p>smic28 的一个示例<code>.scs文件</code></p>
<div class="highlight"><pre><span></span><code>section top_tt
include &quot;/SM05/home/phd2024/phd202411094979/pdk/SMIC28_uncomp/PDK/SPDK28HKCPlusRF_0925_OA_CDS_V1.0_REV5_1/smic28hkcPlusrf_0925_1P10M_8Ic_1TMc_1MTTc_ALPA2_oa_cds_2021_12_15_v1.0_rev5_1/smic28hkmg/../models/spectre/l0028hkcplus_io25_v1p0_rev5_spe.lib&quot; section=tt
include &quot;/SM05/home/phd2024/phd202411094979/pdk/SMIC28_uncomp/PDK/SPDK28HKCPlusRF_0925_OA_CDS_V1.0_REV5_1/smic28hkcPlusrf_0925_1P10M_8Ic_1TMc_1MTTc_ALPA2_oa_cds_2021_12_15_v1.0_rev5_1/smic28hkmg/../models/spectre/l0028hkcplus_io25_v1p0_rev5_spe.lib&quot; section=bjt_tt
include &quot;/SM05/home/phd2024/phd202411094979/pdk/SMIC28_uncomp/PDK/SPDK28HKCPlusRF_0925_OA_CDS_V1.0_REV5_1/smic28hkcPlusrf_0925_1P10M_8Ic_1TMc_1MTTc_ALPA2_oa_cds_2021_12_15_v1.0_rev5_1/smic28hkmg/../models/spectre/l0028hkcplus_io25_v1p0_rev5_spe.lib&quot; section=dio_tt
include &quot;/SM05/home/phd2024/phd202411094979/pdk/SMIC28_uncomp/PDK/SPDK28HKCPlusRF_0925_OA_CDS_V1.0_REV5_1/smic28hkcPlusrf_0925_1P10M_8Ic_1TMc_1MTTc_ALPA2_oa_cds_2021_12_15_v1.0_rev5_1/smic28hkmg/../models/spectre/l0028hkcplus_io25_v1p0_rev5_spe.lib&quot; section=res_tt
include &quot;/SM05/home/phd2024/phd202411094979/pdk/SMIC28_uncomp/PDK/SPDK28HKCPlusRF_0925_OA_CDS_V1.0_REV5_1/smic28hkcPlusrf_0925_1P10M_8Ic_1TMc_1MTTc_ALPA2_oa_cds_2021_12_15_v1.0_rev5_1/smic28hkmg/../models/spectre/l0028hkcplus_io25_v1p0_rev5_spe.lib&quot; section=var_tt
include &quot;/SM05/home/phd2024/phd202411094979/pdk/SMIC28_uncomp/PDK/SPDK28HKCPlusRF_0925_OA_CDS_V1.0_REV5_1/smic28hkcPlusrf_0925_1P10M_8Ic_1TMc_1MTTc_ALPA2_oa_cds_2021_12_15_v1.0_rev5_1/smic28hkmg/../models/spectre/l0028hkcplus_io25_v1p0_rev5_spe.lib&quot; section=mom_tt
include &quot;/SM05/home/phd2024/phd202411094979/pdk/SMIC28_uncomp/PDK/SPDK28HKCPlusRF_0925_OA_CDS_V1.0_REV5_1/smic28hkcPlusrf_0925_1P10M_8Ic_1TMc_1MTTc_ALPA2_oa_cds_2021_12_15_v1.0_rev5_1/smic28hkmg/../models/spectre/l0028hkcplus_io25_v1p0_rev5_spe.lib&quot; section=ldmos_tt
include &quot;/SM05/home/phd2024/phd202411094979/pdk/SMIC28_uncomp/PDK/SPDK28HKCPlusRF_0925_OA_CDS_V1.0_REV5_1/smic28hkcPlusrf_0925_1P10M_8Ic_1TMc_1MTTc_ALPA2_oa_cds_2021_12_15_v1.0_rev5_1/smic28hkmg/../models/spectre/l0028hkcplus_io25_v1p0_rev5_spe.lib&quot; section=esd_tt
include &quot;/SM05/home/phd2024/phd202411094979/pdk/SMIC28_uncomp/PDK/SPDK28HKCPlusRF_0925_OA_CDS_V1.0_REV5_1/smic28hkcPlusrf_0925_1P10M_8Ic_1TMc_1MTTc_ALPA2_oa_cds_2021_12_15_v1.0_rev5_1/smic28hkmg/../models/spectre/l0028hkcplus_io25_v1p0_rev5_spe.lib&quot; section=esd_dio_tt
include &quot;/SM05/home/phd2024/phd202411094979/pdk/SMIC28_uncomp/PDK/SPDK28HKCPlusRF_0925_OA_CDS_V1.0_REV5_1/smic28hkcPlusrf_0925_1P10M_8Ic_1TMc_1MTTc_ALPA2_oa_cds_2021_12_15_v1.0_rev5_1/smic28hkmg/../models/spectre/l0028hkcplus_io25_v1p0_rev0_rf_spe.lib&quot; section=tt
include &quot;/SM05/home/phd2024/phd202411094979/pdk/SMIC28_uncomp/PDK/SPDK28HKCPlusRF_0925_OA_CDS_V1.0_REV5_1/smic28hkcPlusrf_0925_1P10M_8Ic_1TMc_1MTTc_ALPA2_oa_cds_2021_12_15_v1.0_rev5_1/smic28hkmg/../models/spectre/l0028hkcplus_io25_v1p0_rev0_rf_spe.lib&quot; section=res_tt
include &quot;/SM05/home/phd2024/phd202411094979/pdk/SMIC28_uncomp/PDK/SPDK28HKCPlusRF_0925_OA_CDS_V1.0_REV5_1/smic28hkcPlusrf_0925_1P10M_8Ic_1TMc_1MTTc_ALPA2_oa_cds_2021_12_15_v1.0_rev5_1/smic28hkmg/../models/spectre/l0028hkcplus_io25_v1p0_rev0_rf_spe.lib&quot; section=var_tt
include &quot;/SM05/home/phd2024/phd202411094979/pdk/SMIC28_uncomp/PDK/SPDK28HKCPlusRF_0925_OA_CDS_V1.0_REV5_1/smic28hkcPlusrf_0925_1P10M_8Ic_1TMc_1MTTc_ALPA2_oa_cds_2021_12_15_v1.0_rev5_1/smic28hkmg/../models/spectre/l0028hkcplus_io25_v1p0_rev0_rf_spe.lib&quot; section=mom_tt
include &quot;/SM05/home/phd2024/phd202411094979/pdk/SMIC28_uncomp/PDK/SPDK28HKCPlusRF_0925_OA_CDS_V1.0_REV5_1/smic28hkcPlusrf_0925_1P10M_8Ic_1TMc_1MTTc_ALPA2_oa_cds_2021_12_15_v1.0_rev5_1/smic28hkmg/../models/spectre/l0028hkcplus_io25_v1p0_rev0_rf_spe.lib&quot; section=dio_tt
endsection top_tt
section top_ff
include &quot;/SM05/home/phd2024/phd202411094979/pdk/SMIC28_uncomp/PDK/SPDK28HKCPlusRF_0925_OA_CDS_V1.0_REV5_1/smic28hkcPlusrf_0925_1P10M_8Ic_1TMc_1MTTc_ALPA2_oa_cds_2021_12_15_v1.0_rev5_1/smic28hkmg/../models/spectre/l0028hkcplus_io25_v1p0_rev5_spe.lib&quot; section=ff
include &quot;/SM05/home/phd2024/phd202411094979/pdk/SMIC28_uncomp/PDK/SPDK28HKCPlusRF_0925_OA_CDS_V1.0_REV5_1/smic28hkcPlusrf_0925_1P10M_8Ic_1TMc_1MTTc_ALPA2_oa_cds_2021_12_15_v1.0_rev5_1/smic28hkmg/../models/spectre/l0028hkcplus_io25_v1p0_rev5_spe.lib&quot; section=bjt_ff
include &quot;/SM05/home/phd2024/phd202411094979/pdk/SMIC28_uncomp/PDK/SPDK28HKCPlusRF_0925_OA_CDS_V1.0_REV5_1/smic28hkcPlusrf_0925_1P10M_8Ic_1TMc_1MTTc_ALPA2_oa_cds_2021_12_15_v1.0_rev5_1/smic28hkmg/../models/spectre/l0028hkcplus_io25_v1p0_rev5_spe.lib&quot; section=dio_ff
include &quot;/SM05/home/phd2024/phd202411094979/pdk/SMIC28_uncomp/PDK/SPDK28HKCPlusRF_0925_OA_CDS_V1.0_REV5_1/smic28hkcPlusrf_0925_1P10M_8Ic_1TMc_1MTTc_ALPA2_oa_cds_2021_12_15_v1.0_rev5_1/smic28hkmg/../models/spectre/l0028hkcplus_io25_v1p0_rev5_spe.lib&quot; section=res_ff
include &quot;/SM05/home/phd2024/phd202411094979/pdk/SMIC28_uncomp/PDK/SPDK28HKCPlusRF_0925_OA_CDS_V1.0_REV5_1/smic28hkcPlusrf_0925_1P10M_8Ic_1TMc_1MTTc_ALPA2_oa_cds_2021_12_15_v1.0_rev5_1/smic28hkmg/../models/spectre/l0028hkcplus_io25_v1p0_rev5_spe.lib&quot; section=var_ff
include &quot;/SM05/home/phd2024/phd202411094979/pdk/SMIC28_uncomp/PDK/SPDK28HKCPlusRF_0925_OA_CDS_V1.0_REV5_1/smic28hkcPlusrf_0925_1P10M_8Ic_1TMc_1MTTc_ALPA2_oa_cds_2021_12_15_v1.0_rev5_1/smic28hkmg/../models/spectre/l0028hkcplus_io25_v1p0_rev5_spe.lib&quot; section=mom_ff
include &quot;/SM05/home/phd2024/phd202411094979/pdk/SMIC28_uncomp/PDK/SPDK28HKCPlusRF_0925_OA_CDS_V1.0_REV5_1/smic28hkcPlusrf_0925_1P10M_8Ic_1TMc_1MTTc_ALPA2_oa_cds_2021_12_15_v1.0_rev5_1/smic28hkmg/../models/spectre/l0028hkcplus_io25_v1p0_rev5_spe.lib&quot; section=ldmos_ff
include &quot;/SM05/home/phd2024/phd202411094979/pdk/SMIC28_uncomp/PDK/SPDK28HKCPlusRF_0925_OA_CDS_V1.0_REV5_1/smic28hkcPlusrf_0925_1P10M_8Ic_1TMc_1MTTc_ALPA2_oa_cds_2021_12_15_v1.0_rev5_1/smic28hkmg/../models/spectre/l0028hkcplus_io25_v1p0_rev5_spe.lib&quot; section=esd_ff
include &quot;/SM05/home/phd2024/phd202411094979/pdk/SMIC28_uncomp/PDK/SPDK28HKCPlusRF_0925_OA_CDS_V1.0_REV5_1/smic28hkcPlusrf_0925_1P10M_8Ic_1TMc_1MTTc_ALPA2_oa_cds_2021_12_15_v1.0_rev5_1/smic28hkmg/../models/spectre/l0028hkcplus_io25_v1p0_rev5_spe.lib&quot; section=esd_dio_ff
include &quot;/SM05/home/phd2024/phd202411094979/pdk/SMIC28_uncomp/PDK/SPDK28HKCPlusRF_0925_OA_CDS_V1.0_REV5_1/smic28hkcPlusrf_0925_1P10M_8Ic_1TMc_1MTTc_ALPA2_oa_cds_2021_12_15_v1.0_rev5_1/smic28hkmg/../models/spectre/l0028hkcplus_io25_v1p0_rev0_rf_spe.lib&quot; section=ff
include &quot;/SM05/home/phd2024/phd202411094979/pdk/SMIC28_uncomp/PDK/SPDK28HKCPlusRF_0925_OA_CDS_V1.0_REV5_1/smic28hkcPlusrf_0925_1P10M_8Ic_1TMc_1MTTc_ALPA2_oa_cds_2021_12_15_v1.0_rev5_1/smic28hkmg/../models/spectre/l0028hkcplus_io25_v1p0_rev0_rf_spe.lib&quot; section=res_ff
include &quot;/SM05/home/phd2024/phd202411094979/pdk/SMIC28_uncomp/PDK/SPDK28HKCPlusRF_0925_OA_CDS_V1.0_REV5_1/smic28hkcPlusrf_0925_1P10M_8Ic_1TMc_1MTTc_ALPA2_oa_cds_2021_12_15_v1.0_rev5_1/smic28hkmg/../models/spectre/l0028hkcplus_io25_v1p0_rev0_rf_spe.lib&quot; section=var_ff
include &quot;/SM05/home/phd2024/phd202411094979/pdk/SMIC28_uncomp/PDK/SPDK28HKCPlusRF_0925_OA_CDS_V1.0_REV5_1/smic28hkcPlusrf_0925_1P10M_8Ic_1TMc_1MTTc_ALPA2_oa_cds_2021_12_15_v1.0_rev5_1/smic28hkmg/../models/spectre/l0028hkcplus_io25_v1p0_rev0_rf_spe.lib&quot; section=mom_ff
include &quot;/SM05/home/phd2024/phd202411094979/pdk/SMIC28_uncomp/PDK/SPDK28HKCPlusRF_0925_OA_CDS_V1.0_REV5_1/smic28hkcPlusrf_0925_1P10M_8Ic_1TMc_1MTTc_ALPA2_oa_cds_2021_12_15_v1.0_rev5_1/smic28hkmg/../models/spectre/l0028hkcplus_io25_v1p0_rev0_rf_spe.lib&quot; section=dio_ff
endsection top_ff
section top_ss
include &quot;/SM05/home/phd2024/phd202411094979/pdk/SMIC28_uncomp/PDK/SPDK28HKCPlusRF_0925_OA_CDS_V1.0_REV5_1/smic28hkcPlusrf_0925_1P10M_8Ic_1TMc_1MTTc_ALPA2_oa_cds_2021_12_15_v1.0_rev5_1/smic28hkmg/../models/spectre/l0028hkcplus_io25_v1p0_rev5_spe.lib&quot; section=ss
include &quot;/SM05/home/phd2024/phd202411094979/pdk/SMIC28_uncomp/PDK/SPDK28HKCPlusRF_0925_OA_CDS_V1.0_REV5_1/smic28hkcPlusrf_0925_1P10M_8Ic_1TMc_1MTTc_ALPA2_oa_cds_2021_12_15_v1.0_rev5_1/smic28hkmg/../models/spectre/l0028hkcplus_io25_v1p0_rev5_spe.lib&quot; section=bjt_ss
include &quot;/SM05/home/phd2024/phd202411094979/pdk/SMIC28_uncomp/PDK/SPDK28HKCPlusRF_0925_OA_CDS_V1.0_REV5_1/smic28hkcPlusrf_0925_1P10M_8Ic_1TMc_1MTTc_ALPA2_oa_cds_2021_12_15_v1.0_rev5_1/smic28hkmg/../models/spectre/l0028hkcplus_io25_v1p0_rev5_spe.lib&quot; section=dio_ss
include &quot;/SM05/home/phd2024/phd202411094979/pdk/SMIC28_uncomp/PDK/SPDK28HKCPlusRF_0925_OA_CDS_V1.0_REV5_1/smic28hkcPlusrf_0925_1P10M_8Ic_1TMc_1MTTc_ALPA2_oa_cds_2021_12_15_v1.0_rev5_1/smic28hkmg/../models/spectre/l0028hkcplus_io25_v1p0_rev5_spe.lib&quot; section=res_ss
include &quot;/SM05/home/phd2024/phd202411094979/pdk/SMIC28_uncomp/PDK/SPDK28HKCPlusRF_0925_OA_CDS_V1.0_REV5_1/smic28hkcPlusrf_0925_1P10M_8Ic_1TMc_1MTTc_ALPA2_oa_cds_2021_12_15_v1.0_rev5_1/smic28hkmg/../models/spectre/l0028hkcplus_io25_v1p0_rev5_spe.lib&quot; section=var_ss
include &quot;/SM05/home/phd2024/phd202411094979/pdk/SMIC28_uncomp/PDK/SPDK28HKCPlusRF_0925_OA_CDS_V1.0_REV5_1/smic28hkcPlusrf_0925_1P10M_8Ic_1TMc_1MTTc_ALPA2_oa_cds_2021_12_15_v1.0_rev5_1/smic28hkmg/../models/spectre/l0028hkcplus_io25_v1p0_rev5_spe.lib&quot; section=mom_ss
include &quot;/SM05/home/phd2024/phd202411094979/pdk/SMIC28_uncomp/PDK/SPDK28HKCPlusRF_0925_OA_CDS_V1.0_REV5_1/smic28hkcPlusrf_0925_1P10M_8Ic_1TMc_1MTTc_ALPA2_oa_cds_2021_12_15_v1.0_rev5_1/smic28hkmg/../models/spectre/l0028hkcplus_io25_v1p0_rev5_spe.lib&quot; section=ldmos_ss
include &quot;/SM05/home/phd2024/phd202411094979/pdk/SMIC28_uncomp/PDK/SPDK28HKCPlusRF_0925_OA_CDS_V1.0_REV5_1/smic28hkcPlusrf_0925_1P10M_8Ic_1TMc_1MTTc_ALPA2_oa_cds_2021_12_15_v1.0_rev5_1/smic28hkmg/../models/spectre/l0028hkcplus_io25_v1p0_rev5_spe.lib&quot; section=esd_ss
include &quot;/SM05/home/phd2024/phd202411094979/pdk/SMIC28_uncomp/PDK/SPDK28HKCPlusRF_0925_OA_CDS_V1.0_REV5_1/smic28hkcPlusrf_0925_1P10M_8Ic_1TMc_1MTTc_ALPA2_oa_cds_2021_12_15_v1.0_rev5_1/smic28hkmg/../models/spectre/l0028hkcplus_io25_v1p0_rev5_spe.lib&quot; section=esd_dio_ss
include &quot;/SM05/home/phd2024/phd202411094979/pdk/SMIC28_uncomp/PDK/SPDK28HKCPlusRF_0925_OA_CDS_V1.0_REV5_1/smic28hkcPlusrf_0925_1P10M_8Ic_1TMc_1MTTc_ALPA2_oa_cds_2021_12_15_v1.0_rev5_1/smic28hkmg/../models/spectre/l0028hkcplus_io25_v1p0_rev0_rf_spe.lib&quot; section=ss
include &quot;/SM05/home/phd2024/phd202411094979/pdk/SMIC28_uncomp/PDK/SPDK28HKCPlusRF_0925_OA_CDS_V1.0_REV5_1/smic28hkcPlusrf_0925_1P10M_8Ic_1TMc_1MTTc_ALPA2_oa_cds_2021_12_15_v1.0_rev5_1/smic28hkmg/../models/spectre/l0028hkcplus_io25_v1p0_rev0_rf_spe.lib&quot; section=res_ss
include &quot;/SM05/home/phd2024/phd202411094979/pdk/SMIC28_uncomp/PDK/SPDK28HKCPlusRF_0925_OA_CDS_V1.0_REV5_1/smic28hkcPlusrf_0925_1P10M_8Ic_1TMc_1MTTc_ALPA2_oa_cds_2021_12_15_v1.0_rev5_1/smic28hkmg/../models/spectre/l0028hkcplus_io25_v1p0_rev0_rf_spe.lib&quot; section=var_ss
include &quot;/SM05/home/phd2024/phd202411094979/pdk/SMIC28_uncomp/PDK/SPDK28HKCPlusRF_0925_OA_CDS_V1.0_REV5_1/smic28hkcPlusrf_0925_1P10M_8Ic_1TMc_1MTTc_ALPA2_oa_cds_2021_12_15_v1.0_rev5_1/smic28hkmg/../models/spectre/l0028hkcplus_io25_v1p0_rev0_rf_spe.lib&quot; section=mom_ss
include &quot;/SM05/home/phd2024/phd202411094979/pdk/SMIC28_uncomp/PDK/SPDK28HKCPlusRF_0925_OA_CDS_V1.0_REV5_1/smic28hkcPlusrf_0925_1P10M_8Ic_1TMc_1MTTc_ALPA2_oa_cds_2021_12_15_v1.0_rev5_1/smic28hkmg/../models/spectre/l0028hkcplus_io25_v1p0_rev0_rf_spe.lib&quot; section=dio_ss
endsection top_ss
</code></pre></div>
</li>
<li>
<p>一个8种工艺角示例：</p>
<p><img alt="image-20250529165745924" src="../assets/image-20250529165745924.png" /></p>
<blockquote>
<ol>
<li>Slow NMOS、slow PMOS、slow 电容</li>
<li>Slow NMOS、slow PMOS、fast 电容</li>
<li>Slow NMOS、fast PMOS、slow 电容</li>
<li>Slow NMOS、fast PMOS、fast 电容</li>
<li>Fast NMOS、slow PMOS、slow 电容</li>
<li>Fast NMOS、slow PMOS、fast 电容</li>
<li>Fast NMOS、fast PMOS、slow 电容</li>
<li>Fast NMOS、fast PMOS、fast 电容</li>
</ol>
</blockquote>
</li>
<li>
<p>导入<code>corner.scs</code></p>
</li>
</ul>
<p><img alt="image-20250529165015834" src="../assets/image-20250529165015834.png" /></p>
<p><img alt="image-20250529170102262" src="../assets/image-20250529170102262.png" /></p>
<div class="highlight"><pre><span></span><code>section pre_layout
include &quot;/SM05/home/phd2024/phd202411094979/pdk/SMIC28_uncomp/PDK/SPDK28HKCPlusRF_0925_OA_CDS_V1.0_REV5_1/smic28hkcPlusrf_0925_1P10M_8Ic_1TMc_1MTTc_ALPA2_oa_cds_2021_12_15_v1.0_rev5_1/smic28hkmg/../models/spectre/l0028hkcplus_io25_v1p0_rev5_spe.lib&quot; section=pre_layout
endsection pre_layout

section noise_tt
include &quot;/SM05/home/phd2024/phd202411094979/pdk/SMIC28_uncomp/PDK/SPDK28HKCPlusRF_0925_OA_CDS_V1.0_REV5_1/smic28hkcPlusrf_0925_1P10M_8Ic_1TMc_1MTTc_ALPA2_oa_cds_2021_12_15_v1.0_rev5_1/smic28hkmg/../models/spectre/l0028hkcplus_io25_v1p0_rev5_spe.lib&quot; section=noise_tt
endsection noise_tt

section top_tt
include &quot;/SM05/home/phd2024/phd202411094979/pdk/SMIC28_uncomp/PDK/SPDK28HKCPlusRF_0925_OA_CDS_V1.0_REV5_1/smic28hkcPlusrf_0925_1P10M_8Ic_1TMc_1MTTc_ALPA2_oa_cds_2021_12_15_v1.0_rev5_1/smic28hkmg/../models/spectre/l0028hkcplus_io25_v1p0_rev5_spe.lib&quot; section=tt
include &quot;/SM05/home/phd2024/phd202411094979/pdk/SMIC28_uncomp/PDK/SPDK28HKCPlusRF_0925_OA_CDS_V1.0_REV5_1/smic28hkcPlusrf_0925_1P10M_8Ic_1TMc_1MTTc_ALPA2_oa_cds_2021_12_15_v1.0_rev5_1/smic28hkmg/../models/spectre/l0028hkcplus_io25_v1p0_rev5_spe.lib&quot; section=bjt_tt
include &quot;/SM05/home/phd2024/phd202411094979/pdk/SMIC28_uncomp/PDK/SPDK28HKCPlusRF_0925_OA_CDS_V1.0_REV5_1/smic28hkcPlusrf_0925_1P10M_8Ic_1TMc_1MTTc_ALPA2_oa_cds_2021_12_15_v1.0_rev5_1/smic28hkmg/../models/spectre/l0028hkcplus_io25_v1p0_rev5_spe.lib&quot; section=dio_tt
include &quot;/SM05/home/phd2024/phd202411094979/pdk/SMIC28_uncomp/PDK/SPDK28HKCPlusRF_0925_OA_CDS_V1.0_REV5_1/smic28hkcPlusrf_0925_1P10M_8Ic_1TMc_1MTTc_ALPA2_oa_cds_2021_12_15_v1.0_rev5_1/smic28hkmg/../models/spectre/l0028hkcplus_io25_v1p0_rev5_spe.lib&quot; section=res_tt
include &quot;/SM05/home/phd2024/phd202411094979/pdk/SMIC28_uncomp/PDK/SPDK28HKCPlusRF_0925_OA_CDS_V1.0_REV5_1/smic28hkcPlusrf_0925_1P10M_8Ic_1TMc_1MTTc_ALPA2_oa_cds_2021_12_15_v1.0_rev5_1/smic28hkmg/../models/spectre/l0028hkcplus_io25_v1p0_rev5_spe.lib&quot; section=var_tt
include &quot;/SM05/home/phd2024/phd202411094979/pdk/SMIC28_uncomp/PDK/SPDK28HKCPlusRF_0925_OA_CDS_V1.0_REV5_1/smic28hkcPlusrf_0925_1P10M_8Ic_1TMc_1MTTc_ALPA2_oa_cds_2021_12_15_v1.0_rev5_1/smic28hkmg/../models/spectre/l0028hkcplus_io25_v1p0_rev5_spe.lib&quot; section=mom_tt
include &quot;/SM05/home/phd2024/phd202411094979/pdk/SMIC28_uncomp/PDK/SPDK28HKCPlusRF_0925_OA_CDS_V1.0_REV5_1/smic28hkcPlusrf_0925_1P10M_8Ic_1TMc_1MTTc_ALPA2_oa_cds_2021_12_15_v1.0_rev5_1/smic28hkmg/../models/spectre/l0028hkcplus_io25_v1p0_rev5_spe.lib&quot; section=ldmos_tt
include &quot;/SM05/home/phd2024/phd202411094979/pdk/SMIC28_uncomp/PDK/SPDK28HKCPlusRF_0925_OA_CDS_V1.0_REV5_1/smic28hkcPlusrf_0925_1P10M_8Ic_1TMc_1MTTc_ALPA2_oa_cds_2021_12_15_v1.0_rev5_1/smic28hkmg/../models/spectre/l0028hkcplus_io25_v1p0_rev5_spe.lib&quot; section=esd_tt
include &quot;/SM05/home/phd2024/phd202411094979/pdk/SMIC28_uncomp/PDK/SPDK28HKCPlusRF_0925_OA_CDS_V1.0_REV5_1/smic28hkcPlusrf_0925_1P10M_8Ic_1TMc_1MTTc_ALPA2_oa_cds_2021_12_15_v1.0_rev5_1/smic28hkmg/../models/spectre/l0028hkcplus_io25_v1p0_rev5_spe.lib&quot; section=esd_dio_tt
include &quot;/SM05/home/phd2024/phd202411094979/pdk/SMIC28_uncomp/PDK/SPDK28HKCPlusRF_0925_OA_CDS_V1.0_REV5_1/smic28hkcPlusrf_0925_1P10M_8Ic_1TMc_1MTTc_ALPA2_oa_cds_2021_12_15_v1.0_rev5_1/smic28hkmg/../models/spectre/l0028hkcplus_io25_v1p0_rev0_rf_spe.lib&quot; section=tt
include &quot;/SM05/home/phd2024/phd202411094979/pdk/SMIC28_uncomp/PDK/SPDK28HKCPlusRF_0925_OA_CDS_V1.0_REV5_1/smic28hkcPlusrf_0925_1P10M_8Ic_1TMc_1MTTc_ALPA2_oa_cds_2021_12_15_v1.0_rev5_1/smic28hkmg/../models/spectre/l0028hkcplus_io25_v1p0_rev0_rf_spe.lib&quot; section=res_tt
include &quot;/SM05/home/phd2024/phd202411094979/pdk/SMIC28_uncomp/PDK/SPDK28HKCPlusRF_0925_OA_CDS_V1.0_REV5_1/smic28hkcPlusrf_0925_1P10M_8Ic_1TMc_1MTTc_ALPA2_oa_cds_2021_12_15_v1.0_rev5_1/smic28hkmg/../models/spectre/l0028hkcplus_io25_v1p0_rev0_rf_spe.lib&quot; section=var_tt
include &quot;/SM05/home/phd2024/phd202411094979/pdk/SMIC28_uncomp/PDK/SPDK28HKCPlusRF_0925_OA_CDS_V1.0_REV5_1/smic28hkcPlusrf_0925_1P10M_8Ic_1TMc_1MTTc_ALPA2_oa_cds_2021_12_15_v1.0_rev5_1/smic28hkmg/../models/spectre/l0028hkcplus_io25_v1p0_rev0_rf_spe.lib&quot; section=mom_tt
include &quot;/SM05/home/phd2024/phd202411094979/pdk/SMIC28_uncomp/PDK/SPDK28HKCPlusRF_0925_OA_CDS_V1.0_REV5_1/smic28hkcPlusrf_0925_1P10M_8Ic_1TMc_1MTTc_ALPA2_oa_cds_2021_12_15_v1.0_rev5_1/smic28hkmg/../models/spectre/l0028hkcplus_io25_v1p0_rev0_rf_spe.lib&quot; section=dio_tt
endsection top_tt
section top_ff
include &quot;/SM05/home/phd2024/phd202411094979/pdk/SMIC28_uncomp/PDK/SPDK28HKCPlusRF_0925_OA_CDS_V1.0_REV5_1/smic28hkcPlusrf_0925_1P10M_8Ic_1TMc_1MTTc_ALPA2_oa_cds_2021_12_15_v1.0_rev5_1/smic28hkmg/../models/spectre/l0028hkcplus_io25_v1p0_rev5_spe.lib&quot; section=ff
include &quot;/SM05/home/phd2024/phd202411094979/pdk/SMIC28_uncomp/PDK/SPDK28HKCPlusRF_0925_OA_CDS_V1.0_REV5_1/smic28hkcPlusrf_0925_1P10M_8Ic_1TMc_1MTTc_ALPA2_oa_cds_2021_12_15_v1.0_rev5_1/smic28hkmg/../models/spectre/l0028hkcplus_io25_v1p0_rev5_spe.lib&quot; section=bjt_ff
include &quot;/SM05/home/phd2024/phd202411094979/pdk/SMIC28_uncomp/PDK/SPDK28HKCPlusRF_0925_OA_CDS_V1.0_REV5_1/smic28hkcPlusrf_0925_1P10M_8Ic_1TMc_1MTTc_ALPA2_oa_cds_2021_12_15_v1.0_rev5_1/smic28hkmg/../models/spectre/l0028hkcplus_io25_v1p0_rev5_spe.lib&quot; section=dio_ff
include &quot;/SM05/home/phd2024/phd202411094979/pdk/SMIC28_uncomp/PDK/SPDK28HKCPlusRF_0925_OA_CDS_V1.0_REV5_1/smic28hkcPlusrf_0925_1P10M_8Ic_1TMc_1MTTc_ALPA2_oa_cds_2021_12_15_v1.0_rev5_1/smic28hkmg/../models/spectre/l0028hkcplus_io25_v1p0_rev5_spe.lib&quot; section=res_ff
include &quot;/SM05/home/phd2024/phd202411094979/pdk/SMIC28_uncomp/PDK/SPDK28HKCPlusRF_0925_OA_CDS_V1.0_REV5_1/smic28hkcPlusrf_0925_1P10M_8Ic_1TMc_1MTTc_ALPA2_oa_cds_2021_12_15_v1.0_rev5_1/smic28hkmg/../models/spectre/l0028hkcplus_io25_v1p0_rev5_spe.lib&quot; section=var_ff
include &quot;/SM05/home/phd2024/phd202411094979/pdk/SMIC28_uncomp/PDK/SPDK28HKCPlusRF_0925_OA_CDS_V1.0_REV5_1/smic28hkcPlusrf_0925_1P10M_8Ic_1TMc_1MTTc_ALPA2_oa_cds_2021_12_15_v1.0_rev5_1/smic28hkmg/../models/spectre/l0028hkcplus_io25_v1p0_rev5_spe.lib&quot; section=mom_ff
include &quot;/SM05/home/phd2024/phd202411094979/pdk/SMIC28_uncomp/PDK/SPDK28HKCPlusRF_0925_OA_CDS_V1.0_REV5_1/smic28hkcPlusrf_0925_1P10M_8Ic_1TMc_1MTTc_ALPA2_oa_cds_2021_12_15_v1.0_rev5_1/smic28hkmg/../models/spectre/l0028hkcplus_io25_v1p0_rev5_spe.lib&quot; section=ldmos_ff
include &quot;/SM05/home/phd2024/phd202411094979/pdk/SMIC28_uncomp/PDK/SPDK28HKCPlusRF_0925_OA_CDS_V1.0_REV5_1/smic28hkcPlusrf_0925_1P10M_8Ic_1TMc_1MTTc_ALPA2_oa_cds_2021_12_15_v1.0_rev5_1/smic28hkmg/../models/spectre/l0028hkcplus_io25_v1p0_rev5_spe.lib&quot; section=esd_ff
include &quot;/SM05/home/phd2024/phd202411094979/pdk/SMIC28_uncomp/PDK/SPDK28HKCPlusRF_0925_OA_CDS_V1.0_REV5_1/smic28hkcPlusrf_0925_1P10M_8Ic_1TMc_1MTTc_ALPA2_oa_cds_2021_12_15_v1.0_rev5_1/smic28hkmg/../models/spectre/l0028hkcplus_io25_v1p0_rev5_spe.lib&quot; section=esd_dio_ff
include &quot;/SM05/home/phd2024/phd202411094979/pdk/SMIC28_uncomp/PDK/SPDK28HKCPlusRF_0925_OA_CDS_V1.0_REV5_1/smic28hkcPlusrf_0925_1P10M_8Ic_1TMc_1MTTc_ALPA2_oa_cds_2021_12_15_v1.0_rev5_1/smic28hkmg/../models/spectre/l0028hkcplus_io25_v1p0_rev0_rf_spe.lib&quot; section=ff
include &quot;/SM05/home/phd2024/phd202411094979/pdk/SMIC28_uncomp/PDK/SPDK28HKCPlusRF_0925_OA_CDS_V1.0_REV5_1/smic28hkcPlusrf_0925_1P10M_8Ic_1TMc_1MTTc_ALPA2_oa_cds_2021_12_15_v1.0_rev5_1/smic28hkmg/../models/spectre/l0028hkcplus_io25_v1p0_rev0_rf_spe.lib&quot; section=res_ff
include &quot;/SM05/home/phd2024/phd202411094979/pdk/SMIC28_uncomp/PDK/SPDK28HKCPlusRF_0925_OA_CDS_V1.0_REV5_1/smic28hkcPlusrf_0925_1P10M_8Ic_1TMc_1MTTc_ALPA2_oa_cds_2021_12_15_v1.0_rev5_1/smic28hkmg/../models/spectre/l0028hkcplus_io25_v1p0_rev0_rf_spe.lib&quot; section=var_ff
include &quot;/SM05/home/phd2024/phd202411094979/pdk/SMIC28_uncomp/PDK/SPDK28HKCPlusRF_0925_OA_CDS_V1.0_REV5_1/smic28hkcPlusrf_0925_1P10M_8Ic_1TMc_1MTTc_ALPA2_oa_cds_2021_12_15_v1.0_rev5_1/smic28hkmg/../models/spectre/l0028hkcplus_io25_v1p0_rev0_rf_spe.lib&quot; section=mom_ff
include &quot;/SM05/home/phd2024/phd202411094979/pdk/SMIC28_uncomp/PDK/SPDK28HKCPlusRF_0925_OA_CDS_V1.0_REV5_1/smic28hkcPlusrf_0925_1P10M_8Ic_1TMc_1MTTc_ALPA2_oa_cds_2021_12_15_v1.0_rev5_1/smic28hkmg/../models/spectre/l0028hkcplus_io25_v1p0_rev0_rf_spe.lib&quot; section=dio_ff
endsection top_ff
section top_ss
include &quot;/SM05/home/phd2024/phd202411094979/pdk/SMIC28_uncomp/PDK/SPDK28HKCPlusRF_0925_OA_CDS_V1.0_REV5_1/smic28hkcPlusrf_0925_1P10M_8Ic_1TMc_1MTTc_ALPA2_oa_cds_2021_12_15_v1.0_rev5_1/smic28hkmg/../models/spectre/l0028hkcplus_io25_v1p0_rev5_spe.lib&quot; section=ss
include &quot;/SM05/home/phd2024/phd202411094979/pdk/SMIC28_uncomp/PDK/SPDK28HKCPlusRF_0925_OA_CDS_V1.0_REV5_1/smic28hkcPlusrf_0925_1P10M_8Ic_1TMc_1MTTc_ALPA2_oa_cds_2021_12_15_v1.0_rev5_1/smic28hkmg/../models/spectre/l0028hkcplus_io25_v1p0_rev5_spe.lib&quot; section=bjt_ss
include &quot;/SM05/home/phd2024/phd202411094979/pdk/SMIC28_uncomp/PDK/SPDK28HKCPlusRF_0925_OA_CDS_V1.0_REV5_1/smic28hkcPlusrf_0925_1P10M_8Ic_1TMc_1MTTc_ALPA2_oa_cds_2021_12_15_v1.0_rev5_1/smic28hkmg/../models/spectre/l0028hkcplus_io25_v1p0_rev5_spe.lib&quot; section=dio_ss
include &quot;/SM05/home/phd2024/phd202411094979/pdk/SMIC28_uncomp/PDK/SPDK28HKCPlusRF_0925_OA_CDS_V1.0_REV5_1/smic28hkcPlusrf_0925_1P10M_8Ic_1TMc_1MTTc_ALPA2_oa_cds_2021_12_15_v1.0_rev5_1/smic28hkmg/../models/spectre/l0028hkcplus_io25_v1p0_rev5_spe.lib&quot; section=res_ss
include &quot;/SM05/home/phd2024/phd202411094979/pdk/SMIC28_uncomp/PDK/SPDK28HKCPlusRF_0925_OA_CDS_V1.0_REV5_1/smic28hkcPlusrf_0925_1P10M_8Ic_1TMc_1MTTc_ALPA2_oa_cds_2021_12_15_v1.0_rev5_1/smic28hkmg/../models/spectre/l0028hkcplus_io25_v1p0_rev5_spe.lib&quot; section=var_ss
include &quot;/SM05/home/phd2024/phd202411094979/pdk/SMIC28_uncomp/PDK/SPDK28HKCPlusRF_0925_OA_CDS_V1.0_REV5_1/smic28hkcPlusrf_0925_1P10M_8Ic_1TMc_1MTTc_ALPA2_oa_cds_2021_12_15_v1.0_rev5_1/smic28hkmg/../models/spectre/l0028hkcplus_io25_v1p0_rev5_spe.lib&quot; section=mom_ss
include &quot;/SM05/home/phd2024/phd202411094979/pdk/SMIC28_uncomp/PDK/SPDK28HKCPlusRF_0925_OA_CDS_V1.0_REV5_1/smic28hkcPlusrf_0925_1P10M_8Ic_1TMc_1MTTc_ALPA2_oa_cds_2021_12_15_v1.0_rev5_1/smic28hkmg/../models/spectre/l0028hkcplus_io25_v1p0_rev5_spe.lib&quot; section=ldmos_ss
include &quot;/SM05/home/phd2024/phd202411094979/pdk/SMIC28_uncomp/PDK/SPDK28HKCPlusRF_0925_OA_CDS_V1.0_REV5_1/smic28hkcPlusrf_0925_1P10M_8Ic_1TMc_1MTTc_ALPA2_oa_cds_2021_12_15_v1.0_rev5_1/smic28hkmg/../models/spectre/l0028hkcplus_io25_v1p0_rev5_spe.lib&quot; section=esd_ss
include &quot;/SM05/home/phd2024/phd202411094979/pdk/SMIC28_uncomp/PDK/SPDK28HKCPlusRF_0925_OA_CDS_V1.0_REV5_1/smic28hkcPlusrf_0925_1P10M_8Ic_1TMc_1MTTc_ALPA2_oa_cds_2021_12_15_v1.0_rev5_1/smic28hkmg/../models/spectre/l0028hkcplus_io25_v1p0_rev5_spe.lib&quot; section=esd_dio_ss
include &quot;/SM05/home/phd2024/phd202411094979/pdk/SMIC28_uncomp/PDK/SPDK28HKCPlusRF_0925_OA_CDS_V1.0_REV5_1/smic28hkcPlusrf_0925_1P10M_8Ic_1TMc_1MTTc_ALPA2_oa_cds_2021_12_15_v1.0_rev5_1/smic28hkmg/../models/spectre/l0028hkcplus_io25_v1p0_rev0_rf_spe.lib&quot; section=ss
include &quot;/SM05/home/phd2024/phd202411094979/pdk/SMIC28_uncomp/PDK/SPDK28HKCPlusRF_0925_OA_CDS_V1.0_REV5_1/smic28hkcPlusrf_0925_1P10M_8Ic_1TMc_1MTTc_ALPA2_oa_cds_2021_12_15_v1.0_rev5_1/smic28hkmg/../models/spectre/l0028hkcplus_io25_v1p0_rev0_rf_spe.lib&quot; section=res_ss
include &quot;/SM05/home/phd2024/phd202411094979/pdk/SMIC28_uncomp/PDK/SPDK28HKCPlusRF_0925_OA_CDS_V1.0_REV5_1/smic28hkcPlusrf_0925_1P10M_8Ic_1TMc_1MTTc_ALPA2_oa_cds_2021_12_15_v1.0_rev5_1/smic28hkmg/../models/spectre/l0028hkcplus_io25_v1p0_rev0_rf_spe.lib&quot; section=var_ss
include &quot;/SM05/home/phd2024/phd202411094979/pdk/SMIC28_uncomp/PDK/SPDK28HKCPlusRF_0925_OA_CDS_V1.0_REV5_1/smic28hkcPlusrf_0925_1P10M_8Ic_1TMc_1MTTc_ALPA2_oa_cds_2021_12_15_v1.0_rev5_1/smic28hkmg/../models/spectre/l0028hkcplus_io25_v1p0_rev0_rf_spe.lib&quot; section=mom_ss
include &quot;/SM05/home/phd2024/phd202411094979/pdk/SMIC28_uncomp/PDK/SPDK28HKCPlusRF_0925_OA_CDS_V1.0_REV5_1/smic28hkcPlusrf_0925_1P10M_8Ic_1TMc_1MTTc_ALPA2_oa_cds_2021_12_15_v1.0_rev5_1/smic28hkmg/../models/spectre/l0028hkcplus_io25_v1p0_rev0_rf_spe.lib&quot; section=dio_ss
endsection top_ss
</code></pre></div>
<ol>
<li>选择<code>corner</code></li>
</ol>
<p><img alt="image-20250529170035147" src="../assets/image-20250529170035147.png" /></p>
<p><img alt="image-20250529170356411" src="../assets/image-20250529170356411.png" /></p>
<p>设置温度和电压</p>
<ul>
<li>设置电源<code>AVDD</code>电压变量为0.9</li>
</ul>
<p><img alt="image-20250529212956149" src="../assets/image-20250529212956149.png" /></p>
<p><code>test</code>右键<code>Design Variables</code>下导入变量，设置默认值</p>
<p><img alt="image-20250529215713053" src="../assets/image-20250529215713053.png" /></p>
<p><img alt="image-20250529213053248" src="../assets/image-20250529213053248.png" /></p>
<p>修改不同<code>corner</code>对应的温度和电压</p>
<p><img alt="image-20250905103850766" src="../assets/image-20250905103850766.png" /></p>
<ol>
<li>点击<code>OK</code>， 重新开启仿真</li>
</ol>
<p><img alt="image-20250529170519335" src="../assets/image-20250529170519335.png" /></p>
<ol>
<li><code>plot</code>可以过滤具体的corner或信号</li>
</ol>
<p><img alt="image-20250529171046355" src="../assets/image-20250529171046355.png" /></p>
<p><img alt="image-20250529171021484" src="../assets/image-20250529171021484.png" /></p>
<p><img alt="image-20250529170906844" src="../assets/image-20250529170906844.png" /></p>
<p><strong>参考</strong></p>
<ul>
<li><a href="https://blog.csdn.net/qq_42702596/article/details/124285118">cadence的工艺角仿真、蒙特卡洛仿真、PSRR-CSDN博客</a></li>
</ul>
<h3 id="7">7.画版图<a class="headerlink" href="#7" title="Permanent link">&para;</a></h3>
<p><a href="https://blog.csdn.net/weixin_42221495/article/details/128989819">Cadence Virtuoso Layout 快捷键_virtuoso镜像翻转快捷键-CSDN博客</a></p>
<p>发现SMIC28工艺不能90°旋转</p>
<p>前仿正确后，就可以绘制版图了</p>
<ul>
<li>在原理图选择<code>Layout XL</code></li>
</ul>
<p><img alt="image-20250615165416875" src="../assets/image-20250615165416875.png" /></p>
<ul>
<li>把器件拿过来</li>
</ul>
<p><img alt="image-20250617131909739" src="../assets/image-20250617131909739.png" /></p>
<ul>
<li>
<p>连线(快捷键p)</p>
</li>
<li>
<p>画矩形(r)</p>
</li>
<li>
<p>自动打孔(o)</p>
</li>
</ul>
<p><img alt="image-20250905151431064" src="../assets/image-20250905151431064.png" /></p>
<ul>
<li>
<p>加garding(shift+g)</p>
</li>
<li>
<p>如果某个pin找不到了，可以<code>ctrl+a</code>然后右键按<code>q</code>, 可以看到所有信息</p>
</li>
<li>
<p>可以通过右键<code>keep</code>选中，然后删除dv'y;</p>
</li>
<li>
<p>常规设置(e)</p>
</li>
</ul>
<p><img alt="image-20250905163436451" src="../assets/image-20250905163436451.png" /></p>
<h5 id="_3">常用技巧<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h5>
<p><a href="https://zhuanlan.zhihu.com/p/523707257"> 模拟集成电路版图要点小结 - 知乎</a></p>
<p><img alt="image-20251105095726390" src="../assets/image-20251105095726390.png" /></p>
<h4 id="_4">一个能够较快手动布线的技巧<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h4>
<p>相隔的层使用不同的走线方向（类似数字的方法），这样可以不用仔细看是否会短路。</p>
<p>缺点是过孔比较多</p>
<h4 id="_5">源漏共用<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h4>
<p><a href="https://www.bilibili.com/video/BV18FcmeGEK8?vd_source=ea5f077dc692dc32725d05ff92da61a5&amp;spm_id_from=333.788.player.switch&amp;p=12">12-源漏共用_哔哩哔哩_bilibili</a></p>
<p>一个实例：左边为没有源漏共用的NAND版图，右边为源漏共用NAND版图，面积小了</p>
<p><img alt="image-20251010164558832" src="D:\My2025\MyNotes\flow\assets\image-20251010164558832.png" /></p>
<blockquote>
<p>[!TIP]</p>
<p>应该也可以用数字库的版图，就是没有那么general了</p>
</blockquote>
<h4 id="mos">MOS匹配<a class="headerlink" href="#mos" title="Permanent link">&para;</a></h4>
<h4 id="tips">Tips<a class="headerlink" href="#tips" title="Permanent link">&para;</a></h4>
<ul>
<li>注意每一个module分开画，画完尽量加上boundry然后左下角放到坐标原点</li>
</ul>
<h3 id="8drc-lvs">8.DRC, LVS<a class="headerlink" href="#8drc-lvs" title="Permanent link">&para;</a></h3>
<p><img alt="image-20250905111303616" src="../assets/image-20250905111303616.png" /></p>
<blockquote>
<p>[!NOTE]</p>
<p>要通过脚本才能把这个calibre放到菜单栏的，calibre是西门子的，virtuoso是</p>
</blockquote>
<p>和数字的没区别，都是选pdk里面的rule文件（后缀为<code>.drc</code>, <code>.lvs</code>）</p>
<blockquote>
<p>[!WARNING]</p>
<p>现在的比较先进的工艺都对方向有要求，不能一些mos水平一些mos垂直放置</p>
</blockquote>
<h3 id="9pex">9.寄生参数提取（PEX）<a class="headerlink" href="#9pex" title="Permanent link">&para;</a></h3>
<ol>
<li>
<p>找到<code>.pex</code>文件</p>
</li>
<li>
<p>导入</p>
</li>
</ol>
<p><img alt="image-20250905114529102" src="../assets/image-20250905114529102.png" /></p>
<ol>
<li>设置输出</li>
</ol>
<p><img alt="image-20250905114644234" src="../assets/image-20250905114644234.png" /></p>
<blockquote>
<p>[!NOTE]</p>
<p>spectre方式提取的网表进行后仿真，是使==用带有寄生参数的网表替换原理图网表==，按照原理图仿真方式进行仿真。</p>
<p>也可以使用<code>Calibreview</code>·</p>
<p>Spectre是仿真器仿真时读取的网表格式。</p>
<p>Calibreview会将产生的网表封装在一个schematic文件中，同时其后续选项中也可以选择生成对应的spectre网表。</p>
<p><a href="https://www.bilibili.com/opus/888360753381244962">模拟IC仿真验证：基于Cadence Virtuoso的电路寄生参数提取与后仿真 - 哔哩哔哩</a></p>
</blockquote>
<ol>
<li>其他设置</li>
</ol>
<p><img alt="image-20250905114915951" src="../assets/image-20250905114915951.png" /></p>
<p><img alt="image-20250905115052323" src="../assets/image-20250905115052323.png" /></p>
<p><img alt="image-20250905115329879" src="../assets/image-20250905115329879.png" /></p>
<p><img alt="image-20250905115350433" src="../assets/image-20250905115350433.png" /></p>
<p><img alt="image-20250905120625223" src="../assets/image-20250905120625223.png" /></p>
<p>config中修改模拟模块网表：</p>
<p><img alt="image-20250925224930287" src="../assets/image-20250925224930287.png" /></p>
<h3 id="10">10.后仿<a class="headerlink" href="#10" title="Permanent link">&para;</a></h3>
<ol>
<li>导入寄生提取后的网表</li>
</ol>
<p>需要建立tb对应的config文件，然后修改模块的view</p>
<p>这里以一个数模混合的config为例</p>
<p><img alt="image-20250905144614333" src="../assets/image-20250905144614333.png" /></p>
<p>只需要替换模拟模块顶层（这里是<code>DIV_INT_P5S4</code>）就行了，发现还有很多模拟模块的子模块也在表上显示了, 不过替换以后点击保存子模块就没了</p>
<p><img alt="image-20250905145350322" src="../assets/image-20250905145350322.png" /></p>
<ol>
<li>然后和前仿一样，进行仿真</li>
</ol>
<h3 id="_6">参考：<a class="headerlink" href="#_6" title="Permanent link">&para;</a></h3>
<ol>
<li><em>CMOS模拟集成电路全流程设计，李金城，机械工业出版社，第7章</em></li>
</ol>
<h2 id="_7">数字设计流程<a class="headerlink" href="#_7" title="Permanent link">&para;</a></h2>
<ul>
<li>以一个DSM模块为例</li>
<li>参考始终 24MHz</li>
<li>工具链：</li>
<li>use <code>VCS</code> and <code>Verdi</code> to font-end digtal chip design</li>
<li>use <code>design compiler</code> to synthesize <code>rtl</code> design to <code>netlist</code></li>
<li>use <code>innovus</code> to do placement and routing </li>
<li>use <code>starrc</code> to do RC parameter extraction</li>
<li>use <code>formality</code> to do logic equivalence checking</li>
<li>use <code>calibre</code> to do DRC/LVS/ERC sign-off</li>
<li>use <code>prime time</code> to do STA</li>
</ul>
<h3 id="_8">前端<a class="headerlink" href="#_8" title="Permanent link">&para;</a></h3>
<h4 id="0">0. 系统级仿真<a class="headerlink" href="#0" title="Permanent link">&para;</a></h4>
<p>大型项目要做，在类似<code>Matlab</code>的平台</p>
<h4 id="1-hdl">1. 写HDL<a class="headerlink" href="#1-hdl" title="Permanent link">&para;</a></h4>
<ul>
<li>现在貌似都是用的<code>verilog</code></li>
<li>注意根据系统需求优化逻辑面积时序，我是不太懂</li>
</ul>
<h4 id="2-testbench-vcsverdi">2. 写testbench, 用vcs编译仿真，用verdi看波形<a class="headerlink" href="#2-testbench-vcsverdi" title="Permanent link">&para;</a></h4>
<ul>
<li>可以用AI写，快。 可以直接用脚本来运行，简单的使用还是非常方便的</li>
<li>善用断言, 这样就不用人工去检查波形了，这也是AI的强项，不熟悉不太确定的还是最好人工看看波形</li>
<li>
<p>复杂项目要用<code>system verilog/system C</code> 或 <code>UVM</code>， 这只是一个简单示例，所以直接用<code>verilog</code>， 公司里面还要用VCS做检查==代码和功能覆盖率==</p>
</li>
<li>
<p>具体命令可以看<a href="# VCS">VCS</a>, <a href="# Verdi">Verdi</a></p>
</li>
<li>
<p>示例：</p>
</li>
<li>
<p>文件结构：</p>
<div class="highlight"><pre><span></span><code><span class="p">|</span>--<span class="w"> </span>outputs
<span class="p">|</span><span class="w">   </span><span class="p">|</span>--<span class="w"> </span>mydsm_eachinf.fsdb
<span class="p">|</span><span class="w">   </span><span class="p">|</span>--<span class="w"> </span>mydsm_eachinf.vcd
<span class="p">|</span><span class="w">   </span><span class="p">|</span>--<span class="w"> </span>mydsm_eachinf_sim
<span class="p">|</span><span class="w">   </span><span class="p">|</span>--<span class="w"> </span>mydsm_max.fsdb
<span class="p">|</span><span class="w">   </span><span class="p">|</span>--<span class="w"> </span>mydsm_max.vcd
<span class="p">|</span><span class="w">   </span><span class="p">|</span>--<span class="w"> </span>mydsm_max_sim
<span class="p">|</span><span class="w">   </span><span class="p">|</span>--<span class="w"> </span>mydsm_random.fsdb
<span class="p">|</span><span class="w">   </span><span class="p">|</span>--<span class="w"> </span>mydsm_random.vcd
<span class="p">|</span><span class="w">   </span><span class="sb">`</span>--<span class="w"> </span>mydsm_random_sim
<span class="p">|</span>--<span class="w"> </span>runspace<span class="w">    </span><span class="c1">#这里是VCS和Verdi的运行路径，每次编译仿真会在这里输出一些不常用的文件，让文件夹干净点就都放到这里了</span>
<span class="p">|</span>--<span class="w"> </span>scripts
<span class="p">|</span><span class="w">   </span><span class="p">|</span>--<span class="w"> </span>calculate_average.py
<span class="p">|</span><span class="w">   </span><span class="p">|</span>--<span class="w"> </span>clean.sh
<span class="p">|</span><span class="w">   </span><span class="p">|</span>--<span class="w"> </span>file.f
<span class="p">|</span><span class="w">   </span><span class="p">|</span>--<span class="w"> </span>sim.sh
<span class="p">|</span><span class="w">   </span><span class="sb">`</span>--<span class="w"> </span>sim4tb_hk_mash111.sh
<span class="p">|</span>--<span class="w"> </span>src
<span class="p">|</span><span class="w">   </span><span class="p">|</span>--<span class="w"> </span>dff.v
<span class="p">|</span><span class="w">   </span><span class="p">|</span>--<span class="w"> </span>hk_efm.v
<span class="p">|</span><span class="w">   </span><span class="p">|</span>--<span class="w"> </span>hk_mash111.v
<span class="p">|</span><span class="w">   </span><span class="p">|</span>--<span class="w"> </span>ifa.v
<span class="p">|</span><span class="w">   </span><span class="p">|</span>--<span class="w"> </span>mydsm.v
<span class="p">|</span><span class="w">   </span><span class="sb">`</span>--<span class="w"> </span>ncl.v
<span class="sb">`</span>--<span class="w"> </span>tb
<span class="w">    </span><span class="p">|</span>--<span class="w"> </span>mydsm_eachinf_tb.v
<span class="w">    </span><span class="p">|</span>--<span class="w"> </span>mydsm_max_tb.v
<span class="w">    </span><span class="p">|</span>--<span class="w"> </span>mydsm_min_tb.v
<span class="w">    </span><span class="p">|</span>--<span class="w"> </span>mydsm_random_tb.v
<span class="w">    </span><span class="sb">`</span>--<span class="w"> </span>tb_hk_mash111.v
</code></pre></div>
</li>
<li>
<p>AI promt</p>
<div class="highlight"><pre><span></span><code><span class="gh"># Digtal module</span>
<span class="k">-</span><span class="w"> </span>a DSM, its top design name is <span class="sb">`mydsm`</span>: mash 1-1-1 module + IFA(Integer and Frac Adapter)
<span class="w">    </span><span class="k">-</span><span class="w"> </span><span class="sb">`hk_mash111`</span> module: input fraction part and output 2&#39;s complement code [-3, 4]
<span class="w">    </span><span class="k">-</span><span class="w"> </span>IFA module: a adapter to combine integer and frac part

<span class="gu">## input and output</span>
<span class="k">-</span><span class="w"> </span>input
<span class="w">    </span><span class="k">-</span><span class="w"> </span>clk,
<span class="w">    </span><span class="k">-</span><span class="w"> </span>rst_n,           // Reset signal, low enable
<span class="w">    </span><span class="k">-</span><span class="w"> </span>in_i[7:0]: integer input
<span class="w">    </span><span class="k">-</span><span class="w"> </span>in_f[7:0]: fraction input
<span class="k">-</span><span class="w"> </span>output
<span class="w">    </span><span class="k">-</span><span class="w"> </span>out_p[4:0]: connect with programable divder P
<span class="w">    </span><span class="k">-</span><span class="w"> </span>out_s[3:0]: connect with programable divder S

<span class="gu">## rtl</span>

<span class="gu">### logic</span>
<span class="k">1.</span> <span class="sb">`in_f`</span> input to <span class="sb">`hk_mash111`</span>, it output a <span class="sb">`frac_value`</span> in range of [-3, 4]
<span class="k">2.</span> <span class="sb">`div_value = in_i + frac_value`</span> 
<span class="k">3.</span> <span class="sb">`div_value`</span> will be Be decomposed to two part: <span class="sb">`out_p[4:0]`</span> and <span class="sb">`out_s[3:0]`</span>, formulation is <span class="sb">`div_value = (out_p+2) * 8 + (out_s+2)`</span>. attention: <span class="sb">`3 &lt;= out_s &lt;=10 `</span>
<span class="k">4.</span> output <span class="sb">`out_p`</span> and <span class="sb">`out_s`</span>


<span class="gu">### testbench</span>
generate <span class="sb">`.fsdb`</span> files in testbench for waveform check
<span class="k">1.</span> testbench1: mydsm_min_tb.
<span class="w">    </span><span class="k">-</span><span class="w"> </span><span class="sb">`in_i`</span> = 0d83, <span class="sb">`in_f`</span> = 0, calculate the average <span class="sb">`div_value`</span> with 1000 times clock.
<span class="k">2.</span> testbench2: mydsm_max_tb.
<span class="w">    </span><span class="k">-</span><span class="w"> </span><span class="sb">`in_i`</span> = 0d255, <span class="sb">`in_f`</span> = 255, calculate the average <span class="sb">`div_value`</span> with 1000 times clock.
<span class="k">3.</span> testbench3: mydsm_random_tb.
<span class="w">    </span><span class="k">-</span><span class="w"> </span>set <span class="sb">`in_i`</span> and <span class="sb">`in_f`</span> randomly get seed, randomly selet <span class="sb">`in_i`</span> in range [83, 255], <span class="sb">`in_f`</span> in range [0, 255] for 5 times, calculate the average <span class="sb">`div_value`</span> with 1000 times clock for each case.
<span class="k">4.</span> testbench4: mydsm_eachinf_tb.
<span class="w">    </span><span class="k">-</span><span class="w"> </span>set <span class="sb">`in_i == 255`</span>, set <span class="sb">`in_f`</span> from 0 to 255, simulate 1000 times each case, calculate average <span class="sb">`div_value`</span> for these 256 cases, display result with a table 

<span class="gu">#### warning: </span>
<span class="k">-</span><span class="w"> </span>Each testbench must print out the input integer frequency division ratio and the fractional frequency division ratio!
<span class="k">-</span><span class="w"> </span>Detect through assertion whether the average frequency division ratio of the final output is within 0.5% error of the input frequency division ratio

<span class="gu">### sim file</span>
<span class="k">-</span><span class="w"> </span>file path: <span class="sb">`${WorkSpace}/digtal/front/scripts/sim.sh`</span>
<span class="k">-</span><span class="w"> </span>Some useful methods are defined in <span class="sb">`sim.sh`</span>
<span class="w">    </span><span class="k">-</span><span class="w"> </span>compile(cp):
<span class="w">        </span><span class="k">-</span><span class="w"> </span>compile one specify testbench
<span class="w">            </span><span class="k">-</span><span class="w"> </span>such as <span class="sb">`./sim.sh cp mydsm_min`</span> to compile <span class="sb">`${WorkSpace}/digtal/front/tb/mydsm_min_tb.v`</span>
<span class="w">        </span><span class="k">-</span><span class="w"> </span>compile all specify testbench
<span class="w">            </span><span class="k">-</span><span class="w"> </span>cmd: <span class="sb">`./sim.sh cp all`</span>
<span class="w">            </span><span class="k">-</span><span class="w"> </span>return which testbench compile successfully
<span class="w">    </span><span class="k">-</span><span class="w"> </span>run:
<span class="w">        </span><span class="k">-</span><span class="w"> </span>run one specify testbench
<span class="w">            </span><span class="k">-</span><span class="w"> </span>such as <span class="sb">`./sim.sh run mydsm_min`</span> to run <span class="sb">`${WorkSpace}/digtal/front/tb/mydsm_min_tb.v`</span>
<span class="w">    </span><span class="k">-</span><span class="w"> </span>plot:
<span class="w">        </span><span class="k">-</span><span class="w"> </span>plot one specify testbench
<span class="w">            </span><span class="k">-</span><span class="w"> </span>such as <span class="sb">`./sim.sh plot mydsm_min`</span> to plot <span class="sb">`${WorkSpace}/digtal/front/tb/mydsm_min_tb.v`</span>
<span class="w">    </span><span class="k">-</span><span class="w"> </span>clean:
<span class="w">        </span><span class="k">-</span><span class="w"> </span>clean all files in runspace and outputs folders.
</code></pre></div>
</li>
</ul>
<h4 id="3-fpga">3. FPGA上板验证<a class="headerlink" href="#3-fpga" title="Permanent link">&para;</a></h4>
<ul>
<li>最好做这一步，这次小项目没做</li>
</ul>
<h3 id="_9">综合<a class="headerlink" href="#_9" title="Permanent link">&para;</a></h3>
<ul>
<li>使用<code>DC</code>, 主要脚本：</li>
<li>constraint.sdc：约束文件</li>
<li>flow.tcl: dc 脚本</li>
</ul>
<blockquote>
<p>不同设计差别很大，这里就不总结了，我也不熟, <a href="# DC">详情</a></p>
</blockquote>
<ul>
<li>在pdk中选择合适的标准单元库</li>
<li>
<p>可以查看<a href="# SMIC">SMIC</a></p>
</li>
<li>
<p>示例代码</p>
</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="c">#flow.tcl</span>
<span class="c"># Set workspace path</span>
<span class="k">set</span><span class="w"> </span>WORKSPACE<span class="w"> </span><span class="s2">&quot;/SM05/home/phd2024/phd202411094979/project/cpicp25&quot;</span>
<span class="k">set</span><span class="w"> </span>SYN_PATH<span class="w"> </span><span class="s2">&quot;$WORKSPACE/digtal/syn&quot;</span>
<span class="k">set</span><span class="w"> </span>SRC_PATH<span class="w"> </span><span class="s2">&quot;$WORKSPACE/digtal/front/src&quot;</span>
<span class="k">set</span><span class="w"> </span>PDK_PATH<span class="w"> </span><span class="s2">&quot;$WORKSPACE/pdk&quot;</span>
<span class="k">set</span><span class="w"> </span>STD_CELL_PATH<span class="w"> </span><span class="s2">&quot;$PDK_PATH/STDCELL/SCC28NHKCP_HDC30P140_RVT_V0p2&quot;</span>
<span class="c"># set STD_CELL_PATH &quot;$PDK_PATH/STDCELL/SCC28NHKCP_12T25OD33_RVT_V0p2&quot;</span>

<span class="c"># Set top design name</span>
<span class="k">set</span><span class="w"> </span>DESIGN_NAME<span class="w"> </span><span class="s2">&quot;mydsm&quot;</span>

<span class="c"># Create output directories if they don&#39;t exist</span>
<span class="nb">file</span><span class="w"> </span>mkdir<span class="w"> </span><span class="nv">$SYN_PATH</span><span class="o">/</span>reports
<span class="nb">file</span><span class="w"> </span>mkdir<span class="w"> </span><span class="nv">$SYN_PATH</span><span class="o">/</span>outputs

<span class="nb">puts</span><span class="w"> </span><span class="s2">&quot;==============================================&quot;</span>
<span class="nb">puts</span><span class="w"> </span><span class="s2">&quot;         Starting Synthesis Flow              &quot;</span>
<span class="nb">puts</span><span class="w"> </span><span class="s2">&quot;==============================================&quot;</span>
<span class="nb">puts</span><span class="w"> </span><span class="s2">&quot;Workspace: $WORKSPACE&quot;</span>
<span class="nb">puts</span><span class="w"> </span><span class="s2">&quot;Design   : $DESIGN_NAME&quot;</span>
<span class="nb">puts</span><span class="w"> </span><span class="s2">&quot;==============================================&quot;</span>

<span class="c">#=========================================================</span>
<span class="c"># Setup Libraries</span>
<span class="c">#=========================================================</span>
<span class="nb">puts</span><span class="w"> </span><span class="s2">&quot;Setting up libraries...&quot;</span>

<span class="k">set</span><span class="w"> </span>LIB_SS_ECSM<span class="w"> </span><span class="s2">&quot;$STD_CELL_PATH/liberty/0.9v/scc28nhkcp_hdc30p140_rvt_ss_v0p81_125c_ecsm.db&quot;</span>
<span class="k">set</span><span class="w"> </span>LIB_TT_ECSM<span class="w"> </span><span class="s2">&quot;$STD_CELL_PATH/liberty/0.9v/scc28nhkcp_hdc30p140_rvt_tt_v0p9_25c_ecsm.db&quot;</span>
<span class="k">set</span><span class="w"> </span>LIB_FF_ECSM<span class="w"> </span><span class="s2">&quot;$STD_CELL_PATH/liberty/0.9v/scc28nhkcp_hdc30p140_rvt_ff_v0p99_-40c_ecsm.db&quot;</span>


<span class="c"># Set target library - use worst case for synthesis</span>
<span class="k">set</span><span class="w"> </span>target_library<span class="w"> </span><span class="nv">$LIB_SS_ECSM</span>
<span class="k">set</span><span class="w"> </span>link_library<span class="w"> </span><span class="s2">&quot;* $LIB_SS_ECSM $LIB_TT_ECSM $LIB_FF_ECSM&quot;</span>

<span class="c"># Set synthetic library</span>
<span class="k">set</span><span class="w"> </span>synthetic_library<span class="w"> </span><span class="k">{}</span>
<span class="k">set</span><span class="w"> </span>synlib_list<span class="w"> </span><span class="s2">&quot;&quot;</span>
<span class="k">set</span><span class="w"> </span>symbol_library<span class="w"> </span><span class="k">{}</span>

<span class="c"># Set search path</span>
<span class="k">set</span><span class="w"> </span>search_path<span class="w"> </span><span class="k">[</span><span class="nb">list</span><span class="w"> </span>.<span class="w"> </span><span class="nv">$SRC_PATH</span><span class="w"> </span><span class="nv">$STD_CELL_PATH</span><span class="o">/</span>verilog<span class="k">]</span>

<span class="c">#=========================================================</span>
<span class="c"># Setup for Formality verification  </span>
<span class="c">#=========================================================</span>
<span class="nb">puts</span><span class="w"> </span><span class="s2">&quot;Setting up SVF for Formality verification...&quot;</span>

<span class="c"># SVF should always be written to allow Formality verification for advanced optimizations.</span>
<span class="c"># Once set_svf is issued, DC will begin recording all relevant operations.</span>
<span class="nv">set_svf</span><span class="w"> </span><span class="nv">$SYN_PATH</span><span class="o">/</span>outputs<span class="o">/</span><span class="nv">${DESIGN_NAME}</span>_syn.svf

<span class="c">#=========================================================</span>
<span class="c"># Read Design</span>
<span class="c">#=========================================================</span>
<span class="nb">puts</span><span class="w"> </span><span class="s2">&quot;Reading RTL design...&quot;</span>

<span class="c"># Define source files - can be expanded based on actual design files</span>
<span class="k">set</span><span class="w"> </span>RTL_FILES<span class="w"> </span><span class="k">[</span><span class="nb">list</span><span class="w"> </span><span class="nv">$SRC_PATH</span><span class="o">/</span>mydsm.v<span class="w"> </span><span class="nv">$SRC_PATH</span><span class="o">/</span>ifa.v<span class="w"> </span><span class="nv">$SRC_PATH</span><span class="o">/</span>mash111.v<span class="k">]</span>

<span class="c"># Read RTL files</span>
<span class="nv">analyze</span><span class="w"> </span><span class="o">-</span>format<span class="w"> </span>verilog<span class="w"> </span><span class="nv">$RTL_FILES</span>
<span class="nv">elaborate</span><span class="w"> </span><span class="nv">$DESIGN_NAME</span>

<span class="c"># Link design</span>
<span class="nv">current_design</span><span class="w"> </span><span class="nv">$DESIGN_NAME</span>
<span class="nv">link</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nv">$SYN_PATH</span><span class="o">/</span>reports<span class="o">/</span>link.rpt

<span class="c"># Check design</span>
<span class="nv">check_design</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nv">$SYN_PATH</span><span class="o">/</span>reports<span class="o">/</span>check_design.rpt

<span class="c">#=========================================================</span>
<span class="c"># Apply Constraints</span>
<span class="c">#=========================================================</span>
<span class="nb">puts</span><span class="w"> </span><span class="s2">&quot;Applying constraints...&quot;</span>

<span class="c"># Source constraint file</span>
<span class="nb">source</span><span class="w"> </span><span class="nv">$SYN_PATH</span><span class="o">/</span>scripts<span class="o">/</span>constraint_<span class="nv">${DESIGN_NAME}</span>.sdc

<span class="c">#=========================================================</span>
<span class="c"># Set Optimization Options</span>
<span class="c">#=========================================================</span>
<span class="nb">puts</span><span class="w"> </span><span class="s2">&quot;Setting optimization options...&quot;</span>

<span class="nv">set_wire_load_mode</span><span class="w"> </span><span class="s2">&quot;top&quot;</span>
<span class="nv">set_fix_multiple_port_nets</span><span class="w"> </span><span class="o">-</span>all<span class="w"> </span><span class="o">-</span>buffer_constants
<span class="c"># set_fix_hold</span>
<span class="c"># set_fix_hold [get_clocks clk]</span>

<span class="c"># Compile with ultra optimization</span>
<span class="c"># compile_ultra -timing_high_effort -no_autoungroup -incremental</span>
<span class="c"># compile_ultra -only_hold_time</span>

<span class="c"># three steps optimization</span>
<span class="nv">compile_ultra</span><span class="w"> </span><span class="o">-</span>timing_high_effort<span class="w"> </span><span class="o">-</span>no_autoungroup
<span class="nv">compile_ultra</span><span class="w"> </span><span class="o">-</span>timing_high_effort<span class="w"> </span><span class="o">-</span>incremental
<span class="nv">compile_ultra</span><span class="w"> </span><span class="o">-</span>only_hold_time<span class="w"> </span><span class="o">-</span>incremental

<span class="c">#=========================================================</span>
<span class="c"># Generate Reports</span>
<span class="c">#=========================================================</span>
<span class="c"># Timing reports for different corners</span>
<span class="nv">report_timing</span><span class="w"> </span><span class="o">-</span>path<span class="w"> </span>full<span class="w"> </span><span class="o">-</span>delay<span class="w"> </span>max<span class="w"> </span><span class="o">-</span>max_paths<span class="w"> </span><span class="mi">40</span><span class="w"> </span><span class="o">-</span>nworst<span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nv">$SYN_PATH</span><span class="o">/</span>reports<span class="o">/</span>timing_ss_max.rpt
<span class="nv">report_timing</span><span class="w"> </span><span class="o">-</span>path<span class="w"> </span>full<span class="w"> </span><span class="o">-</span>delay<span class="w"> </span>min<span class="w"> </span><span class="o">-</span>max_paths<span class="w"> </span><span class="mi">40</span><span class="w"> </span><span class="o">-</span>nworst<span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nv">$SYN_PATH</span><span class="o">/</span>reports<span class="o">/</span>timing_ss_min.rpt
<span class="nv">report_timing</span><span class="w"> </span><span class="o">-</span>path<span class="w"> </span>full<span class="w"> </span><span class="o">-</span>delay<span class="w"> </span>max<span class="w"> </span><span class="o">-</span>max_paths<span class="w"> </span><span class="mi">40</span><span class="w"> </span><span class="o">-</span>nworst<span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nv">$SYN_PATH</span><span class="o">/</span>reports<span class="o">/</span>timing_tt_max.rpt
<span class="nv">report_timing</span><span class="w"> </span><span class="o">-</span>path<span class="w"> </span>full<span class="w"> </span><span class="o">-</span>delay<span class="w"> </span>min<span class="w"> </span><span class="o">-</span>max_paths<span class="w"> </span><span class="mi">40</span><span class="w"> </span><span class="o">-</span>nworst<span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nv">$SYN_PATH</span><span class="o">/</span>reports<span class="o">/</span>timing_tt_min.rpt
<span class="nv">report_timing</span><span class="w"> </span><span class="o">-</span>path<span class="w"> </span>full<span class="w"> </span><span class="o">-</span>delay<span class="w"> </span>max<span class="w"> </span><span class="o">-</span>max_paths<span class="w"> </span><span class="mi">40</span><span class="w"> </span><span class="o">-</span>nworst<span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nv">$SYN_PATH</span><span class="o">/</span>reports<span class="o">/</span>timing_ff_max.rpt
<span class="nv">report_timing</span><span class="w"> </span><span class="o">-</span>path<span class="w"> </span>full<span class="w"> </span><span class="o">-</span>delay<span class="w"> </span>min<span class="w"> </span><span class="o">-</span>max_paths<span class="w"> </span><span class="mi">40</span><span class="w"> </span><span class="o">-</span>nworst<span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nv">$SYN_PATH</span><span class="o">/</span>reports<span class="o">/</span>timing_ff_min.rpt

<span class="c"># Other reports</span>
<span class="nv">report_reference</span><span class="w"> </span><span class="o">-</span>hierarchy<span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nv">$SYN_PATH</span><span class="o">/</span>reports<span class="o">/</span>reference_hierarchy.rpt
<span class="nv">report_resources</span><span class="w"> </span><span class="o">-</span>hierarchy<span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nv">$SYN_PATH</span><span class="o">/</span>reports<span class="o">/</span>resources_hierarchy.rpt
<span class="nv">report_design</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nv">$SYN_PATH</span><span class="o">/</span>reports<span class="o">/</span>design.rpt
<span class="nv">report_compile_options</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nv">$SYN_PATH</span><span class="o">/</span>reports<span class="o">/</span>compile_options.rpt
<span class="nv">report_area</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nv">$SYN_PATH</span><span class="o">/</span>reports<span class="o">/</span>area.rpt
<span class="nv">report_power</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nv">$SYN_PATH</span><span class="o">/</span>reports<span class="o">/</span>power.rpt
<span class="nv">report_qor</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nv">$SYN_PATH</span><span class="o">/</span>reports<span class="o">/</span>qor.rpt
<span class="nv">report_resources</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nv">$SYN_PATH</span><span class="o">/</span>reports<span class="o">/</span>resources.rpt
<span class="nv">report_constraint</span><span class="w"> </span><span class="o">-</span>all_violators<span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nv">$SYN_PATH</span><span class="o">/</span>reports<span class="o">/</span>constraints.rpt
<span class="nv">report_hierarchy</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nv">$SYN_PATH</span><span class="o">/</span>reports<span class="o">/</span>hierarchy.rpt
<span class="nv">report_reference</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nv">$SYN_PATH</span><span class="o">/</span>reports<span class="o">/</span>reference.rpt
<span class="nv">report_clock_gating</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nv">$SYN_PATH</span><span class="o">/</span>reports<span class="o">/</span>clock_gating.rpt

<span class="c">#=========================================================</span>
<span class="c"># Write and close SVF file and make it available for immediate use</span>
<span class="c">#=========================================================</span>
<span class="nv">set_svf</span><span class="w"> </span><span class="o">-</span>off

<span class="c">#=========================================================</span>
<span class="c"># Generate Output Files</span>
<span class="c">#=========================================================</span>
<span class="nb">puts</span><span class="w"> </span><span class="s2">&quot;Generating output files...&quot;</span>

<span class="c"># Write netlist</span>
<span class="nv">write</span><span class="w"> </span><span class="o">-</span>format<span class="w"> </span>verilog<span class="w"> </span><span class="o">-</span>hierarchy<span class="w"> </span><span class="o">-</span>output<span class="w"> </span><span class="nv">$SYN_PATH</span><span class="o">/</span>outputs<span class="o">/</span><span class="nv">${DESIGN_NAME}</span>_syn.v

<span class="c"># Write constraints for P&amp;R</span>
<span class="nv">write_sdc</span><span class="w"> </span><span class="nv">$SYN_PATH</span><span class="o">/</span>outputs<span class="o">/</span><span class="nv">${DESIGN_NAME}</span>_syn.sdc

<span class="c"># Write parasitics</span>
<span class="nv">write_parasitics</span><span class="w"> </span><span class="o">-</span>output<span class="w"> </span><span class="nv">$SYN_PATH</span><span class="o">/</span>outputs<span class="o">/</span><span class="nv">${DESIGN_NAME}</span>_syn.spef

<span class="c"># Write SDF for gate-level simulation</span>
<span class="nv">write_sdf</span><span class="w"> </span><span class="nv">$SYN_PATH</span><span class="o">/</span>outputs<span class="o">/</span><span class="nv">${DESIGN_NAME}</span>_syn.sdf

<span class="c"># Write DDC for Design Vision</span>
<span class="nv">write</span><span class="w"> </span><span class="o">-</span>format<span class="w"> </span>ddc<span class="w"> </span><span class="o">-</span>hierarchy<span class="w"> </span><span class="o">-</span>output<span class="w"> </span><span class="nv">$SYN_PATH</span><span class="o">/</span>outputs<span class="o">/</span><span class="nv">${DESIGN_NAME}</span>_syn.ddc

<span class="c"># Save UPF file</span>
<span class="nv">save_upf</span><span class="w"> </span><span class="nv">$SYN_PATH</span><span class="o">/</span>outputs<span class="o">/</span><span class="nv">${DESIGN_NAME}</span>_syn.upf



<span class="nb">puts</span><span class="w"> </span><span class="s2">&quot;==============================================&quot;</span>
<span class="nb">puts</span><span class="w"> </span><span class="s2">&quot;         Synthesis Flow Completed             &quot;</span>
<span class="nb">puts</span><span class="w"> </span><span class="s2">&quot;==============================================&quot;</span>
<span class="nb">exit</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c"># constraint.sdc</span>
<span class="c">###############################################################</span>
<span class="c"># Author: pxmmmm</span>
<span class="c"># Date: 2025-09-02</span>
<span class="c"># Description: Constraint file for mydsm design</span>
<span class="c"># Version: 1.0</span>
<span class="c">###############################################################</span>

<span class="c"># Clock definition</span>
<span class="c"># 设置时钟名称</span>
<span class="k">set</span><span class="w"> </span>CLOCK_NAME<span class="w"> </span><span class="s2">&quot;clk&quot;</span>
<span class="c"># v</span>
<span class="k">set</span><span class="w"> </span>CLOCK_PERIOD<span class="w"> </span><span class="k">[expr</span><span class="w"> </span><span class="mf">1.0</span><span class="o">/</span><span class="mf">200.0</span><span class="o">*</span><span class="mi">1000</span><span class="k">]</span>
<span class="c"># 10% of period</span>
<span class="k">set</span><span class="w"> </span>CLOCK_UNCERTAINTY<span class="w"> </span><span class="k">[expr</span><span class="w"> </span><span class="nv">$CLOCK_PERIOD</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">0.1</span><span class="k">]</span>
<span class="c"># 3% of period</span>
<span class="k">set</span><span class="w"> </span>CLOCK_TRANSITION<span class="w"> </span><span class="k">[expr</span><span class="w"> </span><span class="nv">$CLOCK_PERIOD</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">0.03</span><span class="k">]</span>

<span class="c"># Create clock</span>
<span class="nv">create_clock</span><span class="w"> </span><span class="o">-</span>name<span class="w"> </span><span class="nv">$CLOCK_NAME</span><span class="w"> </span><span class="o">-</span>period<span class="w"> </span><span class="nv">$CLOCK_PERIOD</span><span class="w"> </span><span class="k">[</span><span class="nv">get_ports</span><span class="w"> </span>clk<span class="k">]</span>
<span class="nv">set_clock_uncertainty</span><span class="w"> </span><span class="nv">$CLOCK_UNCERTAINTY</span><span class="w"> </span><span class="k">[</span><span class="nv">get_clocks</span><span class="w"> </span><span class="nv">$CLOCK_NAME</span><span class="k">]</span>
<span class="c"># Add separate setup/hold uncertainty</span>
<span class="nv">set_clock_uncertainty</span><span class="w"> </span><span class="o">-</span>setup<span class="w"> </span><span class="k">[expr</span><span class="w"> </span><span class="nv">$CLOCK_UNCERTAINTY</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">0.7</span><span class="k">]</span><span class="w"> </span><span class="k">[</span><span class="nv">get_clocks</span><span class="w"> </span><span class="nv">$CLOCK_NAME</span><span class="k">]</span>
<span class="nv">set_clock_uncertainty</span><span class="w"> </span><span class="o">-</span>hold<span class="w"> </span><span class="k">[expr</span><span class="w"> </span><span class="nv">$CLOCK_UNCERTAINTY</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">0.2</span><span class="k">]</span><span class="w"> </span><span class="k">[</span><span class="nv">get_clocks</span><span class="w"> </span><span class="nv">$CLOCK_NAME</span><span class="k">]</span>
<span class="nv">set_clock_transition</span><span class="w"> </span><span class="nv">$CLOCK_TRANSITION</span><span class="w"> </span><span class="k">[</span><span class="nv">get_clocks</span><span class="w"> </span><span class="nv">$CLOCK_NAME</span><span class="k">]</span>

<span class="c"># Set don&#39;t touch network for clock and reset</span>
<span class="c"># set_dont_touch_network [get_ports clk]</span>
<span class="c"># set_dont_touch_network [get_ports rst_n]</span>

<span class="c"># Input and output delay constraints</span>
<span class="k">set</span><span class="w"> </span>INPUT_DELAY_MAX<span class="w"> </span><span class="k">[expr</span><span class="w"> </span><span class="nv">$CLOCK_PERIOD</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">0.5</span><span class="k">]</span>
<span class="k">set</span><span class="w"> </span>INPUT_DELAY_MIN<span class="w"> </span><span class="k">[expr</span><span class="w"> </span><span class="nv">$CLOCK_PERIOD</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">0.15</span><span class="k">]</span>
<span class="k">set</span><span class="w"> </span>OUTPUT_DELAY_MAX<span class="w"> </span><span class="k">[expr</span><span class="w"> </span><span class="nv">$CLOCK_PERIOD</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">0.5</span><span class="k">]</span>
<span class="k">set</span><span class="w"> </span>OUTPUT_DELAY_MIN<span class="w"> </span><span class="k">[expr</span><span class="w"> </span><span class="nv">$CLOCK_PERIOD</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">0.15</span><span class="k">]</span>

<span class="c"># Set input delays</span>
<span class="nv">set_input_delay</span><span class="w"> </span><span class="o">-</span>clock<span class="w"> </span><span class="nv">$CLOCK_NAME</span><span class="w"> </span><span class="o">-</span>max<span class="w"> </span><span class="nv">$INPUT_DELAY_MAX</span><span class="w"> </span><span class="k">[</span><span class="nv">get_ports</span><span class="w"> </span><span class="k">{</span><span class="nv">in_i</span><span class="k">[</span><span class="o">*</span><span class="k">]</span><span class="w"> </span>in_f<span class="k">[</span><span class="o">*</span><span class="k">]</span><span class="w"> </span>rst_n<span class="k">}]</span>
<span class="nv">set_input_delay</span><span class="w"> </span><span class="o">-</span>clock<span class="w"> </span><span class="nv">$CLOCK_NAME</span><span class="w"> </span><span class="o">-</span>min<span class="w"> </span><span class="nv">$INPUT_DELAY_MIN</span><span class="w"> </span><span class="k">[</span><span class="nv">get_ports</span><span class="w"> </span><span class="k">{</span><span class="nv">in_i</span><span class="k">[</span><span class="o">*</span><span class="k">]</span><span class="w"> </span>in_f<span class="k">[</span><span class="o">*</span><span class="k">]</span><span class="w"> </span>rst_n<span class="k">}]</span>

<span class="c"># Set output delays</span>
<span class="nv">set_output_delay</span><span class="w"> </span><span class="o">-</span>clock<span class="w"> </span><span class="nv">$CLOCK_NAME</span><span class="w"> </span><span class="o">-</span>max<span class="w"> </span><span class="nv">$OUTPUT_DELAY_MAX</span><span class="w"> </span><span class="k">[</span><span class="nv">get_ports</span><span class="w"> </span><span class="k">{</span><span class="nv">out_p</span><span class="k">[</span><span class="o">*</span><span class="k">]</span><span class="w"> </span>out_s<span class="k">[</span><span class="o">*</span><span class="k">]}]</span>
<span class="nv">set_output_delay</span><span class="w"> </span><span class="o">-</span>clock<span class="w"> </span><span class="nv">$CLOCK_NAME</span><span class="w"> </span><span class="o">-</span>min<span class="w"> </span><span class="nv">$OUTPUT_DELAY_MIN</span><span class="w"> </span><span class="k">[</span><span class="nv">get_ports</span><span class="w"> </span><span class="k">{</span><span class="nv">out_p</span><span class="k">[</span><span class="o">*</span><span class="k">]</span><span class="w"> </span>out_s<span class="k">[</span><span class="o">*</span><span class="k">]}]</span>

<span class="c"># Set ideal network for clock and reset</span>
<span class="c"># set_ideal_network [get_ports clk]</span>
<span class="c"># set_ideal_network [get_ports rst_n]</span>

<span class="c"># Set max fanout</span>
<span class="nv">set_max_fanout</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="k">[</span><span class="nv">current_design</span><span class="k">]</span>

<span class="c"># Set driving cell for all inputs except clock and reset</span>
<span class="c"># Use a buffer found in the actual library</span>
<span class="nv">set_driving_cell</span><span class="w"> </span><span class="o">-</span>lib_cell<span class="w"> </span>BUFV2_140P7T30R<span class="w"> </span><span class="k">[</span><span class="nv">remove_from_collection</span><span class="w"> </span><span class="k">[</span><span class="nv">all_inputs</span><span class="k">]</span><span class="w"> </span><span class="k">[</span><span class="nv">get_ports</span><span class="w"> </span><span class="k">{</span><span class="nv">clk</span><span class="w"> </span>rst_n<span class="k">}]]</span>

<span class="c"># Set load for all outputs</span>
<span class="c"># # 基于 BUFV2_140P7T30R 的输入电容使用来自PDK的一个实际引脚电容值 0.00077238pF </span>
<span class="nv">set_load</span><span class="w"> </span><span class="o">-</span>pin_load<span class="w"> </span><span class="mf">0.001</span><span class="w"> </span><span class="k">[</span><span class="nv">all_outputs</span><span class="k">]</span><span class="w"> </span>
<span class="err">#</span><span class="w"> </span>Set<span class="w"> </span>max<span class="w"> </span>area<span class="w"> </span>constraint
<span class="c"># set_max_area 0</span>

<span class="c"># # Set operating conditions</span>
<span class="c"># set_operating_conditions -min_library &quot;scc28nhkcp_hdc30p140_rvt_ff_v0p99_-40c_ecsm&quot; -min &quot;ff_v0p99_-40c&quot; \</span>
<span class="c">#                          -max_library &quot;scc28nhkcp_hdc30p140_rvt_ss_v0p81_125c_ecsm&quot; -max &quot;ss_v0p81_125c&quot;</span>

<span class="c"># Set wire load model - use default since ZeroWireload wasn&#39;t found</span>
<span class="c"># set_wire_load_mode &quot;top&quot;</span>
</code></pre></div>
<ul>
<li>关于IO。在<code>innovus</code>中可以加入IO，但是需要在综合的时候加入对应的IO库和网表</li>
</ul>
<p>示例</p>
<p><img alt="image-20250917091352648" src="../assets/image-20250917091352648.png" /></p>
<p><img alt="image-20250917091408133" src="../assets/image-20250917091408133.png" /></p>
<ul>
<li>
<p>Tips:</p>
</li>
<li>
<p>综合阶段或者Place阶段遇到setup timing不满足时，我们可以通过插入pipeline的方式修改RTL来解决setup violation，但是hold timing vioation往往CTS后才能发现且只能通过后端修复。所以如果有hold time, 在综合阶段是很难修的。</p>
</li>
<li>
<p>一般做完综合之后要做一次网表等价性验证，<a href="# Formality">实例代码</a></p>
</li>
<li>
<blockquote>
<p>hjf师兄在紫光就是做这个</p>
</blockquote>
</li>
</ul>
<h3 id="_10">后端<a class="headerlink" href="#_10" title="Permanent link">&para;</a></h3>
<p>书籍推荐：CMOS集成电路后端设计与实战 (刘峰, 2015)</p>
<p><a href="https://www.cnblogs.com/li2000/p/18269818/IC-digital-Innovus-tcl">用脚本进行Innovus设计 - 白发戴花君莫笑 - 博客园</a></p>
<ol>
<li>生成模板</li>
</ol>
<p><code>writeFlowTemplate -directory &lt;输出目录路径&gt;</code></p>
<blockquote>
<p>可以基于这个来做</p>
<p>但是他给的也不能直接跑，缺了文件，不知道为什么</p>
<p>我感觉这个<code>template</code>还是太臃肿了，还是自己写吧0.0</p>
<p>注意学校服务器目前(2025/06) 默认用的innovus 15, 其实可以改成innovus 19: <code>alias innovus="/SM01/eda/cadence/INNOVUS191/bin/innovus"</code></p>
</blockquote>
<ol>
<li>
<p>准备整体输入文件：</p>
</li>
<li>
<p>综合网表</p>
</li>
<li>
<p>约束sdc文件</p>
</li>
<li>
<p>tech lef, STD lef, ANT lef, .lib(时序功耗)</p>
</li>
<li>
<p>qrcTechfile&amp;capTable</p>
<ul>
<li>可以通过<code>.ict</code>文件生成，<a href="# ITF, ICT">详情</a></li>
<li>之前做SMIC 28的时候有一些不同金属层设置的pdk安装后没对应的<code>.ict</code>文件.要和foundary的代理要</li>
</ul>
</li>
<li>
<p>innovus 脚本</p>
<ul>
<li>
<p>flow.tcl （自己写，可以模仿<code>template</code>写，但是感觉<code>template</code>太琐碎了，适合公司，不适合个人）</p>
</li>
<li>
<p>mmmc.tcl（这个要自己写，各种corner）</p>
</li>
<li>
<p>贴两个相关的示例脚本</p>
</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="c">###############################################################</span>
<span class="c"># Author: Pxmmmm</span>
<span class="c"># Description: Innovus flow for mydsm</span>
<span class="c"># Version: 1.5</span>
<span class="c"># Date: 2025-06-05</span>
<span class="c"># Usage: innovus -init flow.tcl</span>
<span class="c">###############################################################</span>

<span class="c"># freeDesign</span>

<span class="c"># Set basic environment variables</span>
<span class="k">set</span><span class="w"> </span>WORKSPACE<span class="w"> </span><span class="s2">&quot;/SM05/home/phd2024/phd202411094979/project/cpicp25&quot;</span>
<span class="k">set</span><span class="w"> </span>DESIGN<span class="w"> </span><span class="s2">&quot;mydsm&quot;</span>
<span class="c"># set DESIGN &quot;lock_det&quot;</span>
<span class="k">set</span><span class="w"> </span>PDK_DIR<span class="w"> </span><span class="s2">&quot;$WORKSPACE/pdk&quot;</span>
<span class="k">set</span><span class="w"> </span>NETLIST<span class="w"> </span><span class="s2">&quot;$WORKSPACE/digtal/syn/outputs/${DESIGN}_syn.v&quot;</span>
<span class="k">set</span><span class="w"> </span>OUTPUTS<span class="w"> </span><span class="s2">&quot;$WORKSPACE/digtal/back/outputs&quot;</span>
<span class="k">set</span><span class="w"> </span>REPORTS<span class="w"> </span><span class="s2">&quot;$WORKSPACE/digtal/back/reports&quot;</span>
<span class="k">set</span><span class="w"> </span>DBS_DIR<span class="w"> </span><span class="s2">&quot;$WORKSPACE/digtal/back/DBS&quot;</span>

<span class="c"># # Create output directories</span>
<span class="c"># file mkdir $OUTPUTS</span>
<span class="c"># file mkdir $REPORTS</span>
<span class="c"># file mkdir $DBS_DIR</span>

<span class="c"># Set multi-CPU usage</span>
<span class="nv">setMultiCpuUsage</span><span class="w"> </span><span class="o">-</span>localCpu<span class="w"> </span><span class="mi">8</span><span class="w"> </span><span class="o">-</span>verbose

<span class="c"># Set design parameters</span>
<span class="k">set</span><span class="w"> </span>init_verilog<span class="w"> </span><span class="nv">$NETLIST</span>
<span class="k">set</span><span class="w"> </span>init_top_cell<span class="w"> </span><span class="nv">$DESIGN</span>

<span class="c"># Set LEF files</span>
<span class="k">set</span><span class="w"> </span>TECH_LEF_PATH<span class="w"> </span><span class="s2">&quot;$PDK_DIR/SCC28NHKCP_TF_V0p2/innovus/hd/tf_mtt&quot;</span>
<span class="k">set</span><span class="w"> </span>TECH_LEF_FILE<span class="w"> </span><span class="s2">&quot;$TECH_LEF_PATH/scc28n_1p9m_7ic_1tmc_1mttc_alpa2.lef&quot;</span>
<span class="k">set</span><span class="w"> </span>STDCELL_LEF_PATH<span class="w"> </span><span class="s2">&quot;$PDK_DIR/STDCELL/SCC28NHKCP_HDC30P140_RVT_V0p2/lef/macro&quot;</span>
<span class="k">set</span><span class="w"> </span>STDCELL_LEF_FILE<span class="w"> </span><span class="s2">&quot;$STDCELL_LEF_PATH/scc28nhkcp_hdc30p140_rvt.lef&quot;</span>
<span class="k">set</span><span class="w"> </span>ANTENNA_LEF_FILE<span class="w"> </span><span class="s2">&quot;$STDCELL_LEF_PATH/scc28nhkcp_hdc30p140_rvt_ant.lef&quot;</span>
<span class="c"># set init_lef_file &quot;$TECH_LEF_FILE $ANTENNA_LEF_FILE&quot;</span>
<span class="k">set</span><span class="w"> </span>init_lef_file<span class="w"> </span><span class="s2">&quot;$TECH_LEF_FILE $STDCELL_LEF_FILE $ANTENNA_LEF_FILE&quot;</span>

<span class="c"># Initialize design setup</span>
<span class="k">set</span><span class="w"> </span>init_mmmc_file<span class="w"> </span><span class="s2">&quot;$WORKSPACE/digtal/back/scripts/mmmc.tcl&quot;</span>
<span class="k">set</span><span class="w"> </span>init_pwr_net<span class="w"> </span><span class="s2">&quot;VDD&quot;</span>
<span class="k">set</span><span class="w"> </span>init_gnd_net<span class="w"> </span><span class="s2">&quot;VSS&quot;</span>
<span class="k">set</span><span class="w"> </span>init_design_settop<span class="w"> </span><span class="mi">1</span>

<span class="nb">puts</span><span class="w"> </span><span class="s2">&quot;\n==============================================&quot;</span>
<span class="nb">puts</span><span class="w"> </span><span class="s2">&quot;Starting Innovus flow for design: $DESIGN&quot;</span>
<span class="nb">puts</span><span class="w"> </span><span class="s2">&quot;==============================================&quot;</span>

<span class="c"># Initialize design</span>
<span class="nv">setDesignMode</span><span class="w"> </span><span class="o">-</span>process<span class="w"> </span><span class="mi">28</span>

<span class="c"># pre_init</span>
<span class="nv">setImportMode</span><span class="w"> </span><span class="o">-</span>bufferTieAssign<span class="w"> </span>true

<span class="nv">init_design</span>

<span class="c"># checkDesign -all -noHtml -outfile $REPORTS/check_design.rpt</span>
<span class="c"># check_timing</span>
<span class="c"># check_timing &gt; $REPORTS/check_timing.rpt</span>
<span class="c"># report_metric -file $REPORTS/metrics.html -format html</span>
<span class="nv">saveNetlist</span><span class="w"> </span><span class="nv">$OUTPUTS</span><span class="o">/</span><span class="nv">${DESIGN}</span>_init.v

<span class="c">###########################################</span>
<span class="c"># 1. Global Settings and Analysis Modes</span>
<span class="c">###########################################</span>

<span class="c"># Set global optimization parameters</span>
<span class="nv">setOptMode</span><span class="w"> </span><span class="o">-</span>effort<span class="w"> </span>high
<span class="nv">setOptMode</span><span class="w"> </span><span class="o">-</span>fixCap<span class="w"> </span>true
<span class="nv">setOptMode</span><span class="w"> </span><span class="o">-</span>fixTran<span class="w"> </span>true
<span class="nv">setOptMode</span><span class="w"> </span><span class="o">-</span>fixFanoutLoad<span class="w"> </span>true
<span class="nv">setOptMode</span><span class="w"> </span><span class="o">-</span>holdFixingCells<span class="w"> </span><span class="k">{</span><span class="nv">CLKBUFV10_140P7T30R</span><span class="w"> </span>CLKBUFV12_140P7T30R<span class="w"> </span>CLKBUFV16_140P7T30R<span class="w"> </span>CLKBUFV20_140P7T30R<span class="w"> </span>CLKBUFV24_140P7T30R<span class="w"> </span>CLKBUFV2_140P7T30R<span class="w"> </span>CLKBUFV32_140P7T30R<span class="w"> </span>CLKBUFV3_140P7T30R<span class="w"> </span>CLKBUFV40_140P7T30R<span class="w"> </span>CLKBUFV48_140P7T30R<span class="w"> </span>CLKBUFV4_140P7T30R<span class="w"> </span>CLKBUFV5_140P7T30R<span class="w"> </span>CLKBUFV6_140P7T30R<span class="w"> </span>CLKBUFV7_140P7T30R<span class="w"> </span>CLKBUFV8_140P7T30R
<span class="k">}</span>
<span class="c"># BUFV10_140P7T30R BUFV12_140P7T30R BUFV16_140P7T30R BUFV1P5_140P7T30R BUFV1_140P7T30R BUFV20_140P7T30R BUFV24_140P7T30R BUFV2_140P7T30R BUFV32_140P7T30R BUFV3_140P7T30R BUFV40_140P7T30R BUFV48_140P7T30R BUFV4_140P7T30R BUFV5_140P7T30R BUFV6_140P7T30R BUFV7_140P7T30R BUFV8_140P7T30R </span>
<span class="c"># setOptMode -holdFixingCells {DEL1V1P5_140P7T30RDEL1V1_140P7T30RDEL1V2_140P7T30RDEL1V4_140P7T30RDEL2V1P5_140P7T30RDEL2V1_140P7T30RDEL2V2_140P7T30RDEL2V4_140P7T30RDEL4V1P5_140P7T30RDEL4V1_140P7T30RDEL4V2_140P7T30RDEL4V4_140P7T30R</span>
<span class="c"># }</span>
<span class="nv">setOptMode</span><span class="w"> </span><span class="o">-</span>allEndPoints<span class="w"> </span>true
<span class="c"># setOptMode -holdTargetSlack 0.04</span>
<span class="c"># setOptMode -fixHoldAllowSetupTnsDegrade true</span>
<span class="c"># setOptMode -fixHoldAllowOverlap true</span>
<span class="nv">setOptMode</span><span class="w"> </span><span class="o">-</span>checkRoutingCongestion<span class="w"> </span>true

<span class="c"># via gen mode </span>
<span class="c"># setViaGenMode -parameterized_via_only true</span>
<span class="c"># setViaGenMode -optimize_via_on_routing_track true</span>

<span class="c"># Set RC extraction mode</span>
<span class="nv">setExtractRCMode</span><span class="w"> </span><span class="o">-</span>engine<span class="w"> </span>postRoute<span class="w"> </span><span class="o">-</span>effortLevel<span class="w"> </span>high<span class="w"> </span><span class="o">-</span>coupled<span class="w"> </span>true

<span class="c"># Other</span>
<span class="nv">setPinAssignMode</span><span class="w"> </span><span class="o">-</span>pinEditInBatch<span class="w"> </span>true
<span class="c"># dbget top.insts.cell.name &quot;*INV*&quot;</span>

<span class="c">###########################################</span>
<span class="c"># 2. Floorplanning and Power Planning</span>
<span class="c">###########################################</span>
<span class="c"># Floorplan</span>
<span class="c"># floorPlan -site hd_p140_CoreSite -r 1 0.6 3 4.3 3 4.3</span>
<span class="c"># floorPlan -site hd_p140_CoreSite -r 0.5 0.65 11 5 11 5</span>
<span class="nv">floorPlan</span><span class="w"> </span><span class="o">-</span>site<span class="w"> </span>hd_p140_CoreSite<span class="w"> </span><span class="o">-</span>r<span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mf">0.55</span><span class="w"> </span><span class="mi">7</span><span class="w"> </span><span class="mi">7</span><span class="w"> </span><span class="mi">7</span><span class="w"> </span><span class="mi">7</span>

<span class="c"># Edit pins for mixed-signal interface</span>
<span class="nv">editPin</span><span class="w"> </span><span class="o">-</span>pin<span class="w"> </span><span class="k">{</span><span class="nv">clk</span><span class="k">}</span><span class="w"> </span><span class="o">-</span>layer<span class="w"> </span>M3<span class="w"> </span><span class="o">-</span>spacing<span class="w"> </span><span class="mf">0.6</span><span class="w"> </span><span class="o">-</span>spreadType<span class="w"> </span>CENTER<span class="w"> </span><span class="o">-</span>side<span class="w"> </span>TOP<span class="w"> </span><span class="o">-</span>fixedPin<span class="w"> </span><span class="mi">1</span>
<span class="nv">editPin</span><span class="w"> </span><span class="o">-</span>pin<span class="w"> </span><span class="k">{</span><span class="nv">rst_n</span><span class="k">}</span><span class="w"> </span><span class="o">-</span>layer<span class="w"> </span>M3<span class="w"> </span><span class="o">-</span>spacing<span class="w"> </span><span class="mf">0.6</span><span class="w"> </span><span class="o">-</span>spreadType<span class="w"> </span>CENTER<span class="w"> </span><span class="o">-</span>side<span class="w"> </span>BOTTOM<span class="w"> </span><span class="o">-</span>fixedPin<span class="w"> </span><span class="mi">1</span>
<span class="nv">editPin</span><span class="w"> </span><span class="o">-</span>pin<span class="w"> </span><span class="k">{</span><span class="nv">in_i</span><span class="k">[</span><span class="o">*</span><span class="k">]</span><span class="w"> </span>in_f<span class="k">[</span><span class="o">*</span><span class="k">]}</span><span class="w"> </span><span class="o">-</span>layer<span class="w"> </span>M4<span class="w"> </span><span class="o">-</span>spacing<span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">-</span>spreadType<span class="w"> </span>CENTER<span class="w"> </span><span class="o">-</span>side<span class="w"> </span>LEFT<span class="w"> </span><span class="o">-</span>fixedPin<span class="w"> </span><span class="mi">1</span>
<span class="nv">editPin</span><span class="w"> </span><span class="o">-</span>pin<span class="w"> </span><span class="k">{</span><span class="nv">out_p</span><span class="k">[</span><span class="o">*</span><span class="k">]</span><span class="w"> </span>out_s<span class="k">[</span><span class="o">*</span><span class="k">]}</span><span class="w"> </span><span class="o">-</span>layer<span class="w"> </span>M4<span class="w"> </span><span class="o">-</span>spacing<span class="w"> </span><span class="mf">1.5</span><span class="w"> </span><span class="o">-</span>spreadType<span class="w"> </span>CENTER<span class="w"> </span><span class="o">-</span>side<span class="w"> </span>RIGHT<span class="w"> </span><span class="o">-</span>fixedPin<span class="w"> </span><span class="mi">1</span>

<span class="nv">globalNetConnect</span><span class="w"> </span>VDD<span class="w"> </span><span class="o">-</span>type<span class="w"> </span>pgpin<span class="w"> </span><span class="o">-</span>pin<span class="w"> </span>VDD<span class="w"> </span><span class="o">-</span>inst<span class="w"> </span><span class="o">*</span>
<span class="nv">globalNetConnect</span><span class="w"> </span>VSS<span class="w"> </span><span class="o">-</span>type<span class="w"> </span>pgpin<span class="w"> </span><span class="o">-</span>pin<span class="w"> </span>VSS<span class="w"> </span><span class="o">-</span>inst<span class="w"> </span><span class="o">*</span>
<span class="nv">globalNetConnect</span><span class="w"> </span>VDD<span class="w"> </span><span class="o">-</span>type<span class="w"> </span>pgpin<span class="w"> </span><span class="o">-</span>pin<span class="w"> </span>VNW<span class="w"> </span><span class="o">-</span>inst<span class="w"> </span><span class="o">*</span>
<span class="nv">globalNetConnect</span><span class="w"> </span>VSS<span class="w"> </span><span class="o">-</span>type<span class="w"> </span>pgpin<span class="w"> </span><span class="o">-</span>pin<span class="w"> </span>VPW<span class="w"> </span><span class="o">-</span>inst<span class="w"> </span><span class="o">*</span>


<span class="c"># Power Planning</span>
<span class="nv">deleteAllPowerPreroutes</span>
<span class="nv">addRing</span><span class="w"> </span><span class="o">-</span>nets<span class="w"> </span><span class="k">{</span><span class="nv">VDD</span><span class="w"> </span>VSS<span class="k">}</span><span class="w"> </span><span class="o">-</span>type<span class="w"> </span>core_rings<span class="w"> </span><span class="o">-</span>follow<span class="w"> </span>io<span class="w"> </span><span class="err">\</span>
<span class="w">        </span><span class="nv">-layer</span><span class="w"> </span><span class="k">{</span><span class="nv">top</span><span class="w"> </span>TM1<span class="w"> </span>bottom<span class="w"> </span>TM1<span class="w"> </span>left<span class="w"> </span>M7<span class="w"> </span>right<span class="w"> </span>M7<span class="k">}</span><span class="w"> </span><span class="err">\</span>
<span class="w">        </span><span class="nv">-width</span><span class="w"> </span><span class="k">{</span><span class="nv">top</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span>bottom<span class="w"> </span><span class="mi">2</span><span class="w"> </span>left<span class="w"> </span><span class="mi">2</span><span class="w"> </span>right<span class="w"> </span><span class="mi">2</span><span class="k">}</span><span class="w"> </span><span class="err">\</span>
<span class="w">        </span><span class="nv">-spacing</span><span class="w"> </span><span class="k">{</span><span class="nv">top</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span>bottom<span class="w"> </span><span class="mi">1</span><span class="w"> </span>left<span class="w"> </span><span class="mi">1</span><span class="w"> </span>right<span class="w"> </span><span class="mi">1</span><span class="k">}</span><span class="w"> </span><span class="err">\</span>
<span class="w">        </span><span class="nv">-center</span><span class="w"> </span><span class="mi">1</span>

<span class="c"># addRing -nets {VDD VSS} -type core_rings -follow io \</span>
<span class="c">#         -layer {top TM1 bottom TM1 left MTT2 right MTT2} \</span>
<span class="c">#         -width {top 1 bottom 1 left 2 right 2} \</span>
<span class="c">#         -spacing {top 0.9 bottom 0.9 left 3.1 right 3.1} \</span>
<span class="c">#         -center 1</span>

<span class="c"># addRing -nets {VDD VSS} -type core_rings -follow io \</span>
<span class="c">#         -layer {top TM1 bottom TM1 left MTT2 right MTT2} \</span>
<span class="c">#         -width {top 1 bottom 1 left 2 right 2} \</span>
<span class="c">#         -spacing {top 0.9 bottom 0.9 left 3.1 right 3.1} \</span>
<span class="c">#         -center 1</span>

<span class="c"># addStripe -nets {VDD VSS} -layer M7 -direction vertical -width 0.45 -spacing 1 -set_to_set_distance 11 -start_offset 7.5</span>
<span class="c"># addStripe -nets {VDD VSS} -layer MTT2 -direction vertical -width 2 -spacing 3.1 -set_to_set_distance 13 -start_offset 1</span>
<span class="c"># addStripe -nets {VDD VSS} -layer M7 -direction vertical -width 2 -spacing 6 -set_to_set_distance 20 -start_offset 4</span>


<span class="c"># addStripe -nets {VDD VSS} -layer TM1 -direction horizontal -width 0.45 -spacing 1 -set_to_set_distance 11 -start_offset 7</span>
<span class="c"># addStripe -nets {VDD VSS} -layer TM1 -direction horizontal -width 0.45 -spacing 1 -set_to_set_distance 5 -start_offset 2</span>
<span class="c"># addStripe -nets {VDD VSS} -layer TM1 -direction horizontal -width 2 -spacing 6 -set_to_set_distance 20 -start_offset 4</span>

<span class="c"># Add power rail</span>


<span class="c"># sroute -nets {VDD VSS} -connect {corePin} \</span>
<span class="c">#        -layerChangeRange {M2 M2} \</span>
<span class="c">#        -blockPinTarget nearestTarget \</span>
<span class="c">#        -allowJogging true \</span>
<span class="c">#        -allowLayerChange true \</span>
<span class="c">#        -crossoverViaLayerRange {M2 M2} \</span>
<span class="c">#        -targetViaLayerRange {M2 M2}</span>

<span class="c"># fixVia -minCut </span>
<span class="c"># fixVia -short </span>
<span class="c"># fixVia -minStep</span>

<span class="c">## srout</span>
<span class="nv">setNanoRouteMode</span><span class="w"> </span><span class="o">-</span>routeBottomRoutingLayer<span class="w"> </span><span class="mi">2</span>
<span class="nv">sroute</span><span class="w"> </span><span class="o">-</span>nets<span class="w"> </span><span class="k">{</span><span class="nv">VDD</span><span class="w"> </span>VSS<span class="k">}</span><span class="w"> </span><span class="o">-</span>connect<span class="w"> </span><span class="k">{</span><span class="w"> </span><span class="nv">corePin</span><span class="w"> </span><span class="k">}</span><span class="w"> </span><span class="o">-</span>blockPinTarget<span class="w"> </span><span class="k">{</span><span class="w"> </span><span class="nv">nearestTarget</span><span class="w"> </span><span class="k">}</span><span class="w"> </span><span class="o">-</span>checkAlignedSecondaryPin<span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">-</span>corePinLayer<span class="w"> </span><span class="k">{</span><span class="w"> </span><span class="nv">M1</span><span class="w"> </span><span class="k">}</span><span class="w"> </span><span class="o">-</span>allowJogging<span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">-</span>crossoverViaBottomLayer<span class="w"> </span>M1<span class="w"> </span><span class="o">-</span>allowLayerChange<span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">-</span>targetViaTopLayer<span class="w"> </span>TM1<span class="w"> </span><span class="o">-</span>crossoverViaTopLayer<span class="w"> </span>TM1<span class="w"> </span><span class="o">-</span>targetViaBottomLayer<span class="w"> </span>M1
<span class="nv">verifyPowerVia</span>
<span class="nv">verifyConnectivity</span><span class="w"> </span><span class="o">-</span>nets<span class="w"> </span><span class="k">{</span><span class="nv">VDD</span><span class="w"> </span>VSS<span class="k">}</span>

<span class="nv">sroute</span><span class="w"> </span><span class="o">-</span>nets<span class="w"> </span><span class="k">{</span><span class="nv">VDD</span><span class="w"> </span>VSS<span class="k">}</span><span class="w"> </span><span class="o">-</span>connect<span class="w"> </span><span class="k">{</span><span class="nv">blockPin</span><span class="w"> </span>padPin<span class="w"> </span>padRing<span class="w"> </span>floatingStripe<span class="k">}</span><span class="w"> </span><span class="o">-</span>allowJogging<span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">-</span>allowLayerChange<span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">-</span>stripeLayerRange<span class="w"> </span><span class="k">{</span><span class="nv">M1</span><span class="w"> </span>TM1<span class="k">}</span><span class="w"> </span><span class="o">-</span>targetViaLayerRange<span class="w"> </span><span class="k">{</span><span class="nv">M1</span><span class="w"> </span>TM1<span class="k">}</span>



<span class="nv">checkDesign</span><span class="w"> </span><span class="o">-</span>all<span class="w"> </span><span class="o">-</span>noHtml<span class="w"> </span><span class="o">-</span>outfile<span class="w"> </span><span class="nv">$REPORTS</span><span class="o">/</span>check_design.rpt
<span class="c">###########################################</span>
<span class="c"># 3. Placement and Placement Optimization</span>
<span class="c">###########################################</span>
<span class="c"># # reportDontUseCells</span>

<span class="c"># Set placement mode</span>
<span class="nv">setPlaceMode</span><span class="w"> </span><span class="o">-</span>fp<span class="w"> </span>false<span class="w"> </span><span class="o">-</span>timingDriven<span class="w"> </span>true<span class="w"> </span><span class="o">-</span>place_global_timing_effort<span class="w"> </span>high<span class="w"> </span><span class="o">-</span>ignoreScan<span class="w"> </span>true
<span class="c">## 0.28 means 2xminimum pitch,or when your design pitch=135,you must change 0.28 to 0.27</span>
<span class="nv">setPlaceMode</span><span class="w"> </span><span class="o">-</span>fillerGapMinGap<span class="w"> </span><span class="mf">0.28</span><span class="w"> </span><span class="o">-</span>fillerGapEffort<span class="w"> </span>high<span class="w">  </span>
setPlaceMode<span class="w"> </span><span class="o">-</span>checkImplantWidth<span class="w"> </span>true<span class="w"> </span>
setPlaceMode<span class="w"> </span><span class="o">-</span>honorImplantSpacing<span class="w"> </span>true

<span class="nv">setEndCapMode</span><span class="w"> </span><span class="o">-</span>prefix<span class="w"> </span>ENDCAP
<span class="nv">setEndCapMode</span><span class="w"> </span><span class="o">-</span>leftEdge<span class="w"> </span><span class="s2">&quot;ENDCAP_ROW_140P7T30R&quot;</span><span class="w"> </span><span class="o">-</span>rightEdge<span class="w"> </span><span class="s2">&quot;ENDCAP_ROW_140P7T30R&quot;</span><span class="w"> </span>
addEndCap<span class="w"> </span><span class="o">-</span>prefix<span class="w"> </span>ENDCAP
<span class="c"># deleteFiller -cell FILLTIE_140P7T30R</span>
<span class="c"># addWellTap -cell FILLTIE_140P7T30R -cellInterval 40 -prefix WELLTAP</span>
<span class="nv">addWellTap</span><span class="w"> </span><span class="o">-</span>cell<span class="w"> </span>FILLTIE_140P7T30R<span class="w"> </span><span class="o">-</span>cellInterval<span class="w"> </span><span class="mi">20</span><span class="w"> </span><span class="o">-</span>prefix<span class="w"> </span>WELLTAP


<span class="c"># Run placement</span>
<span class="nv">placeDesign</span><span class="w"> </span><span class="o">-</span>prePlaceOpt
<span class="c"># placeDesign -prePlaceOpt -incremental</span>
<span class="c"># saveDesign $DBS_DIR/place.enc</span>

<span class="c"># Placement optimization</span>
<span class="c"># optDesign -preCTS</span>
<span class="nv">optDesign</span><span class="w"> </span><span class="o">-</span>preCTS<span class="w"> </span><span class="o">-</span>setup
<span class="c"># optDesign -preCTS -incremental</span>
<span class="nv">saveDesign</span><span class="w"> </span><span class="nv">$DBS_DIR</span><span class="o">/</span>preCTS.enc
<span class="nv">checkDesign</span><span class="w"> </span><span class="o">-</span>all<span class="w"> </span><span class="o">-</span>noHtml<span class="w"> </span><span class="o">-</span>outfile<span class="w"> </span><span class="nv">$REPORTS</span><span class="o">/</span>check_design_preCTS.rpt
<span class="c">###########################################</span>
<span class="c"># 4. Clock Tree Synthesis and Optimization</span>
<span class="c">###########################################</span>
<span class="nv">setAnalysisMode</span><span class="w"> </span><span class="o">-</span>analysisType<span class="w"> </span>onChipVariation
<span class="nv">setAnalysisMode</span><span class="w"> </span><span class="o">-</span>cppr<span class="w"> </span>both
<span class="c"># set_ccopt_mode  -integration &quot;native&quot; -ccopt_modify_clock_latency true</span>
<span class="c"># create_route_type -name leaf_rule -top_preferred_layer M4 \</span>
<span class="c"># -bottom_preferred_layer M2</span>
<span class="c"># create_route_type -name trunk_rule -top_preferred_layer M4 \</span>
<span class="c"># -bottom_preferred_layer M2</span>
<span class="c"># # -shield_net VSS</span>
<span class="c"># create_route_type -name top_rule -top_preferred_layer M4 \</span>
<span class="c"># -bottom_preferred_layer M2</span>
<span class="c"># set_ccopt_property -net_type leaf route_type leaf_rule</span>
<span class="c"># set_ccopt_property -net_type trunk route_type trunk_rule</span>
<span class="c"># set_ccopt_property -net_type top route_type top_rule</span>
<span class="nv">set_ccopt_property</span><span class="w"> </span>buffer_cells<span class="w"> </span><span class="k">{</span><span class="nv">CLKBUFV10_140P7T30R</span><span class="w"> </span>CLKBUFV12_140P7T30R<span class="w"> </span>CLKBUFV16_140P7T30R<span class="w"> </span>CLKBUFV20_140P7T30R<span class="w"> </span>CLKBUFV24_140P7T30R<span class="w"> </span>CLKBUFV2_140P7T30R<span class="w"> </span>CLKBUFV32_140P7T30R<span class="w"> </span>CLKBUFV3_140P7T30R<span class="w"> </span>CLKBUFV40_140P7T30R<span class="w"> </span>CLKBUFV48_140P7T30R<span class="w"> </span>CLKBUFV4_140P7T30R<span class="w"> </span>CLKBUFV5_140P7T30R<span class="w"> </span>CLKBUFV6_140P7T30R<span class="w"> </span>CLKBUFV7_140P7T30R<span class="w"> </span>CLKBUFV8_140P7T30R
<span class="k">}</span>
<span class="nv">set_ccopt_property</span><span class="w"> </span>inverter_cells<span class="w"> </span><span class="k">{</span><span class="nv">INV10_140P7T30R</span><span class="w"> </span>INV12_140P7T30R<span class="w"> </span>INV16_140P7T30R<span class="w"> </span>INV1P5_140P7T30R<span class="w"> </span>INV1P5M_140P7T30R<span class="w"> </span>INV1_140P7T30R<span class="w"> </span>INV1M_140P7T30R<span class="w"> </span>INV20_140P7T30R<span class="w"> </span>INV24_140P7T30R<span class="w"> </span>INV2_140P7T30R<span class="w"> </span>INV2M_140P7T30R<span class="w"> </span>INV32_140P7T30R<span class="w"> </span>INV3_140P7T30R<span class="w"> </span>INV40_140P7T30R<span class="w"> </span>INV48_140P7T30R<span class="w"> </span>INV4_140P7T30R<span class="w"> </span>INV5_140P7T30R<span class="w"> </span>INV6_140P7T30R<span class="w"> </span>INV7_140P7T30R<span class="w"> </span>INV8_140P7T30R<span class="k">}</span>
<span class="nv">set_ccopt_property</span><span class="w"> </span>use_inverters<span class="w"> </span>true
<span class="nv">create_ccopt_clock_tree_spec</span><span class="w"> </span><span class="o">-</span>file<span class="w"> </span>ccopt.spec
<span class="c"># source ccopt.spec</span>


<span class="c"># Run clock tree synthesis</span>
<span class="nv">ccopt_design</span><span class="w"> </span><span class="o">-</span>CTS<span class="w"> </span><span class="o">-</span>outDir<span class="w"> </span><span class="nv">$REPORTS</span><span class="o">/</span>CTS_opt
<span class="c"># selectNet -clock</span>
<span class="nv">report_ccopt_clock_trees</span><span class="w"> </span><span class="o">-</span>file<span class="w"> </span><span class="nv">$REPORTS</span><span class="o">/</span>clock_trees.rpt
<span class="nv">report_ccopt_skew_groups</span><span class="w"> </span><span class="o">-</span>file<span class="w"> </span><span class="nv">$REPORTS</span><span class="o">/</span>skew_groups.rpt
<span class="nv">saveNetlist</span><span class="w"> </span><span class="nv">$OUTPUTS</span><span class="o">/</span><span class="nv">${DESIGN}</span>_cts.v
<span class="nv">saveDesign</span><span class="w"> </span><span class="nv">$DBS_DIR</span><span class="o">/</span>cts.enc

<span class="c">#check timing</span>
<span class="c"># Post-CTS optimization</span>
<span class="c"># setOptMode -fixHoldAllowResizing true</span>
<span class="c"># setOptMode -fixHoldAllowSetupTnsDegrade true</span>

<span class="c"># optDesign -postCTS -hold -setup</span>
<span class="c"># optDesign -postCTS -hold -expandedViews</span>
<span class="c"># optDesign -postCTS -hold -expandedViews -incremental</span>
<span class="c"># optDesign -postCTS -expandedViews</span>
<span class="nv">optDesign</span><span class="w"> </span><span class="o">-</span>postCTS<span class="w"> </span><span class="o">-</span>setup<span class="w"> </span><span class="o">-</span>expandedViews
<span class="nv">optDesign</span><span class="w"> </span><span class="o">-</span>postCTS<span class="w"> </span><span class="o">-</span>setup<span class="w"> </span><span class="o">-</span>expandedViews<span class="w"> </span><span class="o">-</span>incremental

<span class="nv">saveNetlist</span><span class="w"> </span><span class="nv">$OUTPUTS</span><span class="o">/</span><span class="nv">${DESIGN}</span>_postcts.v
<span class="nv">checkDesign</span><span class="w"> </span><span class="o">-</span>all<span class="w"> </span><span class="o">-</span>noHtml<span class="w"> </span><span class="o">-</span>outfile<span class="w"> </span><span class="nv">$REPORTS</span><span class="o">/</span>check_design_postcts.rpt

<span class="nv">verify_drc</span>
<span class="nv">verifyConnectivity</span>
<span class="c">###########################################</span>
<span class="c"># 5. Routing and Post-Route Optimization</span>
<span class="c">###########################################</span>

<span class="nv">setDelayCalMode</span><span class="w"> </span><span class="o">-</span>siAware<span class="w"> </span>true<span class="w"> </span><span class="o">-</span>engine<span class="w"> </span>aae
<span class="nv">setAnalysisMode</span><span class="w"> </span><span class="o">-</span>cppr<span class="w"> </span>both
<span class="nv">setNanoRouteMode</span><span class="w"> </span><span class="o">-</span>routeWithLithoDriven<span class="w"> </span>true<span class="w"> </span><span class="err">\</span>
<span class="w">                </span><span class="nv">-routeWithTimingDriven</span><span class="w"> </span>true<span class="w"> </span><span class="err">\</span>
<span class="w">                </span><span class="nv">-routeWithSiDriven</span><span class="w"> </span>true<span class="w"> </span><span class="err">\</span>
<span class="w">                </span><span class="nv">-routeTopRoutingLayer</span><span class="w"> </span><span class="mi">6</span>

<span class="c"># setNanoRouteMode -dbViaWeight { *R_40x40x40x40_dfm* 21 , *R_30x30x30x30_dfm* 20 , *R_20x20x20x20_dfm* 19 , \</span>
<span class="c">#    *R_10x30x10x30_dfm* 18 , *R_30x10x30x10_dfm* 17 , *HR_40x40x40x00_dfm* 16 , *VR_40x40x00x40_dfm* 15 , *HR_30x30x40x00_dfm* 14 , \</span>
<span class="c">#    *VR_30x30x00x40_dfm* 13 , *HR_20x20x40x00_dfm* 12 , *VR_20x20x00x40_dfm* 11 , *HR_40x00x20x20_dfm* 10 , *VR_00x40x20x20_dfm* 9 , \</span>
<span class="c">#    *HR_40x00x40x00_dfm* 8 , *VR_00x40x00x40_dfm* 7 , *V*_40x40x40x40_dfm* 6 , *V*_30x30x30x30_dfm* 5  , *V*_25x25x25x25_dfm* 4 , *25x10x30x00_dfm* 3 , \</span>
<span class="c">#    *30x00x25x10_dfm* 2 , *10x50x10x50_dfm* 1}</span>

<span class="c"># Run routing</span>
<span class="nv">routeDesign</span>
<span class="nv">saveDesign</span><span class="w"> </span><span class="nv">$DBS_DIR</span><span class="o">/</span>route.enc
<span class="nv">saveNetlist</span><span class="w"> </span><span class="nv">$OUTPUTS</span><span class="o">/</span><span class="nv">${DESIGN}</span>_route.v


<span class="c"># Post-route optimization</span>
<span class="nv">setExtractRCMode</span><span class="w"> </span><span class="o">-</span>engine<span class="w"> </span>postRoute
<span class="c"># setOptMode -holdTargetSlack 0.01</span>
<span class="c"># setOptMode -fixHoldAllowSetupTnsDegrade true</span>
<span class="nv">optDesign</span><span class="w"> </span><span class="o">-</span>postRoute<span class="w"> </span><span class="o">-</span>hold<span class="w"> </span><span class="o">-</span>setup<span class="w"> </span><span class="o">-</span>expandedViews
<span class="c"># optDesign -postRoute -hold -setup -incremental</span>
<span class="nv">optDesign</span><span class="w"> </span><span class="o">-</span>postRoute<span class="w"> </span><span class="o">-</span>setup<span class="w"> </span><span class="o">-</span>incremental

<span class="c"># optDesign -postRoute -hold -expandedViews</span>
<span class="nv">saveDesign</span><span class="w"> </span><span class="nv">$DBS_DIR</span><span class="o">/</span>postRoute.enc
<span class="nv">saveNetlist</span><span class="w"> </span><span class="nv">$OUTPUTS</span><span class="o">/</span><span class="nv">${DESIGN}</span>_postroute.v
<span class="nv">checkDesign</span><span class="w"> </span><span class="o">-</span>all<span class="w"> </span><span class="o">-</span>noHtml<span class="w"> </span><span class="o">-</span>outfile<span class="w"> </span><span class="nv">$REPORTS</span><span class="o">/</span>check_design_postroute.rpt
<span class="c">###########################################</span>
<span class="c"># 6. signoff</span>
<span class="c">###########################################</span>
<span class="nv">setExtractRCMode</span><span class="w"> </span><span class="o">-</span>coupled<span class="w"> </span>true<span class="w"> </span><span class="o">-</span>effortLevel<span class="w"> </span>high
<span class="nv">setAnalysisMode</span><span class="w"> </span><span class="o">-</span>analysisType<span class="w"> </span>onChipVariation<span class="w"> </span><span class="o">-</span>cppr<span class="w"> </span>both
<span class="nv">setExtractRCMode</span><span class="w"> </span><span class="o">-</span>engine<span class="w"> </span>postRoute<span class="w"> </span><span class="o">-</span>effortLevel<span class="w"> </span>high<span class="w"> </span><span class="o">-</span>coupled<span class="w"> </span>true

<span class="c"># reportDontUseCells</span>

<span class="c"># # Add filler cells</span>
<span class="c"># setFillerMode -core &quot;F_FILL32_140P7T30R&quot; -add_fillers_with_drc false</span>
<span class="c"># addFiller -cell {F_FILL32_140P7T30R} -prefix POSTFILL -fitGap</span>
<span class="c"># setFillerMode -core &quot;F_FILL16_140P7T30R&quot; -add_fillers_with_drc false</span>
<span class="c"># addFiller -cell {F_FILL16_140P7T30R} -prefix POSTFILL -fitGap</span>
<span class="c"># setFillerMode -core &quot;F_FILL8_140P7T30R&quot; -add_fillers_with_drc false</span>
<span class="c"># addFiller -cell {F_FILL8_140P7T30R} -prefix POSTFILL -fitGap</span>
<span class="c"># setFillerMode -core &quot;F_FILL6_140P7T30R&quot; -add_fillers_with_drc false</span>
<span class="c"># addFiller -cell {F_FILL6_140P7T30R} -prefix POSTFILL -fitGap</span>
<span class="c"># setFillerMode -core &quot;F_FILL5_140P7T30R&quot; -add_fillers_with_drc false</span>
<span class="c"># addFiller -cell {F_FILL5_140P7T30R} -prefix POSTFILL -fitGap</span>
<span class="c"># setFillerMode -core &quot;F_FILL4_140P7T30R&quot; -add_fillers_with_drc false</span>
<span class="c"># addFiller -cell {F_FILL4_140P7T30R} -prefix POSTFILL -fitGap</span>
<span class="c"># setFillerMode -core &quot;F_FILL3_140P7T30R&quot; -add_fillers_with_drc false</span>
<span class="c"># addFiller -cell {F_FILL3_140P7T30R} -prefix POSTFILL -fitGap</span>
<span class="c"># setFillerMode -core &quot;F_FILL2_140P7T30R&quot; -add_fillers_with_drc false</span>
<span class="c"># addFiller -cell {F_FILL2_140P7T30R} -prefix POSTFILL -fitGap</span>
<span class="nv">addFiller</span><span class="w"> </span><span class="o">-</span>cell<span class="w"> </span><span class="k">{</span><span class="nv">F_FILL2_140P7T30R</span><span class="w"> </span>F_FILL3_140P7T30R<span class="w"> </span>F_FILL4_140P7T30R<span class="w"> </span>F_FILL5_140P7T30R<span class="w"> </span>F_FILL6_140P7T30R<span class="w"> </span>F_FILL8_140P7T30R<span class="w"> </span>F_FILL16_140P7T30R<span class="w"> </span>F_FILL32_140P7T30R<span class="k">}</span><span class="w"> </span><span class="o">-</span>prefix<span class="w"> </span>POSTFILL<span class="w"> </span><span class="o">-</span>fitGap

<span class="c"># addMetalFill -layer {M1 M2 M3 M4 M5 M6 M7 M8 M9 M10} -timingAware on</span>

<span class="c"># sroute -connect {blockPin padPin padRing corePin floatingStripe} </span>

<span class="c"># route_fix_signoff_drc</span>

<span class="nv">ecoRoute</span><span class="w"> </span><span class="o">-</span>target
<span class="nv">ecoRoute</span><span class="w"> </span><span class="o">-</span>fix_drc

<span class="nv">fixVia</span><span class="w"> </span><span class="o">-</span>minCut
<span class="nv">fixVia</span><span class="w"> </span><span class="o">-</span>short
<span class="nv">fixVia</span><span class="w"> </span><span class="o">-</span>minStep


<span class="nv">extractRC</span>

<span class="c"># saveDesign $DBS_DIR/signoff.enc</span>
<span class="c"># restoreDesign ../DBS/signoff.enc.dat mydsm</span>


<span class="c"># # ###########################################</span>
<span class="c"># # # 7. check</span>
<span class="c"># # ###########################################</span>
<span class="c">## verify</span>
<span class="nv">checkPlace</span><span class="w"> </span><span class="o">-</span>outfile<span class="w"> </span><span class="nv">$REPORTS</span><span class="o">/</span>verify<span class="o">/</span>check_place.rpt
<span class="nv">checkDesign</span><span class="w"> </span><span class="o">-</span>all<span class="w"> </span><span class="o">-</span>noHtml<span class="w"> </span><span class="o">-</span>outfile<span class="w"> </span><span class="nv">$REPORTS</span><span class="o">/</span>check_design.rpt
<span class="nv">verifyConnectivity</span><span class="w"> </span><span class="o">-</span>type<span class="w"> </span>all<span class="w"> </span><span class="o">-</span>report<span class="w"> </span><span class="nv">$REPORTS</span><span class="o">/</span>verify<span class="o">/</span>connectivity.rpt
<span class="nv">verify_drc</span><span class="w"> </span><span class="o">-</span>report<span class="w"> </span><span class="nv">$REPORTS</span><span class="o">/</span>verify<span class="o">/</span>drc.rpt
<span class="nv">verifyGeometry</span><span class="w"> </span><span class="o">-</span>report<span class="w"> </span><span class="nv">$REPORTS</span><span class="o">/</span>verify<span class="o">/</span>geometry.rpt
<span class="nv">verifyProcessAntenna</span><span class="w"> </span><span class="o">-</span>report<span class="w"> </span><span class="nv">$REPORTS</span><span class="o">/</span>verify<span class="o">/</span>antenna.rpt
<span class="nv">verifyMetalDensity</span><span class="w"> </span><span class="o">-</span>report<span class="w"> </span><span class="nv">$REPORTS</span><span class="o">/</span>verify<span class="o">/</span>metal_density.rpt
<span class="nv">verifyACLimit</span><span class="w"> </span><span class="o">-</span>use_db_freq<span class="w"> </span><span class="o">-</span>report<span class="w"> </span><span class="nv">$REPORTS</span><span class="o">/</span>verify<span class="o">/</span>ac_limit.rpt

<span class="nv">saveDesign</span><span class="w"> </span><span class="nv">$DBS_DIR</span><span class="o">/</span>final.enc
<span class="c"># restoreDesign ../DBS/final.enc.dat mydsm</span>


<span class="c">## output</span>
<span class="k">set</span><span class="w"> </span>dbgLefDefOutVersion<span class="w"> </span><span class="mf">5.8</span>
<span class="k">global</span><span class="w"> </span>dbgLefDefOutVersion
<span class="nv">saveNetlist</span><span class="w"> </span><span class="nv">${OUTPUTS}</span><span class="o">/</span><span class="nv">${DESIGN}</span>.v
<span class="nv">saveNetlist</span><span class="w"> </span><span class="nv">${OUTPUTS}</span><span class="o">/</span><span class="nv">${DESIGN}</span>_rmove_pg.v<span class="w"> </span><span class="o">-</span>removePowerGround
<span class="nv">saveNetlist</span><span class="w"> </span><span class="nv">${OUTPUTS}</span><span class="o">/</span><span class="nv">${DESIGN}</span>_pg.v<span class="w"> </span><span class="o">-</span>includePowerGround


<span class="nv">defOut</span><span class="w"> </span><span class="o">-</span>floorplan<span class="w"> </span><span class="o">-</span>netlist<span class="w"> </span><span class="o">-</span>routing<span class="w"> </span><span class="nv">${OUTPUTS}</span><span class="o">/</span><span class="nv">${DESIGN}</span>.def
<span class="nv">streamOut</span><span class="w"> </span><span class="nv">${OUTPUTS}</span><span class="o">/</span><span class="nv">${DESIGN}</span>.gds<span class="w"> </span><span class="o">-</span>mapFile<span class="w"> </span>..<span class="o">/</span>..<span class="o">/</span>..<span class="o">/</span>pdk<span class="o">/</span>SCC28NHKCP_TF_V0p2<span class="o">/</span>innovus<span class="o">/</span>hd<span class="o">/</span>tf_mtt<span class="o">/</span>encStreamout_mtt.map<span class="w"> </span><span class="o">-</span>libName<span class="w"> </span>DesignLib<span class="w"> </span><span class="o">-</span>units<span class="w"> </span><span class="mi">2000</span><span class="w"> </span><span class="o">-</span>mode<span class="w"> </span>ALL


<span class="c">## report</span>
<span class="nv">report_power</span><span class="w"> </span><span class="o">-</span>view<span class="w"> </span>view_ss<span class="w"> </span><span class="o">-</span>outfile<span class="w"> </span><span class="nv">$REPORTS</span><span class="o">/</span><span class="nv">${DESIGN}</span>_power_ss.rpt
<span class="nv">report_power</span><span class="w"> </span><span class="o">-</span>view<span class="w"> </span>view_tt<span class="w"> </span><span class="o">-</span>outfile<span class="w"> </span><span class="nv">$REPORTS</span><span class="o">/</span><span class="nv">${DESIGN}</span>_power_tt.rpt
<span class="nv">report_power</span><span class="w"> </span><span class="o">-</span>view<span class="w"> </span>view_ff<span class="w"> </span><span class="o">-</span>outfile<span class="w"> </span><span class="nv">$REPORTS</span><span class="o">/</span><span class="nv">${DESIGN}</span>_power_ff.rpt

<span class="nv">report_area</span>

<span class="nv">timeDesign</span><span class="w"> </span><span class="o">-</span>prefix<span class="w"> </span>signoff<span class="w"> </span><span class="o">-</span>signoff<span class="w"> </span><span class="o">-</span>reportOnly<span class="w"> </span><span class="o">-</span>outDir<span class="w"> </span><span class="nv">$REPORTS</span><span class="o">/</span>timeDesign
<span class="nv">timeDesign</span><span class="w"> </span><span class="o">-</span>prefix<span class="w"> </span>signoff_hold<span class="w"> </span><span class="o">-</span>signoff<span class="w"> </span><span class="o">-</span>reportOnly<span class="w"> </span><span class="o">-</span>hold<span class="w"> </span><span class="o">-</span>outDir<span class="w"> </span><span class="nv">$REPORTS</span><span class="o">/</span>timeDesign

<span class="nv">report_timing</span><span class="w"> </span><span class="o">-</span>late<span class="w"> </span><span class="o">-</span>max_paths<span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class="o">-</span>max_slack<span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nv">$REPORTS</span><span class="o">/</span>setup_violations.rpt
<span class="nv">report_timing</span><span class="w"> </span><span class="o">-</span>early<span class="w"> </span><span class="o">-</span>max_paths<span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class="o">-</span>max_slack<span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nv">$REPORTS</span><span class="o">/</span>hold_violations.rpt
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c">###############################################################</span>
<span class="c"># Author: pxmmmm</span>
<span class="c"># Date: 2025-06-04</span>
<span class="c"># Description: MMMC configuration for mydsm</span>
<span class="c"># Version: 2.2</span>
<span class="c">###############################################################</span>

<span class="c"># 设置基本目录</span>
<span class="k">set</span><span class="w"> </span>WORKSPACE<span class="w"> </span><span class="s2">&quot;/SM05/home/phd2024/phd202411094979/project/cpicp25&quot;</span>
<span class="k">set</span><span class="w"> </span>PDK_DIR<span class="w"> </span><span class="s2">&quot;$WORKSPACE/pdk&quot;</span>

<span class="k">set</span><span class="w"> </span>ICT_DIR<span class="w"> </span><span class="s2">&quot;$PDK_DIR/TD-LO28-XQ-2090v0/SMIC_CCIQRC_28HKCPlusLG_0925_1P9M_7Ic_1TMc_1MTTc_ALPA2_V1.0_REV5_0/ICT&quot;</span>
<span class="k">set</span><span class="w"> </span>QRC_DIR<span class="w"> </span><span class="s2">&quot;$PDK_DIR/TD-LO28-XQ-2090v0/SMIC_CCIQRC_28HKCPlusLG_0925_1P9M_7Ic_1TMc_1MTTc_ALPA2_V1.0_REV5_0/rulefiles&quot;</span>

<span class="nv">create_rc_corner</span><span class="w"> </span><span class="o">-</span>name<span class="w"> </span>rc_corner_rcmax<span class="w"> </span><span class="err">\</span>
<span class="nv">-T</span><span class="w"> </span><span class="mi">85</span><span class="w"> </span><span class="err">\</span>
<span class="nv">-preRoute_res</span><span class="w"> </span><span class="mf">0.95</span><span class="w"> </span><span class="err">\</span>
<span class="nv">-preRoute_cap</span><span class="w"> </span><span class="mf">1.09</span><span class="w"> </span><span class="err">\</span>
<span class="nv">-preRoute_clkres</span><span class="w"> </span><span class="mf">1.0</span><span class="w"> </span><span class="err">\</span>
<span class="nv">-preRoute_clkcap</span><span class="w"> </span><span class="mf">1.1</span><span class="w"> </span><span class="err">\</span>
<span class="nv">-postRoute_res</span><span class="w"> </span><span class="mf">1.27</span><span class="w"> </span><span class="err">\</span>
<span class="nv">-postRoute_cap</span><span class="w"> </span><span class="mf">1.09</span><span class="w"> </span><span class="err">\</span>
<span class="nv">-postRoute_xcap</span><span class="w"> </span><span class="mf">1.03</span><span class="w"> </span><span class="err">\</span>
<span class="nv">-postRoute_clkres</span><span class="w"> </span><span class="mf">1.0</span><span class="w"> </span><span class="err">\</span>
<span class="nv">-postRoute_clkcap</span><span class="w"> </span><span class="mf">1.05</span><span class="w"> </span><span class="err">\</span>
<span class="nv">-qx_tech_file</span><span class="w"> </span><span class="nv">$QRC_DIR</span><span class="o">/</span>RCMAX<span class="o">/</span>qrcTechFile

<span class="nv">create_rc_corner</span><span class="w"> </span><span class="o">-</span>name<span class="w"> </span>rc_corner_typical<span class="w"> </span><span class="err">\</span>
<span class="nv">-T</span><span class="w"> </span><span class="mi">25</span><span class="w"> </span><span class="err">\</span>
<span class="nv">-preRoute_res</span><span class="w"> </span><span class="mf">0.95</span><span class="w"> </span><span class="err">\</span>
<span class="nv">-preRoute_cap</span><span class="w"> </span><span class="mf">1.09</span><span class="w"> </span><span class="err">\</span>
<span class="nv">-preRoute_clkres</span><span class="w"> </span><span class="mf">1.0</span><span class="w"> </span><span class="err">\</span>
<span class="nv">-preRoute_clkcap</span><span class="w"> </span><span class="mf">1.1</span><span class="w"> </span><span class="err">\</span>
<span class="nv">-postRoute_res</span><span class="w"> </span><span class="mf">1.27</span><span class="w"> </span><span class="err">\</span>
<span class="nv">-postRoute_cap</span><span class="w"> </span><span class="mf">1.09</span><span class="w"> </span><span class="err">\</span>
<span class="nv">-postRoute_xcap</span><span class="w"> </span><span class="mf">1.03</span><span class="w"> </span><span class="err">\</span>
<span class="nv">-postRoute_clkres</span><span class="w"> </span><span class="mf">1.0</span><span class="w"> </span><span class="err">\</span>
<span class="nv">-postRoute_clkcap</span><span class="w"> </span><span class="mf">1.05</span><span class="w"> </span><span class="err">\</span>
<span class="nv">-qx_tech_file</span><span class="w"> </span><span class="nv">$QRC_DIR</span><span class="o">/</span>TYPICAL<span class="o">/</span>qrcTechFile

<span class="nv">create_rc_corner</span><span class="w"> </span><span class="o">-</span>name<span class="w"> </span>rc_corner_rcmin<span class="w"> </span><span class="err">\</span>
<span class="nv">-T</span><span class="w"> </span><span class="o">-</span><span class="mi">40</span><span class="w"> </span><span class="err">\</span>
<span class="nv">-preRoute_res</span><span class="w"> </span><span class="mf">0.95</span><span class="w"> </span><span class="err">\</span>
<span class="nv">-preRoute_cap</span><span class="w"> </span><span class="mf">1.09</span><span class="w"> </span><span class="err">\</span>
<span class="nv">-preRoute_clkres</span><span class="w"> </span><span class="mf">1.0</span><span class="w"> </span><span class="err">\</span>
<span class="nv">-preRoute_clkcap</span><span class="w"> </span><span class="mf">1.1</span><span class="w"> </span><span class="err">\</span>
<span class="nv">-postRoute_res</span><span class="w"> </span><span class="mf">1.27</span><span class="w"> </span><span class="err">\</span>
<span class="nv">-postRoute_cap</span><span class="w"> </span><span class="mf">1.09</span><span class="w"> </span><span class="err">\</span>
<span class="nv">-postRoute_xcap</span><span class="w"> </span><span class="mf">1.03</span><span class="w"> </span><span class="err">\</span>
<span class="nv">-postRoute_clkres</span><span class="w"> </span><span class="mf">1.0</span><span class="w"> </span><span class="err">\</span>
<span class="nv">-postRoute_clkcap</span><span class="w"> </span><span class="mf">1.05</span><span class="w"> </span><span class="err">\</span>
<span class="nv">-qx_tech_file</span><span class="w"> </span><span class="nv">$QRC_DIR</span><span class="o">/</span>RCMIN<span class="o">/</span>qrcTechFile

<span class="k">set</span><span class="w"> </span>lib_ss<span class="w"> </span><span class="s2">&quot;$PDK_DIR/STDCELL/SCC28NHKCP_HDC30P140_RVT_V0p2/liberty/0.9v/scc28nhkcp_hdc30p140_rvt_ss_v0p81_125c_ecsm.lib&quot;</span>
<span class="k">set</span><span class="w"> </span>lib_tt<span class="w"> </span><span class="s2">&quot;$PDK_DIR/STDCELL/SCC28NHKCP_HDC30P140_RVT_V0p2/liberty/0.9v/scc28nhkcp_hdc30p140_rvt_tt_v0p9_25c_ecsm.lib&quot;</span>
<span class="k">set</span><span class="w"> </span>lib_ff<span class="w"> </span><span class="s2">&quot;$PDK_DIR/STDCELL/SCC28NHKCP_HDC30P140_RVT_V0p2/liberty/0.9v/scc28nhkcp_hdc30p140_rvt_ff_v0p99_-40c_ecsm.lib&quot;</span>

<span class="nv">create_library_set</span><span class="w"> </span><span class="o">-</span>name<span class="w"> </span>lib_ss<span class="w"> </span><span class="o">-</span>timing<span class="w"> </span><span class="nv">$lib_ss</span>
<span class="nv">create_library_set</span><span class="w"> </span><span class="o">-</span>name<span class="w"> </span>lib_tt<span class="w"> </span><span class="o">-</span>timing<span class="w"> </span><span class="nv">$lib_tt</span>
<span class="nv">create_library_set</span><span class="w"> </span><span class="o">-</span>name<span class="w"> </span>lib_ff<span class="w"> </span><span class="o">-</span>timing<span class="w"> </span><span class="nv">$lib_ff</span>

<span class="c"># Create delay corners</span>
<span class="nv">create_delay_corner</span><span class="w"> </span><span class="o">-</span>name<span class="w"> </span>corner_ss<span class="w"> </span><span class="err">\</span>
<span class="nv">-library_set</span><span class="w"> </span>lib_ss<span class="w"> </span><span class="err">\</span>
<span class="nv">-rc_corner</span><span class="w"> </span>rc_corner_rcmax

<span class="nv">create_delay_corner</span><span class="w"> </span><span class="o">-</span>name<span class="w"> </span>corner_tt<span class="w"> </span><span class="err">\</span>
<span class="nv">-library_set</span><span class="w"> </span>lib_tt<span class="w"> </span><span class="err">\</span>
<span class="nv">-rc_corner</span><span class="w"> </span>rc_corner_typical

<span class="nv">create_delay_corner</span><span class="w"> </span><span class="o">-</span>name<span class="w"> </span>corner_ff<span class="w"> </span><span class="err">\</span>
<span class="nv">-library_set</span><span class="w"> </span>lib_ff<span class="w"> </span><span class="err">\</span>
<span class="nv">-rc_corner</span><span class="w"> </span>rc_corner_rcmin

<span class="c"># Create constraint mode</span>
<span class="c"># set constraint_file &quot;$WORKSPACE/digtal/back/scripts/constraint.sdc&quot;</span>
<span class="k">set</span><span class="w"> </span>syn_sdc_file<span class="w"> </span><span class="s2">&quot;$WORKSPACE/digtal/syn/outputs/${DESIGN}_syn.sdc&quot;</span>
<span class="nv">create_constraint_mode</span><span class="w"> </span><span class="o">-</span>name<span class="w"> </span>constraint_mode<span class="w"> </span><span class="err">\</span>
<span class="nv">-sdc_files</span><span class="w"> </span><span class="nv">$syn_sdc_file</span>

<span class="c"># set_timing_derate, useful?</span>
<span class="nv">set_timing_derate</span><span class="w"> </span><span class="o">-</span>data<span class="w"> </span><span class="o">-</span>cell_delay<span class="w"> </span><span class="o">-</span>early<span class="w"> </span><span class="o">-</span>delay_corner<span class="w"> </span>corner_ss<span class="w"> </span><span class="mf">0.97</span>
<span class="nv">set_timing_derate</span><span class="w"> </span><span class="o">-</span>clock<span class="w"> </span><span class="o">-</span>cell_delay<span class="w"> </span><span class="o">-</span>early<span class="w"> </span><span class="o">-</span>delay_corner<span class="w"> </span>corner_ss<span class="w"> </span><span class="mf">0.97</span>
<span class="nv">set_timing_derate</span><span class="w"> </span><span class="o">-</span>data<span class="w"> </span><span class="o">-</span>cell_delay<span class="w"> </span><span class="o">-</span>late<span class="w"> </span><span class="o">-</span>delay_corner<span class="w"> </span>corner_ss<span class="w"> </span><span class="mf">1.03</span>
<span class="nv">set_timing_derate</span><span class="w"> </span><span class="o">-</span>clock<span class="w"> </span><span class="o">-</span>cell_delay<span class="w"> </span><span class="o">-</span>late<span class="w"> </span><span class="o">-</span>delay_corner<span class="w"> </span>corner_ss<span class="w"> </span><span class="mf">1.03</span>
<span class="nv">set_timing_derate</span><span class="w"> </span><span class="o">-</span>data<span class="w"> </span><span class="o">-</span>net_delay<span class="w"> </span><span class="o">-</span>early<span class="w"> </span><span class="o">-</span>delay_corner<span class="w"> </span>corner_ss<span class="w"> </span><span class="mf">0.97</span>
<span class="nv">set_timing_derate</span><span class="w"> </span><span class="o">-</span>clock<span class="w"> </span><span class="o">-</span>net_delay<span class="w"> </span><span class="o">-</span>early<span class="w"> </span><span class="o">-</span>delay_corner<span class="w"> </span>corner_ss<span class="w"> </span><span class="mf">0.97</span>
<span class="nv">set_timing_derate</span><span class="w"> </span><span class="o">-</span>data<span class="w"> </span><span class="o">-</span>net_delay<span class="w"> </span><span class="o">-</span>late<span class="w"> </span><span class="o">-</span>delay_corner<span class="w"> </span>corner_ss<span class="w"> </span><span class="mf">1.03</span>
<span class="nv">set_timing_derate</span><span class="w"> </span><span class="o">-</span>clock<span class="w"> </span><span class="o">-</span>net_delay<span class="w"> </span><span class="o">-</span>late<span class="w"> </span><span class="o">-</span>delay_corner<span class="w"> </span>corner_ss<span class="w"> </span><span class="mf">1.03</span>

<span class="nv">set_timing_derate</span><span class="w"> </span><span class="o">-</span>data<span class="w"> </span><span class="o">-</span>cell_delay<span class="w"> </span><span class="o">-</span>early<span class="w"> </span><span class="o">-</span>delay_corner<span class="w"> </span>corner_tt<span class="w"> </span><span class="mf">0.97</span>
<span class="nv">set_timing_derate</span><span class="w"> </span><span class="o">-</span>clock<span class="w"> </span><span class="o">-</span>cell_delay<span class="w"> </span><span class="o">-</span>early<span class="w"> </span><span class="o">-</span>delay_corner<span class="w"> </span>corner_tt<span class="w"> </span><span class="mf">0.97</span>
<span class="nv">set_timing_derate</span><span class="w"> </span><span class="o">-</span>data<span class="w"> </span><span class="o">-</span>cell_delay<span class="w"> </span><span class="o">-</span>late<span class="w"> </span><span class="o">-</span>delay_corner<span class="w"> </span>corner_tt<span class="w"> </span><span class="mf">1.03</span>
<span class="nv">set_timing_derate</span><span class="w"> </span><span class="o">-</span>clock<span class="w"> </span><span class="o">-</span>cell_delay<span class="w"> </span><span class="o">-</span>late<span class="w"> </span><span class="o">-</span>delay_corner<span class="w"> </span>corner_tt<span class="w"> </span><span class="mf">1.03</span>
<span class="nv">set_timing_derate</span><span class="w"> </span><span class="o">-</span>data<span class="w"> </span><span class="o">-</span>net_delay<span class="w"> </span><span class="o">-</span>early<span class="w"> </span><span class="o">-</span>delay_corner<span class="w"> </span>corner_tt<span class="w"> </span><span class="mf">0.97</span>
<span class="nv">set_timing_derate</span><span class="w"> </span><span class="o">-</span>clock<span class="w"> </span><span class="o">-</span>net_delay<span class="w"> </span><span class="o">-</span>early<span class="w"> </span><span class="o">-</span>delay_corner<span class="w"> </span>corner_tt<span class="w"> </span><span class="mf">0.97</span>
<span class="nv">set_timing_derate</span><span class="w"> </span><span class="o">-</span>data<span class="w"> </span><span class="o">-</span>net_delay<span class="w"> </span><span class="o">-</span>late<span class="w"> </span><span class="o">-</span>delay_corner<span class="w"> </span>corner_tt<span class="w"> </span><span class="mf">1.03</span>
<span class="nv">set_timing_derate</span><span class="w"> </span><span class="o">-</span>clock<span class="w"> </span><span class="o">-</span>net_delay<span class="w"> </span><span class="o">-</span>late<span class="w"> </span><span class="o">-</span>delay_corner<span class="w"> </span>corner_tt<span class="w"> </span><span class="mf">1.03</span>

<span class="nv">set_timing_derate</span><span class="w"> </span><span class="o">-</span>data<span class="w"> </span><span class="o">-</span>cell_delay<span class="w"> </span><span class="o">-</span>early<span class="w"> </span><span class="o">-</span>delay_corner<span class="w"> </span>corner_ff<span class="w"> </span><span class="mf">0.97</span>
<span class="nv">set_timing_derate</span><span class="w"> </span><span class="o">-</span>clock<span class="w"> </span><span class="o">-</span>cell_delay<span class="w"> </span><span class="o">-</span>early<span class="w"> </span><span class="o">-</span>delay_corner<span class="w"> </span>corner_ff<span class="w"> </span><span class="mf">0.97</span>
<span class="nv">set_timing_derate</span><span class="w"> </span><span class="o">-</span>data<span class="w"> </span><span class="o">-</span>cell_delay<span class="w"> </span><span class="o">-</span>late<span class="w"> </span><span class="o">-</span>delay_corner<span class="w"> </span>corner_ff<span class="w"> </span><span class="mf">1.03</span>
<span class="nv">set_timing_derate</span><span class="w"> </span><span class="o">-</span>clock<span class="w"> </span><span class="o">-</span>cell_delay<span class="w"> </span><span class="o">-</span>late<span class="w"> </span><span class="o">-</span>delay_corner<span class="w"> </span>corner_ff<span class="w"> </span><span class="mf">1.03</span>
<span class="nv">set_timing_derate</span><span class="w"> </span><span class="o">-</span>data<span class="w"> </span><span class="o">-</span>net_delay<span class="w"> </span><span class="o">-</span>early<span class="w"> </span><span class="o">-</span>delay_corner<span class="w"> </span>corner_ff<span class="w"> </span><span class="mf">0.97</span>
<span class="nv">set_timing_derate</span><span class="w"> </span><span class="o">-</span>clock<span class="w"> </span><span class="o">-</span>net_delay<span class="w"> </span><span class="o">-</span>early<span class="w"> </span><span class="o">-</span>delay_corner<span class="w"> </span>corner_ff<span class="w"> </span><span class="mf">0.97</span>
<span class="nv">set_timing_derate</span><span class="w"> </span><span class="o">-</span>data<span class="w"> </span><span class="o">-</span>net_delay<span class="w"> </span><span class="o">-</span>late<span class="w"> </span><span class="o">-</span>delay_corner<span class="w"> </span>corner_ff<span class="w"> </span><span class="mf">1.03</span>
<span class="nv">set_timing_derate</span><span class="w"> </span><span class="o">-</span>clock<span class="w"> </span><span class="o">-</span>net_delay<span class="w"> </span><span class="o">-</span>late<span class="w"> </span><span class="o">-</span>delay_corner<span class="w"> </span>corner_ff<span class="w"> </span><span class="mf">1.03</span>

<span class="c"># Create analysis views</span>
<span class="nv">create_analysis_view</span><span class="w"> </span><span class="o">-</span>name<span class="w"> </span>view_ss<span class="w"> </span><span class="o">-</span>constraint_mode<span class="w"> </span>constraint_mode<span class="w"> </span><span class="o">-</span>delay_corner<span class="w"> </span>corner_ss
<span class="nv">create_analysis_view</span><span class="w"> </span><span class="o">-</span>name<span class="w"> </span>view_tt<span class="w"> </span><span class="o">-</span>constraint_mode<span class="w"> </span>constraint_mode<span class="w"> </span><span class="o">-</span>delay_corner<span class="w"> </span>corner_tt
<span class="nv">create_analysis_view</span><span class="w"> </span><span class="o">-</span>name<span class="w"> </span>view_ff<span class="w"> </span><span class="o">-</span>constraint_mode<span class="w"> </span>constraint_mode<span class="w"> </span><span class="o">-</span>delay_corner<span class="w"> </span>corner_ff

<span class="nv">set_analysis_view</span><span class="w"> </span><span class="o">-</span>setup<span class="w"> </span><span class="k">{</span><span class="nv">view_ss</span><span class="w"> </span>view_tt<span class="k">}</span><span class="w"> </span><span class="o">-</span>hold<span class="w"> </span><span class="k">{</span><span class="nv">view_ff</span><span class="w"> </span>view_tt<span class="k">}</span>
</code></pre></div>
</li>
<li>
<p>数字模块导入virtuoso</p>
</li>
<li>
<p><strong>Verilog In</strong></p>
<p><img src="assets/image-20250902225343813.png" alt="image-20250902225343813" style="zoom: 85%;" /></p>
<p><img src="assets/image-20250902225401920.png" alt="image-20250902225401920" style="zoom: 90%;" /></p>
</li>
<li>
<p><strong>stream In</strong> 导入layout</p>
</li>
<li>
<p><img src="assets/image-20250902225604207.png" alt="image-20250902225604207" style="zoom: 80%;" /></p>
<p>然后点击<code>More Options</code></p>
<p><img alt="image-20250902225745937" src="../assets/image-20250902225745937.png" /></p>
<p><img alt="image-20250902225801272" src="../assets/image-20250902225801272.png" /></p>
</li>
<li>
<p>注意：</p>
</li>
<li>
<p>导出网表要导出电源和地，使用<code>-includePowerGround</code>, 这样才能在后续加pad的时候做lvs, 同时数字模块才能打上电源label后过lvs，否则：</p>
<p><img src="assets/image-20250902114306023.png" alt="image-20250902114306023" style="zoom: 65%;" /></p>
<p><img src="assets/image-20250902114257268.png" alt="image-20250902114257268" style="zoom: 80%;" /></p>
<p><img src="assets/image-20250902114336991.png" alt="image-20250902114336991" style="zoom: 85%;" /></p>
<p><img alt="image-20250902114507655" src="../assets/image-20250902114507655.png" /></p>
<p><img src="assets/image-20250902114354862.png" alt="image-20250902114354862" style="zoom: 85%;" /></p>
</li>
</ol>
<h4 id="_11">参考<a class="headerlink" href="#_11" title="Permanent link">&para;</a></h4>
<ul>
<li><a href="https://www.ebaina.com/articles/140000013451#:~:text=RTL设计实现时，尤其是算法RTL，综合阶段或者Place阶段遇到setup timing不满足时，我们可以通过插入pipeline的方式修改RTL来解决setup violation，但是hold timing vioation往往CTS后才能发现且只能通过后端修复。,遇到hold violation时检查以下几点： 首先，检查SDC约束； 其次，检查CTS阶段后clock skew是否合理范围内； 再次，对CTS友好的FloorPlan和Placement也非常重要；">修复Hold Violation的方法_专栏_易百纳技术社区</a></li>
<li><a href="https://www.cnblogs.com/li2000/p/18269818/IC-digital-Innovus-tcl">用脚本进行Innovus设计 - 白发戴花君莫笑 - 博客园</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/654322816">(56 封私信 / 80 条消息) 集成电路中的Physical Cells - 知乎</a></li>
</ul>
<h3 id="formality">Formality<a class="headerlink" href="#formality" title="Permanent link">&para;</a></h3>
<blockquote>
<p>这次没用了。。。</p>
</blockquote>
<h3 id="drc">DRC<a class="headerlink" href="#drc" title="Permanent link">&para;</a></h3>
<blockquote>
<p>DFM 和<a href="https://zhida.zhihu.com/search?content_id=259887039&amp;content_type=Article&amp;match_order=1&amp;q=DRC&amp;zhida_source=entity">DRC</a> 的区别在于，DRC 满足不了芯片大概率会废了，DFM 满足不了顶多是良率受损。所以有些关于DFM的DRC violation 可以选择waive掉</p>
</blockquote>
<h4 id="violation">忽略部分violation<a class="headerlink" href="#violation" title="Permanent link">&para;</a></h4>
<p>有很多violation需要在最后才能解决，前期calibre drc 可以选择忽略部分calibre</p>
<p><img src="assets/image-20250904225333032.png" alt="image-20250904225333032" style="zoom: 70%;" /></p>
<p><img src="assets/image-20250904225316636.png" alt="image-20250904225316636" style="zoom: 60%;" /></p>
<h4 id="_12">参考<a class="headerlink" href="#_12" title="Permanent link">&para;</a></h4>
<p><a href="https://zhuanlan.zhihu.com/p/1924235105657942639">芯片漫谈—— DFM是个什么东西 - 知乎</a></p>
<h3 id="lvs">LVS<a class="headerlink" href="#lvs" title="Permanent link">&para;</a></h3>
<p>导入了数字的schematic，然后添加drc rule文件就可以直接run了</p>
<blockquote>
<p>没有标准库的schematic无法做LVS？ 貌似也不是：</p>
<p><img alt="image-20250901170919173" src="../assets/image-20250901170919173.png" /></p>
</blockquote>
<p>如果有错，这几个都可以点开来检查：</p>
<p><img alt="image-20250905210526631" src="../assets/image-20250905210526631.png" /></p>
<p>要善用图解</p>
<p><img alt="image-20250906001601646" src="../assets/image-20250906001601646.png" /></p>
<h4 id="buglist">buglist<a class="headerlink" href="#buglist" title="Permanent link">&para;</a></h4>
<ol>
<li>ERC报错：check n/pwell_not_to_power/ground 或者 Warining: There is no data for layout net name</li>
</ol>
<p><img alt="image-20250905210720465" src="../assets/image-20250905210720465.png" /></p>
<p><img alt="image-20250906101917212" src="../assets/image-20250906101917212.png" /></p>
<p>不要看到笑脸就不管了，注意有时候ERC可能没过！</p>
<p><a href="https://www.kaixinspace.com/layout-erc-type/">一文搞懂版图ERC类型 - 藍色天空</a></p>
<p><img alt="image-20250906102108328" src="../assets/image-20250906102108328.png" /></p>
<p>填上对应的电源和地，如果有数字地和模拟地，就分别填上比如“AVDD DVDD”</p>
<ol>
<li>check floating</li>
</ol>
<p><img alt="image-20250906112838639" src="../assets/image-20250906112838639.png" /></p>
<p>这种情况是可以的，没问题可以waive</p>
<h4 id="_13">参考<a class="headerlink" href="#_13" title="Permanent link">&para;</a></h4>
<p><a href="https://blog.csdn.net/weixin_44729325/article/details/132030722">virtuoso中数模混合版图的lvs教程_版图lvs教程-CSDN博客</a></p>
<h3 id="startrc">StartRC<a class="headerlink" href="#startrc" title="Permanent link">&para;</a></h3>
<blockquote>
<p>注意有很多提取spef的方式
<a href="https://blog.csdn.net/weixin_44996615/article/details/149334506">后仿XRC、QRC 和 StarRC 的区别与联系_pex提取工具qrc-CSDN博客</a></p>
<p><code>QRC</code>可以直接在innovus上用, 不过这次更具博客做一直报错没有解决😭</p>
<p>starRC可根据<code>数字集成电路课程设计</code>提到的脚本做，但是貌似一般PDK都会给相关脚本和文档，看了一下很复杂，没搞明白，不知道和课设的方法有什么区别。</p>
</blockquote>
<p>输入：<em>.map</em>, <em>.nxtgrd</em>, <em>所有.lef</em>, <em>.def</em></p>
<p>输出: <em>.spef/.spf</em></p>
<p>脚本示例</p>
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/bash</span>
<span class="nb">cd</span><span class="w"> </span>../runspace
StarXtract<span class="w"> </span>-clean<span class="w"> </span>../scripts/starrc_bst_spef.tcl
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="o">*</span><span class="w"> </span><span class="nv">Library</span><span class="w"> </span>and<span class="w"> </span>design
<span class="nv">BLOCK</span><span class="w">                       </span><span class="o">:</span><span class="w"> </span>mydsm

<span class="o">*</span><span class="w"> </span><span class="nv">Extraction</span>
<span class="nv">EXTRACTION</span><span class="w">                  </span><span class="o">:</span><span class="w"> </span>RC
<span class="nv">COUPLE_TO_GROUND</span><span class="w">            </span><span class="o">:</span><span class="w"> </span>YES
<span class="nv">REDUCTION</span><span class="w">                   </span><span class="o">:</span><span class="w"> </span>YES

<span class="o">*</span><span class="w"> </span><span class="nv">Processing</span>
<span class="nv">STAR_DIRECTORY</span><span class="w">              </span><span class="o">:</span><span class="w"> </span><span class="o">/</span>SM05<span class="o">/</span>home<span class="o">/</span>phd2024<span class="o">/</span>phd202411094979<span class="o">/</span>project<span class="o">/</span>cpicp25<span class="o">/</span>digtal<span class="o">/</span>starRC<span class="o">/</span>runspace<span class="o">/</span>bst
<span class="nv">NETS</span><span class="w">                        </span><span class="o">:</span><span class="w"> </span><span class="o">*</span><span class="w"> </span>
<span class="o">*</span>MODE<span class="w">                       </span><span class="o">:</span><span class="w"> </span><span class="mi">200</span>
<span class="nv">SKIP_CELLS</span><span class="w">                  </span><span class="o">:</span><span class="w"> </span><span class="o">*</span><span class="w"> </span>

<span class="o">*</span>LEF
<span class="nv">LEF_FILE</span><span class="w">                    </span><span class="o">:</span><span class="w"> </span><span class="o">/</span>SM05<span class="o">/</span>home<span class="o">/</span>phd2024<span class="o">/</span>phd202411094979<span class="o">/</span>project<span class="o">/</span>cpicp25<span class="o">/</span>pdk<span class="o">/</span>SCC28NHKCP_TF_V0p2<span class="o">/</span>innovus<span class="o">/</span>hd<span class="o">/</span>tf_mtt<span class="o">/</span>scc28n_1p9m_7ic_1tmc_1mttc_alpa2.lef<span class="w"> </span>
LEF_FILE<span class="w">                    </span><span class="o">:</span><span class="w"> </span><span class="o">/</span>SM05<span class="o">/</span>home<span class="o">/</span>phd2024<span class="o">/</span>phd202411094979<span class="o">/</span>project<span class="o">/</span>cpicp25<span class="o">/</span>pdk<span class="o">/</span>STDCELL<span class="o">/</span>SCC28NHKCP_HDC30P140_RVT_V0p2<span class="o">/</span>lef<span class="o">/</span>macro<span class="o">/</span>scc28nhkcp_hdc30p140_rvt.lef<span class="w"> </span>
LEF_FILE<span class="w">                    </span><span class="o">:</span><span class="w"> </span><span class="o">/</span>SM05<span class="o">/</span>home<span class="o">/</span>phd2024<span class="o">/</span>phd202411094979<span class="o">/</span>project<span class="o">/</span>cpicp25<span class="o">/</span>pdk<span class="o">/</span>STDCELL<span class="o">/</span>SCC28NHKCP_HDC30P140_RVT_V0p2<span class="o">/</span>lef<span class="o">/</span>macro<span class="o">/</span>scc28nhkcp_hdc30p140_rvt_ant.lef
<span class="nv">TOP_DEF_FILE</span><span class="w">                </span><span class="o">:</span><span class="w"> </span><span class="o">/</span>SM05<span class="o">/</span>home<span class="o">/</span>phd2024<span class="o">/</span>phd202411094979<span class="o">/</span>project<span class="o">/</span>cpicp25<span class="o">/</span>digtal<span class="o">/</span>back<span class="o">/</span>outputs<span class="o">/</span>mydsm.def

<span class="o">*</span><span class="nv">Netlist</span>
<span class="nv">SUMMARY_FILE</span><span class="w">                </span><span class="o">:</span><span class="w"> </span>..<span class="o">/</span>reports<span class="o">/</span>star_bst.summary
<span class="nv">NETLIST_FILE</span><span class="w">                </span><span class="o">:</span><span class="w"> </span>..<span class="o">/</span>outputs<span class="o">/</span>mydsm_bst.spef
<span class="nv">NETLIST_FORMAT</span><span class="w">              </span><span class="o">:</span><span class="w"> </span>SPEF

<span class="o">*</span><span class="nv">Extraction</span><span class="w"> </span>
TCAD_GRD_FILE<span class="w">               </span><span class="o">:</span><span class="w"> </span><span class="o">/</span>SM05<span class="o">/</span>home<span class="o">/</span>phd2024<span class="o">/</span>phd202411094979<span class="o">/</span>project<span class="o">/</span>cpicp25<span class="o">/</span>pdk<span class="o">/</span>SMIC_CCIStarRC_28HKCplusLG_0925_1P9M_7Ic_1TMc_1MTTc_ALPA2_V1.0_REV5_1<span class="o">/</span>NXTGRD<span class="o">/</span>StarRC_28HKCplus_1P9M_7Ic_1TMc_1MTTc_ALPA2_RCMIN.nxtgrd
<span class="nv">MAPPING_FILE</span><span class="w">                </span><span class="o">:</span><span class="w"> </span><span class="o">/</span>SM05<span class="o">/</span>home<span class="o">/</span>phd2024<span class="o">/</span>phd202411094979<span class="o">/</span>project<span class="o">/</span>cpicp25<span class="o">/</span>pdk<span class="o">/</span>SMIC_CCIStarRC_28HKCplusLG_0925_1P9M_7Ic_1TMc_1MTTc_ALPA2_V1.0_REV5_1<span class="o">/</span>CCI_flow_for_CUI<span class="o">/</span>StarRC_28HKCplus_1P9M_7Ic_1TMc_1MTTc_ALPA2_cell.map
<span class="nv">OPERATING_TEMPERATURE</span><span class="w">       </span><span class="o">:</span><span class="w"> </span><span class="o">-</span><span class="mi">40</span>
</code></pre></div>
<blockquote>
<p>[!CAUTION]</p>
<p>这个脚本本来想在<code>.sh</code>里面设置环境变量然后在<code>.tcl</code>中使用的，但是报错了，找不到文件，不知道为什么。留给后人解决吧</p>
</blockquote>
<h4 id="_14">参考<a class="headerlink" href="#_14" title="Permanent link">&para;</a></h4>
<ul>
<li><a href="https://blog.csdn.net/zxhtiger84/article/details/135001829">【StarRC】StarRC抽取寄生RC-CSDN博客</a></li>
</ul>
<h3 id="primetime">PrimeTime<a class="headerlink" href="#primetime" title="Permanent link">&para;</a></h3>
<h3 id="_15">后仿<a class="headerlink" href="#_15" title="Permanent link">&para;</a></h3>
<blockquote>
<p>如果是单纯的数字模块可以在VCS上面跑</p>
<p>如果是数模混仿的一部分，感觉在virtuoso上跑比较好</p>
</blockquote>
<h4 id="vcs-">VCS-纯数字<a class="headerlink" href="#vcs-" title="Permanent link">&para;</a></h4>
<p><img alt="image-20250903160724253" src="../assets/image-20250903160724253.png" /></p>
<p>使用和前仿相同的testbench，主要区别是反标时序</p>
<h4 id="virtuoso">virtuoso<a class="headerlink" href="#virtuoso" title="Permanent link">&para;</a></h4>
<blockquote>
<p>参考数模混合流程中的后仿方法</p>
</blockquote>
<h2 id="_16">数字芯片流片工具链<a class="headerlink" href="#_16" title="Permanent link">&para;</a></h2>
<p><img src="assets/image-20250609120413875.png" alt="image-20250609120413875" style="zoom:50%;" /></p>
<h3 id="vcs">VCS<a class="headerlink" href="#vcs" title="Permanent link">&para;</a></h3>
<h4 id="_17">简介<a class="headerlink" href="#_17" title="Permanent link">&para;</a></h4>
<ul>
<li>Synopsys</li>
<li>要VCS与Verdi联合仿真，需要在testbench里面必须加入<code>`ifdef FSDB</code>到<code>endif</code>的代码，这样才能生成fsdb文件提供Verdi读取，不然不会输出波形</li>
</ul>
<h4 id="_18">运行脚本示例<a class="headerlink" href="#_18" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/bash</span>

<span class="c1"># Create simulation directory if it doesn&#39;t exist</span>
mkdir<span class="w"> </span>-p<span class="w"> </span>../rtl/sim

<span class="c1"># Go to simulation directory</span>
<span class="nb">cd</span><span class="w"> </span>../rtl/sim

<span class="c1"># Compile RTL and testbench</span>
vcs<span class="w"> </span>-full64<span class="w"> </span>-sverilog<span class="w"> </span>-timescale<span class="o">=</span>1ns/1ps<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-debug_all<span class="w"> </span>-kdb<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>+define+FSDB<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-R<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-P<span class="w"> </span><span class="nv">$VERDI_HOME</span>/share/PLI/VCS/LINUX64/novas.tab<span class="w"> </span><span class="se">\</span>
<span class="w">    </span><span class="nv">$VERDI_HOME</span>/share/PLI/VCS/LINUX64/pli.a<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>../../rtl/spi_1kb_reg.v<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>../../rtl/tb_spi_1kb_reg.v<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-o<span class="w"> </span>sim_spi_1kb_reg

<span class="c1"># Run simulation</span>
./sim_spi_1kb_reg
<span class="c1"># ./sim_spi_1kb_reg -gui</span>
</code></pre></div>
<h4 id="command">command<a class="headerlink" href="#command" title="Permanent link">&para;</a></h4>
<ul>
<li>AI to generate scripts is all you need</li>
</ul>
<h4 id="_19">参考<a class="headerlink" href="#_19" title="Permanent link">&para;</a></h4>
<p><a href="https://blog.csdn.net/JasonFuyz/article/details/107508893">Linux下VCS与Verdi联合仿真简易教程及例子示范_vcs和verdi-CSDN博客</a></p>
<h3 id="dc">DC<a class="headerlink" href="#dc" title="Permanent link">&para;</a></h3>
<h4 id="_20">简介<a class="headerlink" href="#_20" title="Permanent link">&para;</a></h4>
<h4 id="_21">流程<a class="headerlink" href="#_21" title="Permanent link">&para;</a></h4>
<p><img alt="image-20250409095425550" src="../assets/image-20250409095425550.png" /></p>
<p><img alt="image-20250409095217905" src="../assets/image-20250409095217905.png" /></p>
<p><img alt="image-20250409095238829" src="../assets/image-20250409095238829.png" /></p>
<h4 id="_22">基本脚本<a class="headerlink" href="#_22" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="c">## 设置工艺库</span>
<span class="k">if</span><span class="w"> </span><span class="k">{</span><span class="o">!</span><span class="k">[</span><span class="nb">info</span><span class="w"> </span>exists<span class="w"> </span>syn_dc_path<span class="k">]}</span><span class="w"> </span><span class="k">{</span>
<span class="w">    </span><span class="k">set</span><span class="w"> </span>syn_dc_path<span class="w"> </span><span class="s2">&quot;/SM05/home/phd2024/phd202411094979/project/testflow/syn_dc&quot;</span>
<span class="k">}</span>
<span class="k">set</span><span class="w"> </span>target_library<span class="w"> </span><span class="s2">&quot;$syn_dc_path/../pdk/STDCELL/SCC28NHKCP_12T25OD33_RVT_V0p2/liberty/3.3v/scc28nhkcp_12t25od33_rvt_tt_v3p3_25c_basic.db&quot;</span>
<span class="k">set</span><span class="w"> </span>link_library<span class="w"> </span><span class="s2">&quot;* $target_library&quot;</span>
<span class="c"># 如果你使用脚本模式而不使用 GUI,此库可不指定 Symbol library</span>
<span class="k">set</span><span class="w"> </span>symbol_library<span class="w"> </span><span class="s2">&quot;scc28nhkcp_12t25od33_rvt.sdb&quot;</span><span class="w"> </span>

<span class="err">##</span><span class="w"> </span>检查库是否正确加载
<span class="nv">list_libs</span>

<span class="c">## 设置设计参数</span>
<span class="k">set</span><span class="w"> </span>design_name<span class="w"> </span><span class="s2">&quot;gcd&quot;</span>
<span class="k">set</span><span class="w"> </span>rtl_files<span class="w"> </span><span class="s2">&quot;$syn_dc_path/../rtl/gcd.v&quot;</span>

<span class="c">## analyze命令用于读取并分析RTL源代码 # -format verilog 指定输入文件为Verilog格式 # $rtl_files 包含了要分析的RTL文件路径</span>
<span class="nv">analyze</span><span class="w"> </span><span class="o">-</span>format<span class="w"> </span>verilog<span class="w"> </span><span class="nv">$rtl_files</span>
<span class="c">## elaborate命令用于根据analyze命令分析的RTL源代码,构建设计的内部数据结构 # 它会展开所有的层次结构,解析所有的模块实例,建立设计的完整网表模型 # $design_name指定要elaborate的顶层模块名</span>
<span class="nv">elaborate</span><span class="w"> </span><span class="nv">$design_name</span>
<span class="c">## 检查设计是否正确加载</span>
<span class="nv">list_designs</span>

<span class="c">## 设置基本的设计约束</span>
<span class="nv">create_clock</span><span class="w"> </span><span class="o">-</span>period<span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">-</span>name<span class="w"> </span>clk<span class="w"> </span><span class="k">[</span><span class="nv">get_ports</span><span class="w"> </span>clk<span class="k">]</span>
<span class="nv">set_input_delay</span><span class="w"> </span><span class="o">-</span>clock<span class="w"> </span>clk<span class="w"> </span><span class="mf">0.5</span><span class="w"> </span><span class="k">[</span><span class="nv">all_inputs</span><span class="k">]</span>
<span class="nv">set_output_delay</span><span class="w"> </span><span class="o">-</span>clock<span class="w"> </span>clk<span class="w"> </span><span class="mf">0.5</span><span class="w"> </span><span class="k">[</span><span class="nv">all_outputs</span><span class="k">]</span>
<span class="nv">set_max_area</span><span class="w"> </span><span class="mi">0</span>
<span class="c">### 检查时钟约束是否正确设置</span>
<span class="nv">report_clocks</span>

<span class="c">## 编译设计</span>
<span class="nv">compile</span>

<span class="c">## 生成报告</span>
<span class="nv">report_timing</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nv">$syn_dc_path</span><span class="o">/</span>reports<span class="o">/</span>timing.rpt
<span class="nv">report_area</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nv">$syn_dc_path</span><span class="o">/</span>reports<span class="o">/</span>area.rpt
<span class="nv">report_power</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nv">$syn_dc_path</span><span class="o">/</span>reports<span class="o">/</span>power.rpt

<span class="c">## 保存网表</span>
<span class="nv">write</span><span class="w"> </span><span class="o">-</span>format<span class="w"> </span>verilog<span class="w"> </span><span class="o">-</span>hierarchy<span class="w"> </span><span class="o">-</span>output<span class="w"> </span><span class="nv">$syn_dc_path</span><span class="o">/</span>outputs<span class="o">/</span><span class="nv">${design_name}</span>_syn.v
<span class="nv">write_sdc</span><span class="w"> </span><span class="o">-</span>version<span class="w"> </span><span class="mf">2.0</span><span class="w"> </span><span class="nv">$syn_dc_path</span><span class="o">/</span>outputs<span class="o">/</span><span class="nv">${design_name}</span>_syn.sdc<span class="w"> </span>
</code></pre></div>
<h4 id="_23">时序约束<a class="headerlink" href="#_23" title="Permanent link">&para;</a></h4>
<p>时序路径是一个点到点的数据通路， 数据沿着时序路径进行传递。每条时序路径有一个起点(Startpoint)和一个终点(Endpoint)。</p>
<p>四条路径：</p>
<p><img alt="image-20250411110047345" src="../assets/image-20250411110047345.png" /></p>
<p><img alt="image-20250411110238215" src="../assets/image-20250411110238215.png" /></p>
<p>详细查看参考</p>
<h5 id="_24">实战<a class="headerlink" href="#_24" title="Permanent link">&para;</a></h5>
<p><img alt="image-20250411111304568" src="../assets/image-20250411111304568.png" /></p>
<h6 id="_25">时钟的约束（寄存器和寄存器之间的路径约束）<a class="headerlink" href="#_25" title="Permanent link">&para;</a></h6>
<div class="highlight"><pre><span></span><code><span class="nv">create_clock</span><span class="w"> </span><span class="o">-</span>period<span class="w"> </span>my_period_value<span class="w"> </span><span class="k">[</span><span class="nv">get_ports</span><span class="w"> </span>my_clk<span class="k">]</span>
<span class="c">#时钟源到时钟端口的（最大）延时</span>
<span class="nv">set_clock_latency</span><span class="w"> </span><span class="o">-</span>source<span class="w"> </span><span class="o">-</span>max<span class="w"> </span>my_max_latency<span class="w"> </span><span class="k">[</span><span class="nv">get</span><span class="w"> </span>clocks<span class="w"> </span>my_clk<span class="k">]</span>
<span class="c">#时钟端口到寄存器的时钟端口延时</span>
<span class="nv">set_clock_latency</span><span class="w"> </span><span class="o">-</span>max<span class="w"> </span><span class="o">-</span>my_max_latency<span class="w"> </span><span class="k">[</span><span class="nv">get_clocks</span><span class="w"> </span>clk<span class="k">]</span>
<span class="c">#时钟抖动与偏移</span>
<span class="c">## 首先是时钟偏移为±30ps,则有可能是前级时钟往后移30ps，同时本级时钟往前移30ps，对于建立时间偏移的不确定因素为30+30 =60ps；</span>
<span class="c">## 然后是时钟抖动，前级的时钟抖动影响不到本级，因此只需要考虑本级的时钟抖动，由于是考虑建立时间，因此考虑本级时钟往前抖40ps，即对于建立时间抖动的不确定因素为40ps；</span>
<span class="c">## 最后是要留50ps的建立时间不确定余量；</span>
<span class="c">## 因此对于建立时间，总的不确定时间为60+40+50=150ps=0.15ns:</span>
<span class="nv">set_clock_uncertainty</span><span class="w"> </span><span class="o">-</span>setup<span class="w"> </span><span class="mf">0.15</span><span class="w"> </span><span class="k">[</span><span class="nv">get_clocks</span><span class="w"> </span>clk<span class="k">]</span>
<span class="c">#时钟转换时间</span>
<span class="nv">set_clock_transition</span><span class="w"> </span><span class="mf">0.12</span><span class="w"> </span><span class="k">[</span><span class="nv">get_clocks</span><span class="w"> </span>clk<span class="k">]</span>
</code></pre></div>
<h5 id="_26">输入/输出延迟约束（输入路径的约束）<a class="headerlink" href="#_26" title="Permanent link">&para;</a></h5>
<p>没看懂，感觉没道理，他怎么知道<code>dalay of S</code> 和 <code>register set up time</code>"：<a href="https://www.cnblogs.com/IClearner/p/6624722.html">Tcl与Design Compiler （六）——基本的时序路径约束 - IC_learner - 博客园</a></p>
<div class="highlight"><pre><span></span><code><span class="nv">set_input_delay</span>
<span class="nv">set_output_delay</span>
</code></pre></div>
<h4 id="_27">面积约束<a class="headerlink" href="#_27" title="Permanent link">&para;</a></h4>
<p>如果不设置面积的约束，Design Compiler将<strong>做最小限度的面积优化</strong></p>
<p>设置了面积的约束后，DC将在达到面积约束目标时退出的面积优化。如果设置面积的约束为“0" , DC将为面积做优化直到再继续优化也不能有大的效果。这时，DC将中止优化。</p>
<p>注意，对于很大(如百万门电路)的设计，如将面积的约束设置为“0" , DC可能要花很长的时间为设计做面积优化。综合时，运行的时间很长</p>
<p>在超深亚微米(deep sub-micro)工艺中，一般说来，面积并不是设计的主要目标，对设计的成本影响不大。因此，我们在初次优化时，可以不设置面积的约束。</p>
<div class="highlight"><pre><span></span><code><span class="nv">set_max_area</span><span class="w"> </span>my_area
</code></pre></div>
<h4 id="_28">驱动强度、电容负载约束<a class="headerlink" href="#_28" title="Permanent link">&para;</a></h4>
<p>这些约束是要经验的，一方面是对I/O口进行约束，属于I/O口的约束，为时序约束与时序分析提供了路径，更是为输入/输出路径延时约束的精确性提供保证；一方面是对I/O口对外的环境进行约束，可以算是<strong>属于环境约束</strong></p>
<h4 id="_29">设置设计规则约束<a class="headerlink" href="#_29" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="nv">set_max_transition</span>
<span class="nv">set_max_fanout</span>
<span class="nv">set_max_capacitance</span>
</code></pre></div>
<h5 id="_30">参考<a class="headerlink" href="#_30" title="Permanent link">&para;</a></h5>
<p><a href="https://www.cnblogs.com/IClearner/p/6624722.html">Tcl与Design Compiler （六）——基本的时序路径约束 - IC_learner - 博客园</a></p>
<h4 id="_31">综合编译<a class="headerlink" href="#_31" title="Permanent link">&para;</a></h4>
<p>电路综合优化包括三个阶段</p>
<p><img alt="image-20250411120311622" src="../assets/image-20250411120311622.png" /></p>
<p>详细可看：<a href="https://www.cnblogs.com/IClearner/p/6636176.html">Tcl与Design Compiler （八）——DC的逻辑综合与优化 - IC_learner - 博客园</a></p>
<p>comand: <code>compile</code></p>
<ul>
<li><strong>当违规得比较严重时</strong>，也就是<strong>时序的违规（timing violation）在时钟周期的25%以上</strong>时，就需要重新修改RTL代码了。</li>
<li><strong>时序违规在25%以下</strong>，有下面的时序优化方法：</li>
<li>
<p>使用<code>compile_ultra</code>命令（在拓扑模式下运行）</p>
<ul>
<li><strong>compile_ultra</strong>跟<strong>compile</strong>一样，是进行编译的命令。compile_ultra命令适用于时序要求比较严格，高性能的设计。使用该命令可以得到更好的<strong>延迟质量( delay QoR )</strong>，特别适用于高性能的<strong>算术电路</strong>优化。该命令非常容易使用，它自动设置所有所需的选项和变量。</li>
<li><strong>compile_ultra</strong>命令包含了<strong>以时间为中心</strong>的优化算法，在编辑过程中使用的算法有:<strong>A</strong>以<strong>时间为驱动</strong>的高级优化(Timing driven high-level optimization);<strong>B</strong>为<strong>算术运算</strong>选择适当的宏单元结构;<strong>C</strong>从DesignWare库中<strong>选择最好的数据通路</strong>实现电路;<strong>D</strong>映射<strong>宽扇入(Wide-fanin)门</strong>以减少逻辑级数;<strong>E</strong>积极进取地使用<strong>逻辑复制</strong>进行负载隔离;<strong>F</strong>在<strong>关键路径</strong>自动<strong>取消层次划分</strong>(Auto-ungrouping of hierarchies)。</li>
<li><img alt="image-20250411121134134" src="../assets/image-20250411121134134.png" /></li>
</ul>
</li>
<li>
<p><strong>自顶向下（Top-Down）：</strong> 整体优化，适用于中小型设计</p>
</li>
<li><strong>自底向上（Bottom-Up）：</strong> 分层编译，适合大型设计==（需设置 dont_touch 保护子模块）==</li>
<li></li>
</ul>
<h4 id="notes">notes<a class="headerlink" href="#notes" title="Permanent link">&para;</a></h4>
<h5 id="target_library-link_library">target_library 和 link_library 的区别<a class="headerlink" href="#target_library-link_library" title="Permanent link">&para;</a></h5>
<p>target_library:</p>
<ul>
<li>
<p>这是综合工具最终映射到的目标工艺库, 在门级优化及映射的时候提供生成网表的 cell,即DC 用于创建实际电路的库。</p>
</li>
<li>
<p>包含实际要使用的标准单元（如 SMIC28 的单元）</p>
</li>
<li>
<p>综合工具会优先使用这个库中的单元</p>
</li>
<li>
<p>通常只设置一个目标库</p>
</li>
</ul>
<p>link_library:</p>
<ul>
<li>
<p>这是链接库，用于解析设计中引用的所有单元. 提供设计网表中的 cell，可以跟target_library使用同一个库，但是 DC 不用 link library中的 cell 来综合设计</p>
</li>
<li>
<p>可以包含多个库文件</p>
</li>
<li>
<p>必须包含 target_library 中指定的库</p>
</li>
<li>此当读入的文件是门级网表（比如用到了IP核的网表）时，需要把 link library 设成指向生成该门级网表的目标库，否则 DC 因不知道网表中门单元电路的功能而报错。</li>
<li>
<p>如果需要将已有的设计从工艺A转到工艺B时，可以将当前的单元综合库A设为link_library，而将单元综合库B设为target_library，重新映射一下就可以了。</p>
</li>
<li>
<p>通常包含：</p>
</li>
<li>目标工艺库</li>
<li>内存编译器生成的库</li>
<li>IP 核的库</li>
<li>其他特殊单元的库</li>
</ul>
<h5 id="link_library">link_library中的“*”<a class="headerlink" href="#link_library" title="Permanent link">&para;</a></h5>
<p><code>*</code>的具体含义：</p>
<ul>
<li>
<p>代表当前在 Design Compiler 内存中已经加载的设计</p>
</li>
<li>
<p>包括你通过 analyze 和 elaborate 命令读入的 RTL 设计</p>
</li>
<li>
<p>也包括综合过程中生成的中间设计</p>
</li>
<li>为什么需要 *：当 Design Compiler 进行链接（linking）时，它需要能够找到所有被引用的单元，这些单元可能来自：</li>
<li>工艺库（如 scc28nhkcp_12t25od33_rvt_tt_v3p3_25c_basic.db）</li>
<li>内存中的设计（<em>）</em></li>
<li>其他库（如 memory_compiler.db, ip_core.db）</li>
</ul>
<h5 id="_32">两种编译策略<a class="headerlink" href="#_32" title="Permanent link">&para;</a></h5>
<p><code>top down</code> &amp; <code>bottom up</code></p>
<p><img alt="image-20250409102234449" src="../assets/image-20250409102234449.png" /></p>
<h4 id="command_1">command补充解释<a class="headerlink" href="#command_1" title="Permanent link">&para;</a></h4>
<h5 id="list_libs">list_libs<a class="headerlink" href="#list_libs" title="Permanent link">&para;</a></h5>
<div class="highlight"><pre><span></span><code><span class="nv">Logical</span><span class="w"> </span>Libraries:
<span class="nv">-------------------------------------------------------------------------</span>
<span class="nv">Library</span><span class="w">         </span>File<span class="w">                    </span>Path
<span class="nv">-------</span><span class="w">         </span><span class="o">----</span><span class="w">                    </span><span class="o">----</span>
<span class="w">  </span><span class="nv">scc28nhkcp_12t25od33_rvt_tt_v3p3_25c_basic</span><span class="w"> </span>scc28nhkcp_12t25od33_rvt_tt_v3p3_25c_basic.db<span class="w"> </span><span class="o">/</span>SM05<span class="o">/</span>home<span class="o">/</span>phd2024<span class="o">/</span>phd202411094979<span class="o">/</span>project<span class="o">/</span>testflow<span class="o">/</span>pdk<span class="o">/</span>STDCELL<span class="o">/</span>SCC28NHKCP_12T25OD33_RVT_V0p2<span class="o">/</span>liberty<span class="o">/</span><span class="mf">3.3</span>v
<span class="w">  </span><span class="nv">gtech</span><span class="w">         </span>gtech.db<span class="w">                </span><span class="o">/</span>SM01<span class="o">/</span>eda<span class="o">/</span>synopsys<span class="o">/</span>syn<span class="o">/</span>R-2020.09-SP4<span class="o">/</span>libraries<span class="o">/</span>syn
<span class="w">  </span><span class="nv">standard.sldb</span><span class="w"> </span>standard.sldb<span class="w">           </span><span class="o">/</span>SM01<span class="o">/</span>eda<span class="o">/</span>synopsys<span class="o">/</span>syn<span class="o">/</span>R-2020.09-SP4<span class="o">/</span>libraries<span class="o">/</span>syn
</code></pre></div>
<ul>
<li>gtech.db (Generic Technology Library):</li>
<li>这是 Synopsys 提供的一个通用技术库</li>
<li>包含基本的逻辑门单元（如 AND, OR, NOT, NAND, NOR 等）</li>
<li>用于在综合的早期阶段，当设计还没有映射到具体工艺库时使用</li>
<li>提供基本的时序和面积信息</li>
<li>路径：/SM01/eda/synopsys/syn/R-2020.09-SP4/libraries/syn</li>
<li>standard.sldb (Standard Symbol Library):</li>
<li>这是符号库文件</li>
<li>包含标准单元的图形符号定义</li>
<li>用于 Design Compiler 的图形界面显示</li>
<li>提供单元的可视化表示</li>
<li>路径：/SM01/eda/synopsys/syn/R-2020.09-SP4/libraries/syn</li>
</ul>
<h5 id="search-path">search path<a class="headerlink" href="#search-path" title="Permanent link">&para;</a></h5>
<p>可以通过<code>search_path</code>减少文件路径前缀</p>
<div class="highlight"><pre><span></span><code><span class="c"># 1. 首先设置基本路径</span>
<span class="k">set</span><span class="w"> </span>search_path<span class="w"> </span><span class="k">[</span><span class="nb">list</span><span class="w"> </span><span class="s2">&quot;.&quot;</span><span class="k">]</span>

<span class="c"># 2. 添加工艺库路径</span>
<span class="nb">lappend</span><span class="w"> </span>search_path<span class="w"> </span><span class="s2">&quot;pdk/STDCELL/SCC28NHKCP_12T25OD33_RVT_V0p2/liberty/3.3v&quot;</span>
<span class="nb">lappend</span><span class="w"> </span>search_path<span class="w"> </span><span class="s2">&quot;pdk/STDCELL/SCC28NHKCP_12T25OD33_RVT_V0p2/verilog&quot;</span>

<span class="c"># 3. 添加设计文件路径</span>
<span class="nb">lappend</span><span class="w"> </span>search_path<span class="w"> </span><span class="s2">&quot;rtl&quot;</span>

<span class="c"># 4. 添加其他必要路径</span>
<span class="nb">lappend</span><span class="w"> </span>search_path<span class="w"> </span><span class="s2">&quot;ip&quot;</span>
<span class="nb">lappend</span><span class="w"> </span>search_path<span class="w"> </span><span class="s2">&quot;memory&quot;</span>
</code></pre></div>
<h5 id="set_addribute">set_addribute<a class="headerlink" href="#set_addribute" title="Permanent link">&para;</a></h5>
<p>许多设计者都会抱怨工艺库中对单元的DRC属性设置不当，这是由于库的能力是有限的所致。对于一个设计，综合库的DRC设置可能很合适，而对于另一个设计就可能不太合适。这时候，需要设<strong>计者对综合库进行“剪裁”</strong>。当然，这种<strong>“剪裁”必须比库中的定义更为严格</strong>。如将一个库中buffd0的Z端的max_fanout由4.0改为2.0的命令：</p>
<p><code>set_addribute  find(pin, ex25/BUFFDO/Z)  max_fanout  2.0</code></p>
<h5 id="change_names">change_names<a class="headerlink" href="#change_names" title="Permanent link">&para;</a></h5>
<p><code>change_names</code> 命令是 Design Compiler 中的一个重要功能，主要用于修改设计中的名称以符合特定硬件描述语言或工具的命名规则。具体作用如下：</p>
<p>在脚本中的 change_names -rules verilog -hierarchy 命令：</p>
<ol>
<li>
<p>名称标准化：</p>
</li>
<li>
<p>-rules verilog 参数指定使用 Verilog HDL 的命名规则</p>
</li>
<li>
<p>确保所有的信号、模块和单元名称符合 Verilog 语法规范</p>
</li>
<li>
<p>解决命名冲突：</p>
</li>
<li>
<p>在综合过程中，编译器可能生成不符合目标语言规范的名称</p>
</li>
<li>
<p>可能存在保留字冲突、非法字符或其他命名问题</p>
</li>
<li>
<p>层次结构处理：</p>
</li>
<li>
<p>-hierarchy 参数表示应用于整个设计层次结构</p>
</li>
<li>
<p>不仅修改顶层模块名称，还递归地处理所有子模块和信号名称</p>
</li>
<li>
<p>写出网表前的准备：</p>
</li>
<li>
<p>这个命令通常在使用 write -format verilog 命令输出网表之前执行</p>
</li>
<li>
<p>确保生成的网表可以被下游工具（如布局布线工具）正确解析</p>
</li>
<li>
<p>实际转换包括：</p>
</li>
<li>
<p>替换非法字符（如 $, ., [, ] 等）</p>
</li>
<li>
<p>处理以数字开头的名称（Verilog 要求标识符以字母或下划线开头）</p>
</li>
<li>
<p>修改与 Verilog 关键字冲突的名称</p>
</li>
</ol>
<p>如果不执行这个命令，生成的网表可能包含不符合 Verilog 语法的名称，导致下游工具无法正确读取，或者在仿真和验证阶段出现问题。</p>
<h5 id="redirect">redirect<a class="headerlink" href="#redirect" title="Permanent link">&para;</a></h5>
<p>重定向</p>
<p><code>redirect -file file.rpt {command}</code></p>
<h4 id="_33">参考<a class="headerlink" href="#_33" title="Permanent link">&para;</a></h4>
<ul>
<li><a href="https://blog.csdn.net/jiangyezhou110/article/details/146161891">Design Compiler (DC) 工具基本综合流程_design compiler教程-CSDN博客</a></li>
<li><a href="https://www.cnblogs.com/IClearner/tag/Design Compiler/">Design Compiler - 标签 - IC_learner - 博客园</a></li>
</ul>
<h3 id="innovus_">Innovus_<a class="headerlink" href="#innovus_" title="Permanent link">&para;</a></h3>
<p><a href="# innovus">详细内容</a></p>
<h3 id="cerebrus">Cerebrus<a class="headerlink" href="#cerebrus" title="Permanent link">&para;</a></h3>
<ul>
<li>PR tool</li>
<li>Cadence</li>
<li>AI-based</li>
</ul>
<h3 id="starrc">StarRC<a class="headerlink" href="#starrc" title="Permanent link">&para;</a></h3>
<ul>
<li>Synopsys</li>
<li>Sign-off级别RC参数提取</li>
<li>与PrimeTime STA深度集成</li>
</ul>
<h3 id="formality_1">Formality<a class="headerlink" href="#formality_1" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>Synopsys</p>
</li>
<li>
<p>网表逻辑等价性验证，一般会在综合以后和综合前的网表做一次验证， 做完后端物理设计以后再进行一次验证</p>
</li>
<li>
<p><img alt="image-20250730151553755" src="../assets/image-20250730151553755.png" /></p>
</li>
<li>
<p><img alt="image-20250730151655342" src="../assets/image-20250730151655342.png" /></p>
</li>
<li>
<p><img alt="image-20250730151510384" src="../assets/image-20250730151510384.png" /></p>
</li>
<li>
<p>实例脚本</p>
</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="c">#dc_setup.tcl</span>

<span class="k">set</span><span class="w"> </span>DESIGN_NAME<span class="w">                </span><span class="s2">&quot;function_gen&quot;</span>
<span class="k">set</span><span class="w"> </span>REPORTS_DIR<span class="w">                 </span><span class="s2">&quot;reports&quot;</span>
<span class="nb">file</span><span class="w"> </span>mkdir<span class="w"> </span><span class="nv">${REPORTS_DIR}</span>
<span class="k">set</span><span class="w"> </span>DC_DIR<span class="w">                     </span><span class="s2">&quot;../1_dc/output&quot;</span>
<span class="k">set</span><span class="w"> </span>DCRM_SVF_OUTPUT_FILE<span class="w">       </span><span class="s2">&quot;function_gen.svf&quot;</span>
<span class="k">set</span><span class="w"> </span>INNOVUS_DIR<span class="w">                </span><span class="s2">&quot;../4_innovus/postlayout&quot;</span>
<span class="k">set</span><span class="w"> </span>DCRM_FINAL_VERILOG_OUTPUT_FILE<span class="w"> </span><span class="s2">&quot;function_gen.v&quot;</span>

<span class="k">set</span><span class="w"> </span>FMRM_UNMATCHED_POINTS_REPORT<span class="w"> </span><span class="s2">&quot;unmatched_points&quot;</span>
<span class="k">set</span><span class="w"> </span>FMRM_FAILING_SESSION_NAME<span class="w">  </span><span class="s2">&quot;failing_session&quot;</span>
<span class="k">set</span><span class="w"> </span>FMRM_FAILING_POINTS_REPORT<span class="w"> </span><span class="s2">&quot;failing_points&quot;</span>
<span class="k">set</span><span class="w"> </span>FMRM_ABORTED_POINTS_REPORT<span class="w"> </span><span class="s2">&quot;aborted_points&quot;</span>
<span class="k">set</span><span class="w"> </span>FMRM_ANALYZE_POINTS_REPORT<span class="w"> </span><span class="s2">&quot;analyze_points&quot;</span>

<span class="c"># specify library</span>
<span class="k">set</span><span class="w"> </span>library_dir<span class="w">        </span><span class="s2">&quot;/SM01/teaching/bs/digitalic/gb18_dc_lib&quot;</span>

<span class="c"># specify timing library</span>
<span class="k">set</span><span class="w"> </span>ADDITIONAL_LINK_LIB_FILES<span class="w"> </span><span class="s2">&quot; \</span>
<span class="s2">   ${library_dir}/scx_csm_18ic_tt_1p8v_25c.db \</span>
<span class="s2">&quot;</span>

<span class="c"># specify RTL directory</span>
<span class="k">set</span><span class="w"> </span>rtl_dir<span class="w"> </span><span class="s2">&quot;../1_dc/output&quot;</span>

<span class="c"># specify RTL</span>
<span class="k">set</span><span class="w"> </span>RTL_SOURCE_FILES<span class="w"> </span><span class="s2">&quot; \</span>
<span class="s2">${rtl_dir}/function_gen.v \</span>
<span class="s2">&quot;</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c">#fm.tcl</span>

<span class="nb">source</span><span class="w"> </span><span class="o">-</span>echo<span class="w"> </span><span class="o">-</span>verbose<span class="w"> </span>.<span class="o">/</span>tcl<span class="o">/</span>dc_setup.tcl

<span class="c"># setup for handing undriven signals in the design</span>
<span class="k">set</span><span class="w"> </span>verification_set_undriven_signals<span class="w"> </span>x<span class="w"> </span>

<span class="err">#</span><span class="w"> </span>to<span class="w"> </span>treat<span class="w"> </span>simulation<span class="w"> </span>and<span class="w"> </span>synthesis<span class="w"> </span>mismatch<span class="w"> </span>messages<span class="w"> </span>as<span class="w"> </span>warning
<span class="nv">set_app_var</span><span class="w"> </span>hdlin_error_on_mismatch_message<span class="w"> </span>false

<span class="c">#read in the SVF file</span>
<span class="nv">set_svf</span><span class="w"> </span><span class="nv">${DC_DIR}</span><span class="o">/</span><span class="nv">${DCRM_SVF_OUTPUT_FILE}</span>

<span class="c"># read in the SVF file</span>
<span class="nv">read_db</span><span class="w"> </span><span class="o">-</span>technology_library<span class="w"> </span><span class="nv">${ADDITIONAL_LINK_LIB_FILES}</span>

<span class="c"># read in the Ref design</span>
<span class="nv">read_verilog</span><span class="w"> </span><span class="o">-</span>r<span class="w"> </span><span class="nv">${RTL_SOURCE_FILES}</span><span class="w"> </span><span class="o">-</span>work_library<span class="w"> </span>WORK
<span class="nv">set_top</span><span class="w"> </span>r:<span class="o">/</span>WORK<span class="o">/</span><span class="nv">${DESIGN_NAME}</span>

<span class="c"># read in the Impl design</span>
<span class="nv">read_verilog</span><span class="w"> </span><span class="o">-</span>i<span class="w"> </span><span class="nv">${INNOVUS_DIR}</span><span class="o">/</span><span class="nv">${DCRM_FINAL_VERILOG_OUTPUT_FILE}</span>
<span class="nv">set_top</span><span class="w"> </span>i:<span class="o">/</span>WORK<span class="o">/</span><span class="nv">${DESIGN_NAME}</span>

<span class="c"># match compare points and report unmatched points</span>
<span class="nv">match</span>
<span class="nv">report_unmatched_points</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span>.<span class="o">/</span>reports<span class="o">/</span>unmatch_points.rpt
<span class="nv">report_matched_points</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span>fm_match.rpt

<span class="c"># Verify and report</span>
<span class="k">if</span><span class="w"> </span><span class="k">{</span><span class="w"> </span><span class="o">!</span><span class="k">[</span><span class="nv">verify</span><span class="k">]</span><span class="w"> </span><span class="k">}</span><span class="w">  </span><span class="k">{</span><span class="w">  </span>
<span class="w">  </span><span class="nv">save_session</span><span class="w"> </span><span class="o">-</span>replace<span class="w"> </span><span class="nv">${REPORTS_DIR}</span><span class="o">/</span><span class="nv">${FMRM_FAILING_SESSION_NAME}</span>
<span class="w">  </span><span class="nv">report_failing_points</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nv">${REPORTS_DIR}</span><span class="o">/</span><span class="nv">${FMRM_FAILING_POINTS_REPORT}</span>
<span class="w">  </span><span class="nv">report_aborted</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nv">${REPORTS_DIR}</span><span class="o">/</span><span class="nv">${FMRM_ABORTED_POINTS_REPORT}</span>
<span class="w">  </span><span class="nv">analyze_points</span><span class="w"> </span><span class="o">-</span>all<span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nv">${REPORTS_DIR}</span><span class="o">/</span><span class="nv">${FMRM_ANALYZE_POINTS_REPORT}</span>
<span class="k">}</span>
</code></pre></div>
<h4 id="_34">参考<a class="headerlink" href="#_34" title="Permanent link">&para;</a></h4>
<p><a href="https://easyformal.com/lec/formality_guide/">Formality 快速上手指南 | EasyFormal</a></p>
<h3 id="calibre">Calibre<a class="headerlink" href="#calibre" title="Permanent link">&para;</a></h3>
<ul>
<li>Synopsys</li>
<li>DRC/LVS/ERC验证事实标准，支持先进封装（3DIC）</li>
</ul>
<h3 id="prime-time">Prime Time<a class="headerlink" href="#prime-time" title="Permanent link">&para;</a></h3>
<h2 id="_35">模拟芯片流片工具链<a class="headerlink" href="#_35" title="Permanent link">&para;</a></h2>
<h3 id="virtuoso_1">Virtuoso<a class="headerlink" href="#virtuoso_1" title="Permanent link">&para;</a></h3>
<h4 id="schematic">schematic<a class="headerlink" href="#schematic" title="Permanent link">&para;</a></h4>
<h4 id="simulation-ade">simulation ADE<a class="headerlink" href="#simulation-ade" title="Permanent link">&para;</a></h4>
<h5 id="_36">简介<a class="headerlink" href="#_36" title="Permanent link">&para;</a></h5>
<p>早期的仿真环境主要包含 <code>ADE L</code> 和 <code>ADE XL</code>，但是在 Virtuoso <code>IC617 版本</code>后，Cadence 公司新推出了两款仿真工具 <code>ADE Explorer</code> 和 <code>ADE Assembler</code>，用于替代原本的 ADE L、ADE XL 以及 ADE GXL 环境。相比于原本的 ADE L 仿真环境，ADE Explorer 将单次仿真、corners、sweeps、蒙特卡罗以及参数对比等功能都整合在了 ADE Explorer 中，而 ADE Assembler 则主要取代了之前的 ADE XL 以及 ADE GXL 功能。</p>
<h5 id="ade-explorer">ADE Explorer<a class="headerlink" href="#ade-explorer" title="Permanent link">&para;</a></h5>
<ul>
<li>是<code>ADE Assembler</code>的子集，直接用<code>ADE Assembler</code>吧</li>
<li>ADE Assembler 的操作逻辑和 ADE Explorer 类似，可以认为是全局设置和局部设置的区别</li>
</ul>
<h5 id="ade-assembler">ADE Assembler<a class="headerlink" href="#ade-assembler" title="Permanent link">&para;</a></h5>
<ul>
<li>
<p>Assembler 具有极高的自由度，可以在右侧同时添加多个 ADE Explorer，而每个 ADE Explorer 就对应着一个 Test。</p>
</li>
<li>
<p><img alt="image-20250526231810254" src="../assets/image-20250526231810254.png" /></p>
</li>
<li>
<p>添加信号</p>
</li>
</ul>
<p><img alt="image-20250527222937984" src="../assets/image-20250527222937984.png" /></p>
<blockquote>
<p>直接右键也可以添加<code>signal</code></p>
</blockquote>
<p><img alt="image-20250527222824102" src="../assets/image-20250527222824102.png" /></p>
<p><img alt="image-20250527222901243" src="../assets/image-20250527222901243.png" /></p>
<p>点这三个点可以从原理图选取</p>
<p>批量添加：右键空白处--&gt;<code>To be plotted</code>--&gt; 在原理图点击</p>
<ul>
<li>每次跑完的结果都会记录：</li>
</ul>
<p><img alt="image-20250527224100217" src="../assets/image-20250527224100217.png" /></p>
<ul>
<li>一般跑完后，右键<code>plot all</code> 就行</li>
</ul>
<p><img alt="image-20250529170730010" src="../assets/image-20250529170730010.png" /></p>
<ul>
<li>或者选择<code>Direct Plot</code>， 可以在<code>schematic</code> 点那个信号就画那个</li>
</ul>
<h5 id="_37">参考<a class="headerlink" href="#_37" title="Permanent link">&para;</a></h5>
<ul>
<li><a href="https://www.analog-life.com/2025/02/improve-simulation-efficiency-with-cadence-maestro/">Cadence maestro 快速仿真实用教程（ADE Explorer 与 ADE Assembler） – Analog-Life</a></li>
</ul>
<h4 id="layout">Layout<a class="headerlink" href="#layout" title="Permanent link">&para;</a></h4>
<h5 id="_38">相关设置<a class="headerlink" href="#_38" title="Permanent link">&para;</a></h5>
<ul>
<li>
<p>注意一定要新建原理图需要attach对应的PDK才行</p>
</li>
<li>
<p>需要一个<code>.cdsinit</code>文件才能在Virtuosovi'jx用<code>Calibre</code>做DRC和LVS</p>
</li>
<li>
<p>需要一个<code>runset</code>文件</p>
</li>
<li>
<p>高亮/设置网格（一般都会设置成0.005)：</p>
</li>
</ul>
<p><img alt="image-20250915100829480" src="../assets/image-20250915100829480.png" /></p>
<ul>
<li>有时候滚轮缩放到很大才会显示，可以适当提高<code>Resolution</code>精度</li>
</ul>
<p><img alt="image-20250925170628582" src="../assets/image-20250925170628582.png" /></p>
<p>​   </p>
<h5 id="_39">自动布线<a class="headerlink" href="#_39" title="Permanent link">&para;</a></h5>
<blockquote>
<p>注意要打上pin</p>
</blockquote>
<p><a href="https://www.cnblogs.com/jinzbr/p/18235464">自动布局布线使用说明 - 小小桂花糕 - 博客园</a></p>
<h4 id="tips_1">tips<a class="headerlink" href="#tips_1" title="Permanent link">&para;</a></h4>
<ul>
<li>没有连接的，默认会警告，可以用<code>basic--&gt; noCon</code>替代</li>
</ul>
<p><img alt="image-20250526141607570" src="../assets/image-20250526141607570.png" /></p>
<p><img alt="image-20250526141638414" src="../assets/image-20250526141638414.png" /></p>
<ul>
<li>
<p>测试的时候，负载可以接到NMOS栅极，不用电阻<img alt="image-20250527190719820" src="../assets/image-20250527190719820.png" /></p>
</li>
<li>
<p><code>ADE A</code>并行加速</p>
</li>
</ul>
<p><img src="assets/image-20250530224337198.png" alt="image-20250530224337198" style="zoom:67%;" /></p>
<p><img alt="image-20250530224415451" src="../assets/image-20250530224415451.png" /></p>
<p><img alt="image-20250530224439296" src="../assets/image-20250530224439296.png" /><img src="assets/image-20250530224510006.png" alt="image-20250530224510006" style="zoom:50%;" /><img src="assets/image-20250530224522804.png" alt="image-20250530224522804" style="zoom:50%;" /></p>
<ul>
<li>
<p>Outputs Setup有变量更新了或者有新的表达式，可是点击这个黄色按钮，不需要重新跑，就可以plot<img alt="image-20250530225132894" src="../assets/image-20250530225132894.png" /></p>
</li>
<li>
<p>设置变量：根据输入频率变量确定瞬态仿真的时间</p>
</li>
</ul>
<p><img alt="image-20250601171118335" src="../assets/image-20250601171118335.png" /></p>
<p><img alt="image-20250601171103254" src="../assets/image-20250601171103254.png" /></p>
<p><img alt="image-20250601171029733" src="../assets/image-20250601171029733.png" /></p>
<ul>
<li>可以通过corner设置，把选择多个输入频率同时仿真</li>
</ul>
<p><img alt="image-20250608182113413" src="../assets/image-20250608182113413.png" /></p>
<p><img alt="image-20250608182127950" src="../assets/image-20250608182127950.png" /></p>
<ul>
<li>
<p>可以导出数字标准单元的layout查看</p>
</li>
<li></li>
</ul>
<h4 id="_40">相关快捷键<a class="headerlink" href="#_40" title="Permanent link">&para;</a></h4>
<ul>
<li>对一个symbol按空格可以快速引出label</li>
</ul>
<h5 id="schematic-editor">原理图编辑器 (Schematic Editor)<a class="headerlink" href="#schematic-editor" title="Permanent link">&para;</a></h5>
<ul>
<li>
<p>i: 放置实例/组件</p>
</li>
<li>
<p>w: 绘制导线</p>
</li>
<li>
<p>l: 创建标签</p>
</li>
<li>
<p>p: 创建引脚</p>
</li>
<li>
<p>r: 旋转所选对象</p>
</li>
<li>
<p>m: 镜像所选对象</p>
</li>
<li>
<p>c: 复制所选对象</p>
</li>
<li>
<p>q: 查看属性</p>
</li>
<li>
<p>Shift+f: 适应窗口大小</p>
</li>
<li>
<p>f: 放大选中区域</p>
</li>
<li>
<p>Ctrl+f: 缩小视图</p>
</li>
<li>
<p>Ctrl+z: 撤销</p>
</li>
<li>
<p>Ctrl+y: 重做</p>
</li>
<li>
<p>Delete: 删除所选对象</p>
</li>
<li>
<p>Esc: 取消当前操作</p>
</li>
<li>
<p>e: 编辑属性</p>
</li>
<li>
<p>Tab: 在对象之间循环选择</p>
</li>
</ul>
<h5 id="layout-editor">版图编辑器 (Layout Editor)<a class="headerlink" href="#layout-editor" title="Permanent link">&para;</a></h5>
<ul>
<li>
<p>Ctrl+a: 创建新图层</p>
</li>
<li>
<p>p: 创建路径</p>
</li>
<li>
<p>r: 创建矩形</p>
</li>
<li>
<p>c: 复制对象</p>
</li>
<li>
<p>m: 移动对象</p>
</li>
<li>
<p>s: 拉伸对象</p>
</li>
<li>
<p>Shift+f: 适应窗口大小</p>
</li>
<li>
<p>f: 放大选中区域</p>
</li>
<li>
<p>k: 测量距离</p>
</li>
<li>
<p>Ctrl+d: DRC检查</p>
</li>
<li>
<p>Ctrl+e: 提取器(Extractor)</p>
</li>
<li>
<p>Ctrl+l: LVS检查</p>
</li>
</ul>
<h5 id="_41">全局快捷键<a class="headerlink" href="#_41" title="Permanent link">&para;</a></h5>
<ul>
<li>
<p>Ctrl+s: 保存</p>
</li>
<li>
<p>o: 打开对象</p>
</li>
<li>
<p>h: 帮助</p>
</li>
<li>
<p>x: 剪切</p>
</li>
<li>
<p>v: 粘贴</p>
</li>
</ul>
<h5 id="ade">ADE (模拟设计环境)<a class="headerlink" href="#ade" title="Permanent link">&para;</a></h5>
<ul>
<li>
<p>Alt+s: 仿真</p>
</li>
<li>
<p>Alt+p: 绘制波形</p>
</li>
<li>
<p>Alt+a: 添加新分析</p>
</li>
<li>
<p>Alt+v: 设置变量</p>
</li>
</ul>
<h2 id="_42">混合仿真流程<a class="headerlink" href="#_42" title="Permanent link">&para;</a></h2>
<h3 id="_43">前仿<a class="headerlink" href="#_43" title="Permanent link">&para;</a></h3>
<p>前提：模拟模块和数字模块(综合前)分别搭好</p>
<ol>
<li>
<p>新建verilog veiw, 并生成symbol</p>
</li>
<li>
<p>新建config</p>
</li>
</ol>
<p><img alt="image-20250603232347629" src="../assets/image-20250603232347629.png" /></p>
<blockquote>
<p>选择外部的HDL代码，也就是源码</p>
</blockquote>
<ol>
<li>
<p>画好testbench原理图</p>
</li>
<li>
<p>新建<code>maestro</code>，选择<code>AMS</code>仿真器</p>
</li>
</ol>
<p><img alt="image-20250603232139907" src="../assets/image-20250603232139907.png" /></p>
<p>​   <img alt="image-20250603232716147" src="../assets/image-20250603232716147.png" /></p>
<p><img alt="image-20250603232836923" src="../assets/image-20250603232836923.png" /></p>
<p><img alt="image-20250603232900448" src="../assets/image-20250603232900448.png" /></p>
<p><img alt="image-20250904093246434" src="../assets/image-20250904093246434.png" /></p>
<blockquote>
<p>这里主要是修改高低电平，根据使用的器件修改</p>
<p>注意, 如果是综合后的，要加上数字库的functional</p>
<p>导入每个数字标准单元的functional，把所有模块的verilog代码放到一个文件可以跑，分开来不知道为什么不行。。。</p>
<p><img alt="image-20250903230900752" src="../assets/image-20250903230900752.png" /></p>
<p><a href="https://blog.csdn.net/qq_41990421/article/details/134294680">cadence AMS数模混合仿真_ams仿真-CSDN博客</a></p>
<p><a href="https://www.analog-life.com/2023/02/using-cadence-ams-simulator-for-digital-analog-mixing-simulation/">使用 Cadence AMS 仿真器进行数模混仿教程 – Analog-Life</a></p>
<p><img alt="image-20250904093031897" src="../assets/image-20250904093031897.png" /></p>
<blockquote>
<p>上图的两个框选模块<code>mydsm</code>的两个子模块，本来是红色的</p>
</blockquote>
</blockquote>
<p><img alt="image-20250603232956525" src="../assets/image-20250603232956525.png" /></p>
<h4 id="_44">参考<a class="headerlink" href="#_44" title="Permanent link">&para;</a></h4>
<ul>
<li><a href="https://zhuanlan.zhihu.com/p/8280687951">Cadence Virtuoso数模混合仿真流程 - 知乎</a></li>
</ul>
<h3 id="lvs_1">LVS<a class="headerlink" href="#lvs_1" title="Permanent link">&para;</a></h3>
<h4 id="buglist_1">buglist<a class="headerlink" href="#buglist_1" title="Permanent link">&para;</a></h4>
<ol>
<li>同时拥有数字和模拟电源/地的情况下，保证数字和模拟地没有连线，也出现短路，同时有soft check</li>
</ol>
<p><img alt="image-20250906162502133" src="../assets/image-20250906162502133.png" /></p>
<p>在模拟/数字版图周围加上一圈NWell</p>
<p>参考：<a href="https://zhuanlan.zhihu.com/p/721804516"> 跑lvs出现soft connect怎么处理？ - 知乎</a></p>
<p>但是又出现了以下softcheck：</p>
<p><img alt="image-20250906222949101" src="../assets/image-20250906222949101.png" /></p>
<p>后面不分数字模拟地了，也被NWell去掉了，clean了</p>
<blockquote>
<p>[!WARNING]</p>
<p>但是原因是什么？不分会有什么后果？</p>
</blockquote>
<h3 id="drc_1">DRC<a class="headerlink" href="#drc_1" title="Permanent link">&para;</a></h3>
<h4 id="buglist_2">Buglist<a class="headerlink" href="#buglist_2" title="Permanent link">&para;</a></h4>
<ul>
<li>LU3.</li>
</ul>
<p><img alt="image-20250912164121648" src="../assets/image-20250912164121648.png" /></p>
<p>解决方法：在VDD/VSS的PAD上盖上VDDMK/VSSMK层</p>
<ul>
<li>模拟ant drc:</li>
</ul>
<p><img alt="image-20250912164256931" src="../assets/image-20250912164256931.png" /></p>
<p>发生在连接了pad的gt上。</p>
<p>解决方法：信号线连接二极管</p>
<p><a href="https://bbs.eetop.cn/thread-842513-1-1.html">天线效应antenna effect错误求助 - Layout讨论区 - EETOP 创芯网论坛 (原名：电子顶级开发网) -</a></p>
<h3 id="_45">后仿<a class="headerlink" href="#_45" title="Permanent link">&para;</a></h3>
<blockquote>
<p>[!WARNING]</p>
<p>注意，数字模块理论上可以进行晶体管级的（动态？）仿真，但是项目大的话千万不要怎么做！很卡</p>
</blockquote>
<h4 id="_46">数字模块时序反标<a class="headerlink" href="#_46" title="Permanent link">&para;</a></h4>
<p><code>simulation –&gt;option --&gt;AMS simulator</code>中点击<code>SDF</code>，在<code>sdf command file</code>中输入<code>.sdf</code>文件路径即可</p>
<p><img alt="image-20250904222116985" src="../assets/image-20250904222116985.png" /></p>
<p><img alt="image-20250904222140233" src="../assets/image-20250904222140233.png" /></p>
<blockquote>
<p>[!WARNING]</p>
<p><img alt="image-20250905150113750" src="../assets/image-20250905150113750.png" /></p>
<p>貌似跑一次<code>.sdf</code>文件只能选一个，这样不好在plot出来的图上比较。不知道怎么解决</p>
</blockquote>
<h4 id="_47">模拟模块提取寄生参数并替换网表<a class="headerlink" href="#_47" title="Permanent link">&para;</a></h4>
<p>同<a href="# 9.寄生参数提取（PEX）">9.寄生参数提取（PEX）</a></p>
<h4 id="corner">设置corner<a class="headerlink" href="#corner" title="Permanent link">&para;</a></h4>
<p>同<a href="# 6.前仿PVT验证">前仿PVT验证</a></p>
<p><img alt="image-20250905105916526" src="../assets/image-20250905105916526.png" /></p>
<h3 id="io-pad">加I/O PAD<a class="headerlink" href="#io-pad" title="Permanent link">&para;</a></h3>
<p><img alt="image-20250901204825112" src="../assets/image-20250901204825112.png" /></p>
<p>IO 电路的作用有几方面：ESD保护，level shifter，施密特触发器等等。还有提供电源环路。</p>
<blockquote>
<p><strong>PAD Ring部分在设计项目中十分重要</strong>，包括整个芯片的电源网络都在这部分完成，因此也会<strong>占据很大一部分芯片面积</strong>。在先进工艺设计中，核心电路的尺寸可能一直在减小，但是由于<strong>电源线宽</strong>、<strong>PAD尺寸</strong>、<strong>ESD保护电路尺寸</strong>等限制，PAD Ring的尺寸并没有按比例减小。<strong>良好的PAD规划一方面可以节省芯片面积</strong></p>
</blockquote>
<p>一个基本的pad library，应该可以提供如下几种pad：</p>
<ol>
<li>给pad供电的pad，例如：PAD_VDD, PAD_VSS;</li>
<li>给core供电的pad，例如：VDD, VSS; （如果存在多个VDD domain， 还有AVDD, AVSS，之类的pad）</li>
<li>模拟信号的pad，例如ANIN (analog的pad一般就是一块铁片，有的vendor推荐用户可以自己基于要求自己再加上一定的ESD保护电路)</li>
<li>数字信号的pad，一般有input和output的区别，里面还有包括level shifter(电平转换)，buffers之类的数字电路</li>
</ol>
<blockquote>
<p>建议设计pad ring之前，先去读一下vendor的文档，文档一般会说明各种类型的pad的用法，还有各种注意事项。不同的vendor提供的pad library不一样，所以有时候还是谨慎一点。</p>
<p>比如SMIC28的<em>SMIC_SPC28NHKCPD2OV3RNP_IO_DataBook_Ver0p5.pdf</em>:</p>
<p>SPC28NHKCPD2OV3RNP: Where SP  stands for SMIC pad, 28HKCP is 28nm Logic  HKC  plus  process  and  D2  means  2.5V  voltage  application, OV3  means  the  IO  Power can be  overdriven  3.3V,  R  means  regular,  N  means  narrow  and  the second P  is  DUP  (Device  Under Pad).  All  I/O  pads  are  matched  with  the  design  requirement  of  SMIC  28nm  Logic  HKC  plus 0.9V/1.8V/2.5V  Design  Rules  (TD-LO28-DR-2013).  Table  1  describes  the  process  and  physical specification  of  the  Library.  It  should  be  noted  that  SPC28NHKCPD2OV3RNP  support  design with  7,  8,  9  and  10  layers  of  metal  application.</p>
</blockquote>
<h4 id="_48">基础知识<a class="headerlink" href="#_48" title="Permanent link">&para;</a></h4>
<p><img src="assets/Weixin Image_20250907213857_79_50.jpg" alt="Weixin Image_20250907213857_79_50" style="zoom: 35%;" /></p>
<p><img src="assets/Weixin Image_20250907213840_68_50.jpg" alt="Weixin Image_20250907213840_68_50" style="zoom: 35%;" /></p>
<p><img src="assets/Weixin Image_20250907213843_69_50.jpg" alt="Weixin Image_20250907213843_69_50" style="zoom: 35%;" /></p>
<p><img src="assets/Weixin Image_20250907213856_78_50.jpg" alt="Weixin Image_20250907213856_78_50" style="zoom:35%;" /></p>
<p><img src="assets/Weixin Image_20250907213850_74_50.jpg" alt="Weixin Image_20250907213850_74_50" style="zoom:35%;" /></p>
<p><img src="assets/Weixin Image_20250907213847_72_50.jpg" alt="Weixin Image_20250907213847_72_50" style="zoom:35%;" /></p>
<p><img src="assets/Weixin Image_20250907213855_77_50.jpg" alt="Weixin Image_20250907213855_77_50" style="zoom:35%;" /></p>
<p><img src="assets/Weixin Image_20250907213852_75_50.jpg" alt="Weixin Image_20250907213852_75_50" style="zoom:35%;" /></p>
<p><img src="assets/Weixin Image_20250907213849_73_50.jpg" alt="Weixin Image_20250907213849_73_50" style="zoom:35%;" /></p>
<p><img src="assets/Weixin Image_20250907213853_76_50.jpg" alt="Weixin Image_20250907213853_76_50" style="zoom: 35%;" /></p>
<p><img src="assets/Weixin Image_20250907213846_71_50.jpg" alt="Weixin Image_20250907213846_71_50" style="zoom:35%;" /></p>
<p><img src="assets/Weixin Image_20250907213844_70_50.jpg" alt="Weixin Image_20250907213844_70_50" style="zoom:35%;" /></p>
<h4 id="_49">结构<a class="headerlink" href="#_49" title="Permanent link">&para;</a></h4>
<p><img src="assets/image-20250901221210220.png" alt="image-20250901221210220" style="zoom: 90%;" /></p>
<h5 id="pre-driver">pre-driver<a class="headerlink" href="#pre-driver" title="Permanent link">&para;</a></h5>
<p>Pre-driver  provides  logic operation  for  I/O  circuit</p>
<p>The  pre-driver  section  contains  <code>VDD</code>  and  <code>VSS</code>  ports. </p>
<p><code>VDD</code> is  connecting  to  the  0.9V power ring</p>
<h5 id="post-driver">post-driver<a class="headerlink" href="#post-driver" title="Permanent link">&para;</a></h5>
<p>post-driver  provides  large  driving  capability  and  ESD  protection ability.</p>
<p>The  post-driver  section  contains  various  ports  and  their  functions  are  connecting  to  the  <code>3.3V  or 1.8V</code> power, and connecting to various <code>guard rings</code> for latch-up and <code>ESD</code>protection purposes</p>
<h5 id="fp">FP<a class="headerlink" href="#fp" title="Permanent link">&para;</a></h5>
<p>FP stands for ‘From Power Pad’. FP and FPB pin  is for <mark>global signal</mark></p>
<p>FP is activated  by  <code>PVDD2PUDCRNC_X</code>or  <code>PVDD2PUDCRNC_Y</code>to  ‘HIGH’  (<mark>3.3V  or  1.8V</mark>)  </p>
<p>FPB is activated by <code>PVDD2PUDCRNC_X</code>or PVDD2P <code>UDCRNC_Y</code>to  ‘LOW’ (<mark>0V</mark>)</p>
<p>FP and FPB rail  will  be automatically  connected while joining  with other digital  I/O cells</p>
<h4 id="cell-categories">Cell categories<a class="headerlink" href="#cell-categories" title="Permanent link">&para;</a></h4>
<h5 id="digital-io-cells">Digital I/O Cells<a class="headerlink" href="#digital-io-cells" title="Permanent link">&para;</a></h5>
<h5 id="analog-io-cells">Analog I/O Cells<a class="headerlink" href="#analog-io-cells" title="Permanent link">&para;</a></h5>
<h5 id="esd-clamp-cells">ESD clamp Cells<a class="headerlink" href="#esd-clamp-cells" title="Permanent link">&para;</a></h5>
<h5 id="filler-cells">Filler Cells<a class="headerlink" href="#filler-cells" title="Permanent link">&para;</a></h5>
<h4 id="dc-and-ac-specification">DC and AC Specification<a class="headerlink" href="#dc-and-ac-specification" title="Permanent link">&para;</a></h4>
<p><img alt="image-20250901222717978" src="../assets/image-20250901222717978.png" /></p>
<p><img alt="image-20250901222820003" src="../assets/image-20250901222820003.png" /></p>
<blockquote>
<p>有很多，需要具体在文档看</p>
</blockquote>
<h5 id="data-sheet">Data Sheet<a class="headerlink" href="#data-sheet" title="Permanent link">&para;</a></h5>
<p><img alt="image-20250901223543565" src="../assets/image-20250901223543565.png" /></p>
<h6 id="3-state-output-pad">3-state output  pad（都是数字的）<a class="headerlink" href="#3-state-output-pad" title="Permanent link">&para;</a></h6>
<ul>
<li>PBSxRNC_X/_Y </li>
<li>PBCDxRNC_X/_Y</li>
<li>PBCUxRNC_X/_Y </li>
<li>PBCSUD4RNC_HD _X/_Y</li>
</ul>
<blockquote>
<p>[!WARNING]</p>
<p>这次SMIC28PAD，没有原理图，做不了LVS</p>
</blockquote>
<h4 id="_50">技巧：<a class="headerlink" href="#_50" title="Permanent link">&para;</a></h4>
<ol>
<li>layout 里面可以使用快捷键对齐工具<img alt="image-20250907101341304" src="../assets/image-20250907101341304.png" />与快捷键<code>a</code>在某个金属层上实现对齐与吸附</li>
</ol>
<p><img alt="image-20250907101231426" src="../assets/image-20250907101231426.png" /></p>
<p><img src="assets/image-20250907101501440.png" alt="image-20250907101501440" style="zoom: 65%;" /></p>
<p><img src="assets/image-20250907101526804.png" alt="image-20250907101526804" style="zoom: 70%;" /></p>
<blockquote>
<p>[!WARNING]</p>
<p>又不会依旧会对不齐，不知道为什么，最后的小部分手动解决了</p>
</blockquote>
<h4 id="_51">参考<a class="headerlink" href="#_51" title="Permanent link">&para;</a></h4>
<ul>
<li><a href="https://zhuanlan.zhihu.com/p/572630948">一点的关于pad的基础知识分享 - 知乎</a></li>
<li><a href="https://www.eet-china.com/mp/a44030.html">模拟集成电路设计流程--ESD保护电路和PAD电路-电子工程专辑</a></li>
<li><a href="https://bbs.eetop.cn/forum.php?mod=viewthread&amp;tid=336715">关于电源IO的数量</a></li>
</ul>
<h3 id="lvsdrc">LVS/DRC<a class="headerlink" href="#lvsdrc" title="Permanent link">&para;</a></h3>
<blockquote>
<p>再次做LVS和DRC</p>
</blockquote>
<h3 id="seal-ring">加seal ring<a class="headerlink" href="#seal-ring" title="Permanent link">&para;</a></h3>
<p>在整个芯片的外围，一般还要求<strong>放置一圈Seal Ring</strong></p>
<p>Seal Ring是一种<strong>氧化、钝化层结构</strong>，在版图上Seal Ring是一个由<strong>离子注入</strong>、<strong>过孔</strong>、<strong>金属</strong>等各层按照一定的规则叠加实现的。特别是<strong>过孔在Seal Ring上的实现可能和其它电路中不一致</strong>，所以大部分工艺针对Seal Ring有相应的设计规则。</p>
<p>设计人员可以根据自己的需要在版图外围添加Seal Ring，有些<strong>代工厂也可以为版图添加Seal Ring</strong></p>
<p>作用</p>
<ul>
<li><strong>防止芯片在切割的时候受到机械应力损伤</strong></li>
<li>如果把Seal Ring接地，也可以<strong>起到屏蔽芯片外干扰的作用</strong></li>
<li>Seal Ring可以<strong>防止潮气从侧面断口侵入芯片</strong>，<strong>对静电保护也有一定的作用</strong>。</li>
</ul>
<h4 id="smic28">SMIC28实例<a class="headerlink" href="#smic28" title="Permanent link">&para;</a></h4>
<ol>
<li>导入seal ring的<code>.gds</code>文件到新的library</li>
<li>会有一个长条和一个拐角模块</li>
<li>拼接成合适的大小</li>
</ol>
<h4 id="_52">参考<a class="headerlink" href="#_52" title="Permanent link">&para;</a></h4>
<ul>
<li><a href="https://zhuanlan.zhihu.com/p/44729829">保护神——Seal ring - 知乎</a></li>
</ul>
<h3 id="dummyfiller">运行dummy脚本填充FIller<a class="headerlink" href="#dummyfiller" title="Permanent link">&para;</a></h3>
<h4 id="smic28_1">SMIC28 流程示例<a class="headerlink" href="#smic28_1" title="Permanent link">&para;</a></h4>
<ol>
<li>
<p>在顶层中画一个<code>`BORDER</code>层盖住设计整个设计</p>
</li>
<li>
<p><code>Stream Out</code>导出顶层<code>top.gds</code></p>
</li>
<li>
<p>修改foundary给的脚本的相关路径</p>
</li>
</ol>
<p>示例:</p>
<div class="highlight"><pre><span></span><code>#! tvf
namespace import tvf::*
tvf::VERBATIM {
//##|     Note 1 : This script could fill OCCD/OCOVL,AA/GT/P2/P4,1X metal (M1~M8),1X Via (V1~V7),8X/10X Top metal (TM1,TM2; STM1,STM2),MTT2,ALPA layers.
//##|     Note 2 : This runset must be run with hierarchy mode.
//##|     Note 3 : Output GDS datatype is 1 &amp; 7.  
//##|     Note 4 : Please keep all tech file at same folder, or change the attachment file path within main file.
//##|     Note 5 : Please designers ensure timing closure post dummy insertion.     
//##|     Note 6 : This runset required &quot;calibredrc/calibrehdrc/calyieldenhance&quot; license by Mentor Graphics.             
//##|     Note 7 : Please make sure your EDA tool&amp;tool version: Calibre® Calibre nmDRC/Calibre nmDRC-H2 &amp; &quot;v2014.4_18.13&quot;. 
//##|     Note 8 : Any question about this utility, please don&#39;t hesitate to contact me, email: Tyzy_Lee@smics.com.  
//##|     Note 9 : Please read this utility&#39;s release note carefully, which release together with utility.
//##********************************************************************************
//##|                Calibre Model-Based dummy fills program
//##********************************************************************************
//##================================================================================
//##|       SMIC:               28nm Logic HKC Plus Auto Dummy Insertion Rules
//##|       Doc.No:             TD-LO28-IR-2004
//##|       Doc.Rev:            4
//##|       Tech.Dev.Rev:       V1.0_REV1
//##|
//##|       Document for reference:
//##|       SMIC:               28nm Logic HKC plus 0.9V/1.8V/2.5V Design Rules
//##|       Doc.No:             TD-LO28-DR-2013
//##|       Doc.Rev:            10
//##|       Tech.Dev.Rev:       V1.0_REV6
//##|===============================================================================| 
//##|===============================================================================|
//##|  QA level :  I   -&gt; pass nothing                                              |
//##|              II  -&gt; pass testchip QA                                          |
//##|              III -&gt; pass standart QA flow (official release)                  |
//##|===============================================================================|
//##|===============================================================================|
//##| Revision History :                                                            |
//##|    Rev        Date          Who                      What                     |
//##| --------  ------------  ------------  ----------------------------------------|
//##|V1.0_REV1_0 20210819     Jinyan Wang   1. Add P4 dummy insertion               |
//##| --------  ------------  ------------  ----------------------------------------|
//##|     V1.0   20180604      Robben_Lee    1.  Just follow up dummy rule version. rule optimization but coding not need update.            
//##|  QA level : III                                    |
//##| --------  ------------  ------------  ----------------------------------------|
//##|     V0.9   20180115      Robben_Lee    1.  update HiR area rules           
//##|  QA level : III                                    |
//##| --------  ------------  ------------  ----------------------------------------|
//##|     V0.6_1   20171017    Robben_Lee    1.  Change chip corner defination from 70um to 74um
//##|  QA level : III                                    |
//##| --------  ------------  ------------  ----------------------------------------|
//##|     V0.6   20170607      Robben_Lee    1.  Initial, This deck refer 28HKMG V1.0
//##|                        2.  Change MTT2 dummy rules and follow 65nm MTT2 rules to decrease the density to avoid wafer warpage issue.
//##|  QA level : III                                    |
//##| --------  ------------  ------------  ----------------------------------------|

SVRF VERSION &quot;v2014.4_18.13&quot;

//##|===============================================================================|
//##|       User configuration section                           |
//##|===============================================================================|

//##|===============================================================================|
//##|Chip window size defines: &quot;If use coordinate input&quot;,
//##|  &quot;pleae un-comment the following code&quot;
//##|  &quot;wxLB&quot;,&quot;wyLB&quot;,&quot;wxRT&quot;,&quot;wyRT&quot; are Chip window left-bottom and right-top coordinate
//##|  user should define it according to your real layout
//##|===============================================================================|

//LAYER ChipWindow 2999
//VARIABLE   wxLB  1000 
//VARIABLE   wyLB  1000
//VARIABLE   wxRT  10000
//VARIABLE   wyRT  10000
//POLYGON wxLB wyLB wxRT wyRT ChipWindow
//BULK_1 = COPY ChipWindow

//##|===============================================================================|
//##|Chip window size defines: &quot;If use layer 127;0 (BORDER) as chip boundary&quot;,
//##|  &quot;please un-comment the following code&quot;; and &quot;comment out above code&quot;
//##|===============================================================================|

BULK_1 = COPY BORDER

//##|===============================================================================|
//##|Switches selection 1                       /////////////////////////////////
//##|This action for chip corner cut YES or NO  /////////////////////////////////
//##|If you will use SMIC seal ring, please select &quot;CUTCORNER&quot; as YES////////////
//##|And user should define &quot;Chamfer_Size&quot; according to your real layout   //////
//##|V0.6_1 Dummy rules default Chamfer_Size value is &quot;74um&quot; /////////////////////
//##|===============================================================================|

#DEFINE         CUTCORNER       NO
VARIABLE        Chamfer_Size    74

//##|===============================================================================|
//##|CREATE FILL OR OCCD                /////////////////////////////////////////
//##|===============================================================================|

#DEFINE         Dummy_Fill      YES             
#DEFINE         OCCD_Fill       NO             
#DEFINE      OCOVL_Fill  NO

//##|===============================================================================|
//##|CREATE FILL LAYERS (starts here)   /////////////////////////////////////////
//##|If you need to fill below layers dummy, please set &quot;YES&quot;, otherwise &quot;NO&quot;.///
//##|Only fill via dummy is not supported, If you want to fill via dummy,     ///
//##|please make sure below and above metal fill also &quot;YES&quot;.                /////
//##|===============================================================================|

#DEFINE      AAGT_Fill       YES     
#DEFINE      P2_Fill         YES 
#DEFINE      1X_M1_Fill  YES         
#DEFINE      1X_V1_Fill  NO  
#DEFINE      1X_M2_Fill  YES         
#DEFINE      1X_V2_Fill  NO      
#DEFINE      1X_M3_Fill  YES 
#DEFINE      1X_V3_Fill  NO  
#DEFINE      1X_M4_Fill  YES 
#DEFINE      1X_V4_Fill  NO  
#DEFINE      1X_M5_Fill  YES     
#DEFINE      1X_V5_Fill  NO          
#DEFINE      1X_M6_Fill  YES         
#DEFINE      1X_V6_Fill  NO       
#DEFINE      1X_M7_Fill  YES         
#DEFINE      1X_V7_Fill  NO       
#DEFINE      1X_M8_Fill  NO          
#DEFINE      8X_TM1_Fill YES         
#DEFINE      8X_TM2_Fill NO          
#DEFINE      10X_STM1_Fill   NO          
#DEFINE      10X_STM2_Fill   NO          
#DEFINE      MTT2_Fill   YES         
#DEFINE      ALPA_Fill   YES         
//////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////
PRECISION    1000            //Input Layout database precision
RESOLUTION   5                   
LAYOUT SYSTEM    GDSII           //Input Layout database type
LAYOUT PRIMARY   &quot;*&quot;             //Input primary cell
LAYOUT PATH  &quot;/SM05/home/phd2024/phd202411094979/project/cpicp25/analog/runspace/top.gds&quot;        //Input database path
}
set ::env(ResultsDB) &quot;Dummy.gds&quot; ;# Output database path and file
tvf::VERBATIM {
/////////////////////////////////////////////////////////////////////////////////////////////////////
//// Do not modify below code                //////////////////////////////////////////////////////// 
/////////////////////////////////////////////////////////////////////////////////////////////////////
DRC RESULTS DATABASE &quot;./cal.rpt&quot; ASCII append _Dummy         
DRC SUMMARY REPORT &quot;./cal.sum&quot;                       
DRC MAXIMUM RESULTS ALL                                                              
DRC KEEP EMPTY NO                            
/////////////////////////////////////////////////////////////////////////////////////////////////////
Include ../V1.0_1_HKC_Plus_layermapping_20210819.tvf
Include ../V1.0_1_HKC_Plus_model_recipe_20210819.tbc
#IFDEF Dummy_Fill YES
Include ../V1.0_1_HKC_Plus_Density_map_20210819.tvf
#ENDIF
/////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////
LAYOUT TURBO FLEX YES
LAYOUT BASE LAYER AA GT NW SP CTi M1 M2 
}
</code></pre></div>
<blockquote>
<p>这里没有加fill via, 还有不知道为什么是OCCD和OCOVL，没见过所以也没加</p>
</blockquote>
<ol>
<li>根据文档<code>TD-LO28-DT-2074v4.pdf</code>示例cmd运行脚本，得到<code>Dummy.gds</code></li>
</ol>
<blockquote>
<p>[!WARNING]</p>
<p>微电子学院的服务器的启动指令和文档的calibre指令不一样：</p>
<p><img alt="image-20250909010020584" src="../assets/image-20250909010020584.png" /></p>
<p><code>calibre -64 -drc -hier -turbo 8 ../SMIC_Cal_Model_Based_Dummy_28HKCPlusLG_091825_V1.0_REV1_0_20210819.tvf</code></p>
</blockquote>
<ol>
<li>
<p><code>Stream In</code>生成的<code>Dummy.gds</code>, 注意生成的是一个同名的<code>cellview</code>, 要新建一个library，避免覆盖（我没试过是否会被覆盖）</p>
</li>
<li>
<p>导入Dummy layout到顶层，<code>q</code>设置dummy模块的坐标为==（0,0）==实现贴合</p>
</li>
<li>
<p>做DRC，打开密度检查选项</p>
</li>
</ol>
<blockquote>
<p>SMIC28的IO附近有dummy的Block，有部分密度过不了，需要手动加一点</p>
</blockquote>
<h3 id="_53">再次后仿<a class="headerlink" href="#_53" title="Permanent link">&para;</a></h3>
<blockquote>
<p>[!TIP]</p>
<p>导入IO的原理图
PAD没有网表。。这次是没做了</p>
</blockquote>
<h3 id="_54">提交<a class="headerlink" href="#_54" title="Permanent link">&para;</a></h3>
<ul>
<li>多于foundary沟通</li>
<li>DRC waive list</li>
<li>Sealring 之间最短距离</li>
<li>加密，会给脚本，跑一下就好</li>
<li>提交用到的器件列表</li>
<li></li>
</ul>
<blockquote>
<p>[!TIP]</p>
<p>不知道是不是都需要</p>
</blockquote>
<h3 id="tips_2">tips<a class="headerlink" href="#tips_2" title="Permanent link">&para;</a></h3>
<ul>
<li>rst_n信号也可以用vdc来做，设成变量</li>
</ul>
<p><img alt="image-20250603233157724" src="../assets/image-20250603233157724.png" /></p>
<p><img alt="image-20250603233216567" src="../assets/image-20250603233216567.png" /></p>
<h2 id="innovus">innovus<a class="headerlink" href="#innovus" title="Permanent link">&para;</a></h2>
<p>15年后 Encounter --&gt; Innovus</p>
<h3 id="flow_1">flow<a class="headerlink" href="#flow_1" title="Permanent link">&para;</a></h3>
<p><img src="assets/image-20250608182648061.png" alt="image-20250608182648061" style="zoom:50%;" /></p>
<p><img alt="image-20240930100121889" src="../assets/image-20240930100121889.png" /></p>
<p><img alt="image-20241004110311589" src="../assets/image-20241004110311589.png" /></p>
<p>需要准备以下文件：</p>
<p><img src="assets/image-20250608183024360.png" alt="image-20250608183024360" style="zoom:50%;" /></p>
<h4 id="floorplan">floorplan<a class="headerlink" href="#floorplan" title="Permanent link">&para;</a></h4>
<h5 id="_55">考虑因素<a class="headerlink" href="#_55" title="Permanent link">&para;</a></h5>
<ul>
<li>封装形式</li>
<li>面积、绕通性、电源完整性、时序性能、功耗</li>
<li>Hard IP 使用需求</li>
</ul>
<p><img alt="image-20240930141615916" src="../assets/image-20240930141615916.png" /></p>
<h5 id="_56">基础概念<a class="headerlink" href="#_56" title="Permanent link">&para;</a></h5>
<h6 id="box">Box<a class="headerlink" href="#box" title="Permanent link">&para;</a></h6>
<p><img alt="image-20240930141500405" src="../assets/image-20240930141500405.png" /></p>
<p><strong>Die Box</strong>: 整个芯片区域</p>
<p><strong>Core Box</strong>: 标准单元和 IP 摆放单元</p>
<p><strong>IO Box</strong>: IO 单元摆放区域(红色与黄色之间)</p>
<p><strong>Core2IO Box</strong>: 隔离距离，电压隔离，ESD 保护，Core 电源环创建（绿色红色之间）</p>
<h6 id="site-row">site, row,<a class="headerlink" href="#site-row" title="Permanent link">&para;</a></h6>
<p><img alt="image-20240930141709762" src="../assets/image-20240930141709762.png" /></p>
<p><img alt="image-20241002191542281" src="../assets/image-20241002191542281.png" /></p>
<h6 id="site">Site(最小布局单位)<a class="headerlink" href="#site" title="Permanent link">&para;</a></h6>
<p><img alt="image-20241002191714370" src="../assets/image-20241002191714370.png" /></p>
<ul>
<li>SITE 的类别通常分为 core 和 pad，分别对应着 std cell 的 row 和 io cell 的 row。</li>
<li>SITE 的方向通常有 X，Y，R90 三个参数。X 代表可以沿 X 轴翻转，Y 代表可以沿 Y 轴翻转，R90 代表可以任意翻转。</li>
<li>SIZE 定义了 site 的宽度，通常 std cell 都是 site 的整数倍高度，宽度</li>
</ul>
<h6 id="rowstandardl0-cell">Row(Standard/l0 cell 摆放位置)<a class="headerlink" href="#rowstandardl0-cell" title="Permanent link">&para;</a></h6>
<p><img alt="image-20241002192323907" src="../assets/image-20241002192323907.png" /></p>
<ul>
<li>整数倍 Site</li>
<li>Row 也有自己的方向，如上图箭头所示，通常相邻的 row 会 abut 且 flip，这样相邻 site 可以 <strong>共用一根电源线</strong>，节省 Power 资源。</li>
<li>Row Cut 问题</li>
<li>非整数倍 Row</li>
<li>低功耗设计</li>
</ul>
<p><img alt="image-20241002193605284" src="../assets/image-20241002193605284.png" /></p>
<ul>
<li>所有 std cell 都必须 snap 到 row 上面，这是最基本的 place 规则</li>
</ul>
<p><img alt="image-20241002192638409" src="../assets/image-20241002192638409.png" /></p>
<ul>
<li>默认的 std cell 摆放方向遵从 Row 的方向，即方向箭头一致，但是根据 cell 本身的 symmetry，std cell 的摆放位置也可以有如上图所示的选择</li>
</ul>
<p><img alt="image-20241002192847064" src="../assets/image-20241002192847064.png" /></p>
<ul>
<li>实际 design 中，我们还能经常见到一些其他种类的 row。常见的有 double height，trible height 的 row，用来摆放两倍高，三倍高的 cell。</li>
<li>一般我们只允许创建整数倍高的 row，而在 Voltage island 中，我们允许创建非整数倍高的 Row，比如默认电压区域用的是 9T 单元，而在 Voltage island 中我们使用了 12T 的 cell，这时候就需要创建非整数倍高度的 row</li>
</ul>
<h6 id="endcap-welltap-decap">EndCap, WellTap, Decap<a class="headerlink" href="#endcap-welltap-decap" title="Permanent link">&para;</a></h6>
<p>在后端物理设计中，除了与，非，或等一些常见的标准单元外，还有一些特殊的物理单元(physical cell)，它们通常 <strong>没有逻辑电路</strong>，不存在与 netlist 当中，但是对整个芯片的运行，稳定却起着举足轻重的作用。</p>
<h6 id="endcap">EndCap<a class="headerlink" href="#endcap" title="Permanent link">&para;</a></h6>
<ul>
<li>也叫 boundary cell， 拐角单元</li>
<li>是一种特殊的标准单元。</li>
<li>作用是确保每个 nwell 都是 nwell enclosed，类似一个封闭环。主要加在 row 的结尾(两边都要加)，以及 memory 或者其他 block 的周围包边</li>
<li><img alt="image-20241002193847751" src="../assets/image-20241002193847751.png" /></li>
<li><img alt="image-20241002193923030" src="../assets/image-20241002193923030.png" /></li>
</ul>
<h6 id="welltap">WellTap<a class="headerlink" href="#welltap" title="Permanent link">&para;</a></h6>
<ul>
<li>
<p>welltap 是只包含 well contact 的 cell，将衬底接到电源和地网络，避免衬底悬浮。主要防止 CMOS 器件的寄生闩锁效应(latch-up)</p>
</li>
<li>
<p>一般 tap cell 的作用范围是 30~40um, 即每隔 60um 左右放置一个 tap cell，具体的数据要参考艺商给的 document</p>
</li>
<li>
<p>well tap cell 一般交错摆放，类似棋盘分布。<img alt="image-20241002194219100" src="../assets/image-20241002194219100.png" /></p>
</li>
</ul>
<h6 id="decap">Decap<a class="headerlink" href="#decap" title="Permanent link">&para;</a></h6>
<ul>
<li>Decap cell，去耦单元，这是一种特殊的 <strong>Filler cell</strong>。</li>
<li>当电路中大量单元同时翻转时会导致冲放电瞬间电流增大，使得电路 <strong>动态供电电压下降</strong> 或地线电压升高，引起动态电压降俗称 <strong>IR-drop</strong>。为了避免 IR-drop 对电路性能的影响，通常在电源和地线之间放置 <strong>由 MOS 管构成的电容</strong>，这种电容被称为去耦电容或者去耦单元，它的作用是在瞬态电流增大，电压下降时向电路补充电流以保持电源和地线之间的电压稳定，防止电源线的电压降和地线电压的升高。</li>
</ul>
<h6 id="filler">Filler<a class="headerlink" href="#filler" title="Permanent link">&para;</a></h6>
<p>缓解 dynamic IR drop, eco</p>
<ul>
<li>
<p>通常是单元库中与逻辑无关的填充物</p>
</li>
<li>
<p>可以分为 I/O filler(pad filler)以及普通的 standard cell filler.</p>
</li>
<li>
<p><strong>pad filer</strong>，通常是用来填充 I/O 单元与 I/O 单元之间的空隙。为了更好的完成 power ring，也就是 ESD 之间的电源连接。通常是在 Floorplan 阶段时添加。</p>
</li>
</ul>
<p><img alt="image-20241002200454998" src="../assets/image-20241002200454998.png" /></p>
<ul>
<li><strong>standard cell filler</strong>, 也是为了填充 std cell 之间的空隙。主要是为了满足 DRC 规则和设计需求，并形成 power rails。这个在 route 之前，之后加都可以。</li>
</ul>
<p><img alt="image-20241002200509231" src="../assets/image-20241002200509231.png" /></p>
<ul>
<li>
<p><strong>Decap cell，去耦单元</strong>，这是一种特殊的 <strong>Filler cell</strong>。</p>
</li>
<li>
<p>当电路中大量单元同时翻转时会导致冲放电瞬间电流增大，使得电路 <strong>动态供电电压下降</strong> 或地线电压升高，引起动态电压降俗称 <strong>IR-drop</strong>。为了避免 IR-drop 对电路性能的影响，通常在电源和地线之间放置 <strong>由 MOS 管构成的电容</strong>，这种电容被称为去耦电容或者去耦单元，它的作用是在瞬态电流增大，电压下降时向电路补充电流以保持电源和地线之间的电压稳定，防止电源线的电压降和地线电压的升高。</p>
</li>
<li>
<p>需要注意的是 Decap cell 是 <strong>带有 metal 层</strong> 的，为了不影响工具 routing resource，一般建议是最后 <strong>routing 全部结束后再加</strong>，加完之后再添加普通的不带 metal 的 filer.</p>
</li>
</ul>
<h6 id="hard-ip"><strong>hard IP</strong><a class="headerlink" href="#hard-ip" title="Permanent link">&para;</a></h6>
<ul>
<li>
<p>hard IP 就是 macro</p>
</li>
<li>
<p>macro 有自己 <strong>单独的 lef 文件</strong>， 定义形状，pin 信息等等</p>
</li>
<li>
<p>hard IP 一般有：SRAM/DDR/PLL/AD/DA</p>
</li>
</ul>
<p><img alt="image-20240930143754210" src="../assets/image-20240930143754210.png" /></p>
<ul>
<li>
<p>常用原则</p>
</li>
<li>
<p>Macro 一般摆放在芯片或模块(block)边缘</p>
</li>
<li>Macro 摆放时尽量缩短与其通信的 10 或 Macro 的距离</li>
<li>Macro 摆放时尽量缩短其 pins 与 standard cell 谡辑的距离</li>
<li>Macro 之间留够安全距离</li>
<li>重视 macro 之间的 channel，可以 abut 尽量 abut, channel 中在 place 时根据需求加入 soft blockage</li>
<li>标准单元区域尽量保持连续，不要产生小宽度的 channel; 长宽比接近 1</li>
</ul>
<h6 id="backbox">backbox<a class="headerlink" href="#backbox" title="Permanent link">&para;</a></h6>
<p>BlackBox 类似于一个 HardMacro，它内部的东西完全看不见，只是一个黑盒子，但是它又类似于一个 ModuleBoundary。它可以被改变形状，而且它可以被分配 pin 和被分割出去(partition)。如下图所示，灰色的形状就是 Black Box。</p>
<p><img alt="image-20241002194534751" src="../assets/image-20241002194534751.png" /></p>
<p>BlackBox 是一种较为粗糙的模型，由于它看不见里面的东西，这样的结构使得它做任何 implementation 速度都很快，取而代之的精准度就会相对较低</p>
<h6 id="track-pitch">track, pitch<a class="headerlink" href="#track-pitch" title="Permanent link">&para;</a></h6>
<h6 id="track">track<a class="headerlink" href="#track" title="Permanent link">&para;</a></h6>
<ul>
<li>走线轨道，信号线通常在 track 上</li>
<li>可以约束走线的方向</li>
<li>Std Cell 的高度通常用 metal2 track pitch 来表示，常用的 std cell 库有 7T/9T /12T，就是以 track 来区分的， 9T 就是说 std cell 的高度范围内可以走九条线，所以一般来讲， 7Tcell 的 size 最小， 9T cell 的 size 稍大。</li>
<li>布线时，往往第一层一般是水平，第二层垂直，相互交替</li>
</ul>
<p>.lef 中定义如下，举例：</p>
<div class="highlight"><pre><span></span><code><span class="nv">LAYER</span><span class="w"> </span>M1
<span class="nv">TYPE</span><span class="w"> </span>ROUTING<span class="w"> </span><span class="k">;</span><span class="c">#TYPE ROUTING代表这是一层走线层，我们还有其他的type包括Implant, Masterslice等.</span>
<span class="nv">DIRECTION</span><span class="w"> </span>VERTICAL<span class="w"> </span><span class="k">;</span><span class="w"> </span><span class="c">#DIRECTION代表这层Metal prefer走线方向，这边值得注意的是，每层track会分为pref track和non pref track。pref track就是这层layer上主流的走线方向，那剩下的non pref track就是非主流方向。因此上述例子中的主流走线方向就是vertical(纵向)，非主流就是横向(honrizontal)。通常。走non-pref track的wire会比较宽，这样就比较占用绕线资源。所以，一般不推荐使用non-pref track。特别是在先进工艺的设计中，绕线资源极其紧张，一般很少用到non-pref track.</span>
<span class="nv">PITCH</span><span class="w"> </span><span class="mf">0.090</span><span class="w"> </span><span class="mf">0.064</span><span class="w"> </span><span class="err">#</span>track之间的间距<span class="err">，</span>垂直方向间距是0.09<span class="err">，</span>水平方向是0.064.
<span class="nv">OFFSET</span><span class="w"> </span><span class="mf">0.000</span><span class="w"> </span><span class="mf">0.000</span><span class="w"> </span><span class="err">#</span>第一条track偏离起始点的举例
<span class="nv">MAXWIDTH</span><span class="w"> </span><span class="mi">2</span><span class="k">;</span><span class="w"> </span><span class="c">#WIDTH就代表默认这层layer上wire的宽度？MAXWIDTH就代表最高不能超过多少width</span>
<span class="nv">WIDTH</span><span class="w"> </span><span class="mf">0.032</span><span class="k">;</span>
</code></pre></div>
<p><img alt="image-20240930142548304" src="../assets/image-20240930142548304.png" /></p>
<h6 id="grid"><strong>Grid</strong><a class="headerlink" href="#grid" title="Permanent link">&para;</a></h6>
<ul>
<li>Litho Grid，中文名，光刻格点。又被称为制造单元格点，这是 <strong>最基本的网格单元</strong>，任何元件都要对 Litho Grid 上，不然就无法被制造</li>
<li>它定义在 design 的 <strong>technology LEF</strong>. e.g.: <code>MANUFACTURINGGRID 0.001;</code>. 这就代表着改设计的制造单元格点间距为 0.001, 起始点是 Die Box 的 lower left 角上</li>
</ul>
<p><img alt="image-20240930142930084" src="../assets/image-20240930142930084.png" /></p>
<h6 id="blockage-halo">Blockage, halo<a class="headerlink" href="#blockage-halo" title="Permanent link">&para;</a></h6>
<p><img alt="image-20240930143227587" src="../assets/image-20240930143227587.png" /></p>
<h6 id="net-wire">Net, Wire<a class="headerlink" href="#net-wire" title="Permanent link">&para;</a></h6>
<h6 id="net">Net<a class="headerlink" href="#net" title="Permanent link">&para;</a></h6>
<ul>
<li>线网，也就是 Verilog 里的 wire(还有 tri、wor、trior、wand、triand、trireg、tri1、tri0、supply0、supply1)</li>
</ul>
<p>Wire</p>
<ul>
<li>后端工具中的 wire 指的是 net 的 <strong>物理化概念</strong></li>
<li>每一条 net 在后端工具里面是由许多小段的 wire 组成，每一小段 wire 我们称之为 wire segment.</li>
<li>wire 按照类型可以分为 Regular Wire(信号线)，Special Wire(电源线)，Patch Wire(补丁线)。</li>
<li>Regular Wire 就是我们平常见到的信号连线，连接各个 Siqnal Pin 的金属线段。每层金属层上的 Regular wire 默认的宽度都是一样的。</li>
<li>Special Wire 就是电源接地线，平常我们所见到的 power ring，stripes，power rail 等都是 Special Wire。<strong>一般用高层金属走线.</strong></li>
<li>Patch Wire，我们称之为补丁线。这是先进工艺中的一种走线，用于修复 Min Area，MinStep 等 DRC，不属于任何 net。</li>
</ul>
<h6 id="pin">Pin<a class="headerlink" href="#pin" title="Permanent link">&para;</a></h6>
<ul>
<li>
<p>引脚</p>
</li>
<li>
<p>分为 Instance Pin, I/O Pin, Physical Pin, Partition Pin:</p>
</li>
<li>
<p>Instance Pin: cell 的 pin</p>
</li>
<li>
<p>I/O Pin: 模块输入输出，也叫 IO port</p>
<p><img alt="image-20241002204352530" src="../assets/image-20241002204352530.png" /></p>
</li>
<li>
<p>Physical Pin: Physical Pin 是 IO pin 具体物理化的信息，该引脚用于底层模块与上层模块拼接时的接口，类似一个纽扣一样，定义模块走线的起点和终点。它也是有具体的金属层参数信息，和普通 wire 一样。</p>
<p><img alt="image-20241002204357609" src="../assets/image-20241002204357609.png" /></p>
</li>
<li>
<p>Partition Pin: 切分模块的引脚。用于在顶层模块未切分时，定义 physical pin 的位置，这个阶段的 physical pin，我们称之为 partition pin。和 Physical Pin 一样，他具有实际的金属层参数信息。</p>
<p><img alt="image-20241002204339153" src="../assets/image-20241002204339153.png" /></p>
</li>
</ul>
<h6 id="power-rings-power-stripes">Power Rings (电源环) &amp; Power Stripes<a class="headerlink" href="#power-rings-power-stripes" title="Permanent link">&para;</a></h6>
<p><img src="assets/image-20250608194740791.png" alt="image-20250608194740791" style="zoom: 30%;" /></p>
<p><strong>Power Rings (电源环)</strong></p>
<p>定义</p>
<p>电源环是围绕芯片核心区域的封闭环形电源网络，通常位于标准单元阵列的外侧边缘。</p>
<p>结构特点</p>
<ul>
<li>
<p>形成闭合环路，围绕整个设计核心</p>
</li>
<li>
<p>使用较宽的金属线以减少电阻</p>
</li>
<li>
<p>通常在顶层金属实现（如您的设计中使用MTTC/M7）</p>
</li>
</ul>
<p>主要作用</p>
<ul>
<li>供电入口点：作为电源进入芯片核心区域的主要入口</li>
<li>降低电阻：提供低阻抗电源分发路径</li>
<li>均匀分布：确保电源均匀地分布到芯片四周</li>
<li>减少IR压降：环形结构可从多个方向提供电源，减少压降</li>
</ul>
<p><strong>Power Stripes (电源条)</strong></p>
<p>定义</p>
<p>电源条是贯穿芯片核心区域的直线电源网络，通常呈垂直和水平交错排列。</p>
<p>结构特点</p>
<ul>
<li>
<p>平行排列的直线结构</p>
</li>
<li>
<p>垂直和水平方向交错布置</p>
</li>
<li>
<p>与电源环相连接</p>
</li>
</ul>
<p>主要作用</p>
<ul>
<li>细粒度分发：将电源从外围环分发到芯片内部各处</li>
<li>减少局部IR压降：降低芯片内部区域的电源电压变化</li>
<li>提供供电网格：形成覆盖整个芯片的电源网格</li>
<li>降低电迁移风险：通过提供多路径供电减少单一金属线的电流密度</li>
</ul>
<h4 id="placement">placement<a class="headerlink" href="#placement" title="Permanent link">&para;</a></h4>
<p><img alt="image-20241005160434746" src="../assets/image-20241005160434746.png" /></p>
<p>摆放标准单元，同时满足各种 constraint</p>
<p>会删掉综合后加入的 buffer</p>
<h5 id="_57">基础概念<a class="headerlink" href="#_57" title="Permanent link">&para;</a></h5>
<ul>
<li>Tie High/Low</li>
</ul>
<p>电压转换</p>
<p>尺寸越小越重要，静电</p>
<ul>
<li>Global/Detail Place</li>
</ul>
<p>Detail 是把 Global 后的单元放到网格上同时满足 constraint 要求</p>
<h4 id="cts">CTS<a class="headerlink" href="#cts" title="Permanent link">&para;</a></h4>
<p>placement 后的 clock tree 是理想的（没有延时）</p>
<p>主要的行为是插入 buffer/inverter</p>
<p>希望到同一级（流水线的级？）的时钟 delay 是一致的</p>
<p>如果有不同 clock，也要考虑 clock 之间的影响 </p>
<p>innouvs 的 CTS 工具叫 ccopt</p>
<p>评价指标：(latency (insertion delay), skew, clock power, clock em, long common path(cppr), duty cycle)</p>
<h5 id="_58">基本概念<a class="headerlink" href="#_58" title="Permanent link">&para;</a></h5>
<h4 id="route">route<a class="headerlink" href="#route" title="Permanent link">&para;</a></h4>
<p>三个步骤：global route, track assignment（分配 global route 的 track 给对应的 net）, detail route</p>
<h5 id="_59">基本知识<a class="headerlink" href="#_59" title="Permanent link">&para;</a></h5>
<h6 id="nano">nano<a class="headerlink" href="#nano" title="Permanent link">&para;</a></h6>
<h6 id="si">SI<a class="headerlink" href="#si" title="Permanent link">&para;</a></h6>
<h6 id="antenna">Antenna<a class="headerlink" href="#antenna" title="Permanent link">&para;</a></h6>
<h6 id="eco-route">eco route<a class="headerlink" href="#eco-route" title="Permanent link">&para;</a></h6>
<p>工艺制造，栅极放电破坏</p>
<p>signoff 的时候会检查这个问题，工具会加上</p>
<p>连接到栅极的面积不要太大</p>
<h4 id="sign-off">sign off<a class="headerlink" href="#sign-off" title="Permanent link">&para;</a></h4>
<h5 id="_60">基本知识<a class="headerlink" href="#_60" title="Permanent link">&para;</a></h5>
<h6 id="mode">mode<a class="headerlink" href="#mode" title="Permanent link">&para;</a></h6>
<h6 id="function">function<a class="headerlink" href="#function" title="Permanent link">&para;</a></h6>
<ul>
<li>最常见</li>
<li>标准时序约束模式</li>
</ul>
<h6 id="scan-shift">Scan shift<a class="headerlink" href="#scan-shift" title="Permanent link">&para;</a></h6>
<ul>
<li>移位扫描模式</li>
<li>由于芯片内部是个黑盒子，在外部难以控制。我们将芯片中的所应用的普通寄存器替换成带有扫描功能的扫描寄存器，首尾相连成串，从而可以实现附加的测试功能，这就是 Scan chain 的概念。下图一就是扫描寄存器，下图二就是将扫描寄存器串起来的 Scan Chain <img alt="image-20241002202752859" src="../assets/image-20241002202752859.png" /></li>
<li><img alt="image-20241002202818164" src="../assets/image-20241002202818164.png" /></li>
</ul>
<h6 id="capture">Capture<a class="headerlink" href="#capture" title="Permanent link">&para;</a></h6>
<ul>
<li>也叫 Stuck-at 模式</li>
<li>DC 模式：主要检查我们平时常见的 stuckat 0/1 错误。比如下图中的 inverter A 端如果被接到了 VSS 端的话，就是一个 stuck at 1 的 fault <img alt="image-20241002203035446" src="../assets/image-20241002203035446.png" /></li>
</ul>
<h6 id="asst">ASST<a class="headerlink" href="#asst" title="Permanent link">&para;</a></h6>
<p><img alt="image-20241002203206577" src="../assets/image-20241002203206577.png" /></p>
<h6 id="at-speed-mbist">At Speed MBIST<a class="headerlink" href="#at-speed-mbist" title="Permanent link">&para;</a></h6>
<p><img alt="image-20241002203408688" src="../assets/image-20241002203408688.png" /></p>
<h6 id="boundary-scan">Boundary Scan<a class="headerlink" href="#boundary-scan" title="Permanent link">&para;</a></h6>
<p><img alt="image-20241002203430961" src="../assets/image-20241002203430961.png" /></p>
<h3 id="common-command">common command<a class="headerlink" href="#common-command" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c">#gui</span>
<span class="nv">innovus</span><span class="w"> </span><span class="o">-</span>no_gui
<span class="nv">win</span><span class="o">/</span>win_off<span class="w"> </span><span class="err">#</span>gui<span class="w"> </span>开关<span class="w"> </span>win_off用不了<span class="err">？</span>

<span class="c">#run</span>
<span class="nv">innovus</span><span class="w"> </span><span class="o">-</span>init<span class="w"> </span>init.tcl
<span class="nb">source</span><span class="w"> </span>xxx.tcl


<span class="nv">dbGet</span><span class="w"> </span>top.insts.name
<span class="nv">selectInst</span><span class="w"> </span>xxx_insts_name
<span class="nv">dbGet</span><span class="w"> </span>selected.pgInstTerms.name

<span class="c">#kill</span>
<span class="nv">ps</span><span class="w"> </span><span class="o">-</span>ef<span class="w"> </span><span class="o">|</span><span class="w"> </span>grep<span class="w"> </span>innovus
<span class="nv">killall</span><span class="w"> </span><span class="o">-</span><span class="mi">9</span><span class="w"> </span>innovus
</code></pre></div>
<h3 id="_61">实战<a class="headerlink" href="#_61" title="Permanent link">&para;</a></h3>
<h4 id="0_">0_所需文件：<a class="headerlink" href="#0_" title="Permanent link">&para;</a></h4>
<ul>
<li>
<p>netlist</p>
</li>
<li>
<p>tech_lef, cell_lef(standard cell, io, ip(ram))</p>
</li>
<li>
<p>pex_tech(best, worst, typ_qrcTechFile)</p>
</li>
<li>
<p>mmmc.viewDefinition.tcl</p>
</li>
</ul>
<p><img alt="image-20240930121217225" src="../assets/image-20240930121217225.png" /></p>
<ul>
<li>
<p>library_set </p>
<ul>
<li>fast standard cell's .lib, ip's .lib</li>
<li>slow standard cell's .lib, ip's .lib</li>
</ul>
</li>
<li>
<p>rc corner</p>
<ul>
<li>best/worst qrcTechFile(unreadable)</li>
<li><img alt="image-20240930172333729" src="../assets/image-20240930172333729.png" /></li>
</ul>
</li>
<li>
<p>delay_corner</p>
<p><img alt="image-20240930172420305" src="../assets/image-20240930172420305.png" /></p>
</li>
<li>
<p>constraint_mode</p>
<p>config sdc_file</p>
</li>
<li>
<p>analysis_view</p>
<p><img alt="image-20240930173206702" src="../assets/image-20240930173206702.png" /></p>
</li>
</ul>
<h4 id="1_">1_数据初始化<a class="headerlink" href="#1_" title="Permanent link">&para;</a></h4>
<ul>
<li>
<p>设置 netlist</p>
</li>
<li>
<p>tech_lef，cell_lef</p>
</li>
<li>
<p>pex_tech</p>
</li>
<li>
<p>set scenarios</p>
</li>
</ul>
<p><img alt="image-20240930160834663" src="../assets/image-20240930160834663.png" /></p>
<ul>
<li>set cell type</li>
</ul>
<p><img alt="image-20240930160845601" src="../assets/image-20240930160845601.png" /></p>
<div class="highlight"><pre><span></span><code><span class="c">##############################################################</span>
<span class="c"># Common design settings</span>
<span class="c"># Created by Yanfuti</span>
<span class="c">##############################################################</span>
<span class="c">### design information</span>
<span class="k">set</span><span class="w"> </span>design<span class="w"> </span><span class="s2">&quot;leon&quot;</span>

<span class="c">### design data directory</span>
<span class="k">set</span><span class="w"> </span>project_root<span class="w">    </span><span class="s2">&quot;..&quot;</span>
<span class="k">set</span><span class="w"> </span>library_root<span class="w">    </span><span class="s2">&quot;~/BackEnd/innovus_learn/library&quot;</span>
<span class="k">set</span><span class="w"> </span>reports_root<span class="w">    </span><span class="s2">&quot;${project_root}/reports&quot;</span>

<span class="c">### gate level netlist files</span>
<span class="k">set</span><span class="w"> </span>import_netlists<span class="w">     </span><span class="s2">&quot;&quot;</span>
<span class="nb">lappend</span><span class="w"> </span>import_netlists<span class="w"> </span><span class="s2">&quot;${project_root}/netlist/post_syn_netlist/${design}.vnet.gz&quot;</span>
<span class="c">### SDC files</span>

<span class="c">### tech lef</span>
<span class="k">set</span><span class="w"> </span>tech_lef<span class="w"> </span><span class="s2">&quot;${library_root}/tlef/gsclib045_tech.lef&quot;</span>

<span class="c">### library files</span>
<span class="k">set</span><span class="w"> </span>cell_lef<span class="w"> </span><span class="s2">&quot;&quot;</span>
<span class="nb">lappend</span><span class="w"> </span>lef_files<span class="w"> </span><span class="s2">&quot;${library_root}/lef/gsclib045_hvt_macro.lef&quot;</span>
<span class="nb">lappend</span><span class="w"> </span>lef_files<span class="w"> </span><span class="s2">&quot;${library_root}/lef/gsclib045_macro.lef&quot;</span>
<span class="nb">lappend</span><span class="w"> </span>lef_files<span class="w"> </span><span class="s2">&quot;${library_root}/lef/MEM1_256X32.lef&quot;</span>
<span class="nb">lappend</span><span class="w"> </span>lef_files<span class="w"> </span><span class="s2">&quot;${library_root}/lef/MEM2_128X32.lef&quot;</span>
<span class="nb">lappend</span><span class="w"> </span>lef_files<span class="w"> </span><span class="s2">&quot;${library_root}/lef/pdkIO.lef&quot;</span>
<span class="nb">lappend</span><span class="w"> </span>lef_files<span class="w"> </span><span class="s2">&quot;${library_root}/lef/pads.lef&quot;</span>

<span class="c">### PEX tech</span>
<span class="k">set</span><span class="w"> </span>qrc_tech<span class="k">(</span><span class="nv">rcbest</span><span class="k">)</span><span class="w">        </span><span class="s2">&quot;${library_root}/tech/qrc/rcbest/qrcTechFile&quot;</span>
<span class="k">set</span><span class="w"> </span>qrc_tech<span class="k">(</span><span class="nv">rcworst</span><span class="k">)</span><span class="w">       </span><span class="s2">&quot;${library_root}/tech/qrc/rcworst/qrcTechFile&quot;</span>
<span class="k">set</span><span class="w"> </span>qrc_tech<span class="k">(</span><span class="nv">typical</span><span class="k">)</span><span class="w">       </span><span class="s2">&quot;${library_root}/tech/qrc/typical/qrcTechFile&quot;</span>

<span class="c">### view (scenarios) of each step</span>
<span class="k">set</span><span class="w"> </span>default_scenarios<span class="w">  </span><span class="s2">&quot;func_slow_rcworst&quot;</span>
<span class="k">set</span><span class="w"> </span>placeopt_scenarios<span class="w"> </span><span class="s2">&quot;func_slow_rcworst&quot;</span>
<span class="k">set</span><span class="w"> </span>cts_scenarios<span class="w">      </span><span class="s2">&quot;cts_slow_rcworst&quot;</span>
<span class="k">set</span><span class="w"> </span>clockopt_scenarios<span class="w"> </span><span class="s2">&quot;func_slow_rcworst func_fast_rcbest&quot;</span>
<span class="k">set</span><span class="w"> </span>routeopt_scenarios<span class="w"> </span><span class="s2">&quot;func_slow_rcworst func_fast_rcbest&quot;</span>

<span class="c">### cells type settings</span>
<span class="k">set</span><span class="w"> </span>fillers_ref<span class="w">     </span><span class="s2">&quot;FILL1 FILL16 FILL2 FILL32 FILL4 FILL64 FILL8&quot;</span>
<span class="k">set</span><span class="w"> </span>welltap_ref<span class="w">     </span><span class="s2">&quot;DECAP8&quot;</span>

<span class="c">##############################################################</span>
<span class="c"># END</span>
<span class="c">##############################################################</span>
</code></pre></div>
<h4 id="2_import">2_import<a class="headerlink" href="#2_import" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="k">set</span><span class="w"> </span>init_top_cell<span class="w"> </span><span class="nv">$design</span><span class="w">  </span><span class="err">#</span>给该design赋一个名字
<span class="k">set</span><span class="w"> </span>init_verilog<span class="w"> </span><span class="nv">$import_netlists</span><span class="w"> </span><span class="err">#</span>设置verilog文件的路径
<span class="k">set</span><span class="w"> </span>init_lef_file<span class="w"> </span><span class="k">[</span><span class="nb">concat</span><span class="w"> </span><span class="nv">$tech_lef</span><span class="w"> </span><span class="nv">$lef_files</span><span class="k">]</span><span class="w"> </span><span class="err">#</span>设置lef<span class="w"> </span>file的路径
<span class="k">set</span><span class="w"> </span>init_pwr_net<span class="w"> </span><span class="s2">&quot;VDD&quot;</span><span class="w"> </span><span class="err">#</span>表示初始电源网络的标识符或名称
<span class="k">set</span><span class="w"> </span>init_gnd_net<span class="w"> </span><span class="s2">&quot;VSS&quot;</span><span class="w"> </span><span class="err">#</span>表示初始接地网络的标识符或名称
<span class="k">set</span><span class="w"> </span>init_mmmc_file<span class="w"> </span><span class="s2">&quot;../viewDefinition.tcl&quot;</span><span class="w"> </span><span class="err">#</span>设置mmmc文件的路径

<span class="nv">setImportMode</span><span class="w"> </span><span class="o">-</span>keepEmptyModule<span class="w"> </span>true<span class="w">  </span><span class="err">#</span><span class="o">-</span>keepEmptyModule是一个命令的参数<span class="err">，</span>它指定是否在导入设计时保留空的模块<span class="err">，</span>空的模块<span class="err">，</span>顾名思义<span class="err">，</span>没有任何内容<span class="err">（</span>如实例化<span class="err">，</span>信号<span class="err">，</span>逻辑<span class="err">，</span>声明等<span class="err">）</span>的模块<span class="err">。</span>通过保留这些模块<span class="err">，</span>可以确保设计的层次结构不变<span class="err">，</span>方便后续的设计迭代与调试<span class="err">。</span>

<span class="c">### read design</span>
<span class="nv">init_design</span><span class="w">       </span><span class="err">#</span>开始导入设计
<span class="nv">setIoFlowFlag</span><span class="w"> </span><span class="mi">0</span><span class="w">  </span><span class="err">#</span>此内容可以先忽略

<span class="c">### connect pg (pg--power ground)</span>
<span class="nv">globalNetConnect</span><span class="w"> </span><span class="nv">$init_pwr_net</span><span class="w"> </span><span class="o">-</span>type<span class="w"> </span>pgpin<span class="w"> </span><span class="o">-</span>pin<span class="w"> </span>VDD<span class="w"> </span><span class="o">-</span>all<span class="w">  </span><span class="err">#</span>globalNetConnect<span class="err">，</span>用于连接全局网络也就是用于定义全局电源<span class="err">（</span>Power<span class="err">）</span>和地<span class="err">（</span>Ground<span class="err">）</span>连接<span class="err">。</span>在后端设计阶段<span class="err">，</span>需要明确的定义电源和地如何连接到各个模块和单元<span class="err">。</span><span class="nv">$init_pwr_net</span><span class="w"> </span>是一个变量<span class="err">，</span>表示初始电源网络的名称<span class="err">，</span>此处等价于VDD<span class="err">，</span><span class="o">-</span>type<span class="w"> </span>是指定连接的类型是电源<span class="o">/</span>地引脚<span class="err">（</span>pgpin<span class="err">）</span><span class="o">-------</span>pgpin<span class="err">（</span>power<span class="w"> </span>ground<span class="w"> </span>pin<span class="err">），</span><span class="o">-</span>pin<span class="w"> </span>VDD<span class="err">，</span>这是另一个参数<span class="err">，</span>用于指定连接的引脚名称或标识符<span class="err">，</span>这里是指定连接到电源引脚<span class="err">，</span>也就是要将<span class="nv">$init_pwr_net</span><span class="w"> </span>连接到所有名为VDD的引脚上<span class="err">，</span><span class="o">-</span>all<span class="w"> </span>表示该连接适用于设计中的所有实例<span class="err">。</span>
<span class="nv">globalNetConnect</span><span class="w"> </span><span class="nv">$init_gnd_net</span><span class="w"> </span><span class="o">-</span>type<span class="w"> </span>pgpin<span class="w"> </span><span class="o">-</span>pin<span class="w"> </span>VSS<span class="w"> </span><span class="o">-</span>all<span class="w"> </span><span class="err">#</span>同上<span class="err">，</span>这里不挨个解释<span class="err">，</span>综合说明一下<span class="err">，</span>也可看作是上一条的总结<span class="err">：</span>将变量<span class="nv">$init_pwr_net</span><span class="err">（</span>通常是表示某个电源网络<span class="err">，</span>例如<span class="w"> </span>VSS<span class="err">）</span>连接到设计中所有单元和模块中的<span class="w"> </span>VSS<span class="w"> </span>引脚<span class="err">。</span>这种全局连接是为了确保设计中的所有模块和单元都能正确地连接到电源网络<span class="err">，</span>确保电源供给的一致性和可靠性<span class="err">。</span>


<span class="c">### save design</span>
<span class="nb">file</span><span class="w"> </span>delete<span class="w"> </span><span class="o">-</span>force<span class="w"> </span><span class="nv">${data_dir}</span><span class="o">/</span><span class="nv">${current_step}</span>.enc<span class="o">*</span><span class="w"> </span><span class="err">#</span>保存设计之前把该路径下存在的.enc文件全部删除
<span class="nv">saveDesign</span><span class="w"> </span><span class="nv">${data_dir}</span><span class="o">/</span><span class="nv">${current_step}</span>.enc<span class="w"> </span><span class="err">#</span>saveDesign命令<span class="err">，</span>用于保存设计<span class="err">，</span>其后接的是保存设计的文件路径
</code></pre></div>
<p><img alt="image-20240930191541624" src="../assets/image-20240930191541624.png" /></p>
<p><img alt="image-20240930212733953" src="../assets/image-20240930212733953.png" /></p>
<p><strong>mmmc(viewDefinition.tcl)</strong></p>
<div class="highlight"><pre><span></span><code><span class="w">  </span><span class="c">### library set (-aocv or lvf, spatial socv)</span>
<span class="nv">create_library_set</span><span class="w"> </span><span class="o">-</span>name<span class="w"> </span><span class="s2">&quot;fast&quot;</span><span class="w"> </span><span class="o">-</span>timing<span class="err">\</span>
<span class="w">    </span><span class="k">[</span><span class="nb">list</span><span class="w"> </span><span class="err">\</span>
<span class="w">        </span><span class="nv">${library_root}</span><span class="o">/</span><span class="nv">liberty</span><span class="o">/</span>fast_vdd1v2_basicCells.lib<span class="err">\</span>
<span class="w">        </span><span class="nv">${library_root}</span><span class="o">/</span><span class="nv">liberty</span><span class="o">/</span>fast_vdd1v2_basicCells_hvt.lib<span class="err">\</span>
<span class="w">        </span><span class="nv">${library_root}</span><span class="o">/</span><span class="nv">liberty</span><span class="o">/</span>MEM1_256X32_slow.lib<span class="err">\</span>
<span class="w">        </span><span class="nv">${library_root}</span><span class="o">/</span><span class="nv">liberty</span><span class="o">/</span>MEM2_128X32_slow.lib<span class="err">\</span>
<span class="w">    </span><span class="k">]</span>
<span class="nv">create_library_set</span><span class="w"> </span><span class="o">-</span>name<span class="w"> </span><span class="s2">&quot;slow&quot;</span><span class="w"> </span><span class="o">-</span>timing<span class="err">\</span>
<span class="w">    </span><span class="k">[</span><span class="nb">list</span><span class="w"> </span><span class="err">\</span>
<span class="w">        </span><span class="nv">${library_root}</span><span class="o">/</span><span class="nv">liberty</span><span class="o">/</span>slow_vdd1v0_basicCells.lib<span class="err">\</span>
<span class="w">        </span><span class="nv">${library_root}</span><span class="o">/</span><span class="nv">liberty</span><span class="o">/</span>slow_vdd1v0_basicCells_hvt.lib<span class="err">\</span>
<span class="w">        </span><span class="nv">${library_root}</span><span class="o">/</span><span class="nv">liberty</span><span class="o">/</span>MEM1_256X32_slow.lib<span class="err">\</span>
<span class="w">        </span><span class="nv">${library_root}</span><span class="o">/</span><span class="nv">liberty</span><span class="o">/</span>MEM2_128X32_slow.lib<span class="err">\</span>
<span class="w">    </span><span class="k">]</span>

<span class="c">### rc corner</span>
<span class="nv">create_rc_corner</span><span class="w"> </span><span class="o">-</span>name<span class="w"> </span><span class="s2">&quot;rc_best&quot;</span><span class="err">\</span>
<span class="w">    </span><span class="nv">-preRoute_res</span><span class="w"> </span><span class="mf">1.34236</span><span class="err">\</span>
<span class="w">    </span><span class="nv">-postRoute_res</span><span class="w"> </span><span class="mf">1.34236</span><span class="err">\</span>
<span class="w">    </span><span class="nv">-preRoute_cap</span><span class="w"> </span><span class="mf">1.10066</span><span class="err">\</span>
<span class="w">    </span><span class="nv">-postRoute_cap</span><span class="w"> </span><span class="mf">0.960235</span><span class="err">\</span>
<span class="w">    </span><span class="nv">-postRoute_xcap</span><span class="w"> </span><span class="mf">1.22327</span><span class="err">\</span>
<span class="w">    </span><span class="nv">-preRoute_clkres</span><span class="w"> </span><span class="mi">0</span><span class="err">\</span>
<span class="w">    </span><span class="nv">-preRoute_clkcap</span><span class="w"> </span><span class="mi">0</span><span class="err">\</span>
<span class="w">    </span><span class="nv">-postRoute_clkcap</span><span class="w"> </span><span class="k">{</span><span class="nv">0.969117</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="k">}</span><span class="err">\</span>
<span class="w">    </span><span class="nv">-T</span><span class="w"> </span><span class="mi">0</span><span class="err">\</span>
<span class="w">    </span><span class="nv">-qx_tech_file</span><span class="w"> </span><span class="nv">${library_root}</span><span class="o">/</span>tech<span class="o">/</span>qrc<span class="o">/</span>rcbest<span class="o">/</span>qrcTechFile
<span class="nv">create_rc_corner</span><span class="w"> </span><span class="o">-</span>name<span class="w"> </span><span class="s2">&quot;rc_worst&quot;</span><span class="err">\</span>
<span class="w">    </span><span class="nv">-preRoute_res</span><span class="w"> </span><span class="mf">1.34236</span><span class="err">\</span>
<span class="w">    </span><span class="nv">-postRoute_res</span><span class="w"> </span><span class="mf">1.34236</span><span class="err">\</span>
<span class="w">    </span><span class="nv">-preRoute_cap</span><span class="w"> </span><span class="mf">1.10066</span><span class="err">\</span>
<span class="w">    </span><span class="nv">-postRoute_cap</span><span class="w"> </span><span class="mf">0.960234</span><span class="err">\</span>
<span class="w">    </span><span class="nv">-postRoute_xcap</span><span class="w"> </span><span class="mf">1.22327</span><span class="err">\</span>
<span class="w">    </span><span class="nv">-preRoute_clkres</span><span class="w"> </span><span class="mi">0</span><span class="err">\</span>
<span class="w">    </span><span class="nv">-preRoute_clkcap</span><span class="w"> </span><span class="mi">0</span><span class="err">\</span>
<span class="w">    </span><span class="nv">-postRoute_clkcap</span><span class="w"> </span><span class="k">{</span><span class="nv">0.969117</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="k">}</span><span class="err">\</span>
<span class="w">    </span><span class="nv">-T</span><span class="w"> </span><span class="mi">125</span><span class="err">\</span>
<span class="w">    </span><span class="nv">-qx_tech_file</span><span class="w"> </span><span class="nv">${library_root}</span><span class="o">/</span>tech<span class="o">/</span>qrc<span class="o">/</span>rcworst<span class="o">/</span>qrcTechFile

<span class="c">### delay corner for each pvt (process voltage temperature) : library set + rc corner</span>
<span class="nv">create_delay_corner</span><span class="w"> </span><span class="o">-</span>name<span class="w"> </span>slow_rcworst<span class="err">\</span>
<span class="w">    </span><span class="nv">-library_set</span><span class="w"> </span>slow<span class="err">\</span>
<span class="w">    </span><span class="nv">-rc_corner</span><span class="w"> </span>rc_worst
<span class="nv">create_delay_corner</span><span class="w"> </span><span class="o">-</span>name<span class="w"> </span>fast_rcbest<span class="err">\</span>
<span class="w">    </span><span class="nv">-library_set</span><span class="w"> </span>fast<span class="err">\</span>
<span class="w">    </span><span class="nv">-rc_corner</span><span class="w"> </span>rc_best

<span class="c">### mode : (func + shift + capture)</span>
<span class="c">#一般对不同情况有多个sdc文件，比如现在有两种delay_corner,就可以写两个，不过现在只有一个现成的sdc文件所以只写一个</span>
<span class="nv">create_constraint_mode</span><span class="w"> </span><span class="o">-</span>name<span class="w"> </span>functional<span class="w"> </span><span class="err">\</span>
<span class="w">    </span><span class="nv">-sdc_files</span><span class="w"> </span><span class="k">[</span><span class="nb">list</span><span class="w"> </span><span class="nv">${sdc_file}</span><span class="k">]</span>

<span class="c">### define view (mode + delay corner)</span>
<span class="nv">create_analysis_view</span><span class="w"> </span><span class="o">-</span>name<span class="w"> </span>func_slow_rcworst<span class="w"> </span><span class="o">-</span>constraint_mode<span class="w"> </span>functional<span class="w"> </span><span class="o">-</span>delay_corner<span class="w"> </span>slow_rcworst
<span class="nv">create_analysis_view</span><span class="w"> </span><span class="o">-</span>name<span class="w"> </span>func_fast_rcbest<span class="w">  </span><span class="o">-</span>constraint_mode<span class="w"> </span>functional<span class="w"> </span><span class="o">-</span>delay_corner<span class="w"> </span>fast_rcbest

<span class="c">### set analysis view status</span>
<span class="nv">set_analysis_view</span><span class="w"> </span><span class="o">-</span>setup<span class="w"> </span><span class="k">[</span><span class="nb">list</span><span class="w"> </span>func_slow_rcworst<span class="k">]</span><span class="w"> </span><span class="o">-</span>hold<span class="w"> </span><span class="k">[</span><span class="nb">list</span><span class="w"> </span>func_fast_rcbest<span class="k">]</span>
</code></pre></div>
<h4 id="3_floorplan">3_floorPlan<a class="headerlink" href="#3_floorplan" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="nv">floorPlan</span><span class="w"> </span><span class="o">-</span>site<span class="w"> </span>CoreSite<span class="w"> </span><span class="o">-</span>d<span class="w"> </span><span class="mi">930</span><span class="w"> </span><span class="mf">600.28</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mf">1.71</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mf">1.71</span><span class="w"> </span><span class="o">-</span>fplanOrigin<span class="w"> </span>llcorner<span class="w">  </span><span class="err">#</span><span class="o">-</span>d<span class="w"> </span><span class="o">&lt;</span>W<span class="w"> </span>H<span class="w"> </span>Left<span class="w"> </span>Bottom<span class="w"> </span>Right<span class="w"> </span>Top<span class="o">&gt;</span><span class="w"> </span>得到的是Die<span class="w"> </span>size<span class="k">;</span><span class="w"> </span><span class="nv">-s</span><span class="w"> </span>得到的是Core<span class="w"> </span>size<span class="k">;</span><span class="w">  </span><span class="c">#-fplanOrigin llcorner 设置原点坐标</span>

<span class="c">#手动放置marco: shift+r进入移动模式，选中后移动marco</span>
</code></pre></div>
<p>对齐，移动：用 ctrl 选择多个 macro</p>
<p><img alt="image-20240930213040045" src="../assets/image-20240930213040045.png" /></p>
<p>导出位置 tcl 文件，方便下次自动化：</p>
<p><strong>注意！这部分要手工！！</strong></p>
<div class="highlight"><pre><span></span><code><span class="nv">1.</span>
<span class="nv">选中macrof</span>
<span class="nv">2.</span>
<span class="nv">writeFPlanScript</span><span class="w"> </span><span class="o">-</span>selected<span class="w"> </span><span class="o">-</span>fileName<span class="w"> </span><span class="nv">${project_root}</span><span class="o">/</span>scripts<span class="o">/</span>macro_placement.tcl
<span class="nv">3.</span>
<span class="nb">source</span><span class="w"> </span><span class="nv">${project_root}</span><span class="o">/</span>scripts<span class="o">/</span>macro_placement.tcl<span class="w"> </span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c">#fix macro</span>
<span class="nv">dbGet</span><span class="w"> </span>top.insts.cell.subClass<span class="w"> </span>block
<span class="nv">dbGet</span><span class="w"> </span><span class="k">[</span><span class="nv">dbGet</span><span class="w"> </span>top.insts.cell.subClass<span class="w"> </span>block<span class="w"> </span><span class="o">-</span>p2<span class="k">]</span>.name
<span class="nv">dbSet</span><span class="w"> </span><span class="k">[</span><span class="nv">dbGet</span><span class="w"> </span>top.insts.cell.subClass<span class="w"> </span>block<span class="w"> </span><span class="o">-</span>p2<span class="k">]</span>.pStatus<span class="w"> </span>fixed
</code></pre></div>
<p><img alt="image-20240930214122673" src="../assets/image-20240930214122673.png" /></p>
<p><div class="highlight"><pre><span></span><code><span class="c">### create placement and routing halo around hard macros (instance name vs cell name, and reference name)</span>
<span class="k">set</span><span class="w"> </span>halo_left<span class="w">   </span><span class="mf">2.0</span>
<span class="k">set</span><span class="w"> </span>halo_right<span class="w">  </span><span class="mf">2.0</span>
<span class="k">set</span><span class="w"> </span>halo_top<span class="w">    </span><span class="mf">2.0</span>
<span class="k">set</span><span class="w"> </span>halo_bottom<span class="w"> </span><span class="mf">2.0</span>
<span class="k">set</span><span class="w"> </span>rhalo_space<span class="w"> </span><span class="mf">2.0</span>
<span class="nv">deleteHaloFromBlock</span><span class="w"> </span><span class="o">-</span>allBlock<span class="w"> </span>
deleteRoutingHalo<span class="w"> </span><span class="o">-</span>allBlocks
<span class="c">#addHaloToBlock $halo_left $halo_bottom $halo_right $halo_top -allBlock</span>
<span class="k">foreach</span><span class="w"> </span>macro<span class="w"> </span><span class="k">[</span><span class="nv">dbGet</span><span class="w"> </span><span class="k">[</span><span class="nv">dbGet</span><span class="w"> </span>top.insts.cell.subClass<span class="w"> </span>block<span class="w"> </span><span class="o">-</span>p2<span class="k">]</span>.name<span class="k">]</span><span class="w"> </span><span class="k">{</span>
<span class="w">    </span><span class="nv">addHaloToBlock</span><span class="w"> </span><span class="nv">$halo_left</span><span class="w"> </span><span class="nv">$halo_bottom</span><span class="w"> </span><span class="nv">$halo_right</span><span class="w"> </span><span class="nv">$halo_top</span><span class="w"> </span><span class="nv">$macro</span>
<span class="w">    </span><span class="nv">addRoutingHalo</span><span class="w"> </span><span class="o">-</span>space<span class="w"> </span><span class="nv">$rhalo_space</span><span class="w"> </span><span class="o">-</span>top<span class="w"> </span>Metal11<span class="w"> </span><span class="o">-</span>bottom<span class="w"> </span>Metal1<span class="w"> </span><span class="o">-</span>inst<span class="w"> </span><span class="nv">$macro</span>
<span class="k">}</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c">### place ports</span>
<span class="k">set</span><span class="w"> </span>input_ports<span class="w"> </span><span class="k">[</span><span class="nv">dbGet</span><span class="w"> </span><span class="k">[</span><span class="nv">dbGet</span><span class="w"> </span>top.terms.direction<span class="w"> </span>input<span class="w"> </span><span class="o">-</span>p<span class="k">]</span>.name<span class="k">]</span>
<span class="nv">editPin</span><span class="w"> </span><span class="o">-</span>pinWidth<span class="w"> </span><span class="mf">0.08</span><span class="w"> </span><span class="o">-</span>pinDepth<span class="w"> </span><span class="mf">0.32</span><span class="w"> </span><span class="o">-</span>fixOverlap<span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">-</span>unit<span class="w"> </span>TRACK<span class="w"> </span><span class="o">-</span>spreadDirection<span class="w"> </span>clockwise<span class="w"> </span><span class="o">-</span>layer<span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="o">-</span>spreadType<span class="w"> </span>START<span class="w"> </span><span class="o">-</span>spacing<span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="o">-</span>start<span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">-</span><span class="mi">200</span><span class="w"> </span><span class="o">-</span>pin<span class="w"> </span><span class="nv">$input_ports</span><span class="w"> </span><span class="o">-</span>fixedPin<span class="w"> </span><span class="o">-</span>side<span class="w"> </span>LEFT
<span class="k">set</span><span class="w"> </span>output_ports<span class="w"> </span><span class="k">[</span><span class="nv">dbGet</span><span class="w"> </span><span class="k">[</span><span class="nv">dbGet</span><span class="w"> </span>top.terms.direction<span class="w"> </span>output<span class="w"> </span><span class="o">-</span>p<span class="k">]</span>.name<span class="k">]</span>
<span class="nv">editPin</span><span class="w"> </span><span class="o">-</span>pinWidth<span class="w"> </span><span class="mf">0.08</span><span class="w"> </span><span class="o">-</span>pinDepth<span class="w"> </span><span class="mf">0.32</span><span class="w"> </span><span class="o">-</span>fixOverlap<span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">-</span>unit<span class="w"> </span>TRACK<span class="w"> </span><span class="o">-</span>spreadDirection<span class="w"> </span>counterclockwise<span class="w"> </span><span class="o">-</span>layer<span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="o">-</span>spreadType<span class="w"> </span>START<span class="w"> </span><span class="o">-</span>spacing<span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="o">-</span>start<span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">-</span><span class="mi">200</span><span class="w"> </span><span class="o">-</span>pin<span class="w"> </span><span class="nv">$output_ports</span><span class="w"> </span><span class="o">-</span>fixedPin<span class="w"> </span><span class="o">-</span>side<span class="w"> </span>RIGHT
<span class="nv">dbSet</span><span class="w"> </span>top.terms.pStatus<span class="w"> </span>fixed
</code></pre></div></p>
<div class="highlight"><pre><span></span><code><span class="c">#放置blockage</span>
<span class="nv">2.</span>
<span class="nv">writeFPlanScript</span><span class="w"> </span><span class="o">-</span>selected<span class="w"> </span><span class="o">-</span>fileName<span class="w"> </span><span class="nv">${project_root}</span><span class="o">/</span>scripts<span class="o">/</span>blockage_placement.tcl
<span class="nv">3.</span>
<span class="nb">source</span><span class="w"> </span><span class="nv">${project_root}</span><span class="o">/</span>scripts<span class="o">/</span>blockage_placement.tcl<span class="w"> </span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c">#一些endcap, welltap</span>
<span class="c">### insert boundary cells (endcap)</span>
<span class="k">set</span><span class="w"> </span>endcap_prefix<span class="w">   </span><span class="s2">&quot;ENDCAP&quot;</span>
<span class="k">set</span><span class="w"> </span>endcap_left<span class="w">     </span><span class="s2">&quot;FILL2&quot;</span>
<span class="k">set</span><span class="w"> </span>endcap_right<span class="w">    </span><span class="s2">&quot;FILL2&quot;</span>
<span class="k">set</span><span class="w"> </span>endcap_top<span class="w">      </span><span class="s2">&quot;FILL1&quot;</span>
<span class="k">set</span><span class="w"> </span>endcap_bottom<span class="w">   </span><span class="s2">&quot;FILL1&quot;</span>

<span class="nv">deleteFiller</span><span class="w"> </span><span class="o">-</span>prefix<span class="w"> </span><span class="nv">$endcap_prefix</span>
<span class="nv">setEndCapMode</span><span class="w"> </span><span class="o">-</span>reset
<span class="nv">setEndCapMode</span><span class="w"> </span><span class="o">-</span>topEdge<span class="w"> </span><span class="nv">$endcap_top</span>
<span class="nv">setEndCapMode</span><span class="w"> </span><span class="o">-</span>bottomEdge<span class="w"> </span><span class="nv">$endcap_bottom</span>
<span class="nv">setEndCapMode</span><span class="w"> </span><span class="o">-</span>leftEdge<span class="w"> </span><span class="nv">$endcap_left</span>
<span class="nv">setEndCapMode</span><span class="w"> </span><span class="o">-</span>rightEdge<span class="w"> </span><span class="nv">$endcap_left</span>

<span class="nv">setEndCapMode</span><span class="w"> </span><span class="o">-</span>leftBottomCorner<span class="w"> </span><span class="nv">$endcap_bottom</span>
<span class="nv">setEndCapMode</span><span class="w"> </span><span class="o">-</span>leftTopCorner<span class="w"> </span><span class="nv">$endcap_top</span>
<span class="nv">setEndCapMode</span><span class="w"> </span><span class="o">-</span>rightBottomCorner<span class="w"> </span><span class="nv">$endcap_bottom</span>
<span class="nv">setEndCapMode</span><span class="w"> </span><span class="o">-</span>rightTopCorner<span class="w"> </span><span class="nv">$endcap_top</span>

<span class="nv">setEndCapMode</span><span class="w"> </span><span class="o">-</span>leftBottomEdge<span class="w"> </span><span class="nv">$endcap_left</span>
<span class="nv">setEndCapMode</span><span class="w"> </span><span class="o">-</span>leftTopEdge<span class="w"> </span><span class="nv">$endcap_left</span>
<span class="nv">setEndCapMode</span><span class="w"> </span><span class="o">-</span>rightBottomEdge<span class="w"> </span><span class="nv">$endcap_right</span>
<span class="nv">setEndCapMode</span><span class="w"> </span><span class="o">-</span>rightTopEdge<span class="w"> </span><span class="nv">$endcap_right</span>
<span class="nv">addEndCap</span><span class="w"> </span><span class="o">-</span>prefix<span class="w"> </span><span class="nv">$endcap_prefix</span>

<span class="c">### create well tap cells (fix latch up)</span>
<span class="k">set</span><span class="w"> </span>welltap_prefix<span class="w">   </span><span class="s2">&quot;WELLTAP&quot;</span>
<span class="nv">deleteFiller</span><span class="w"> </span><span class="o">-</span>prefix<span class="w"> </span><span class="nv">$welltap_prefix</span>
<span class="nv">addWellTap</span><span class="w"> </span><span class="o">-</span>prefix<span class="w"> </span><span class="nv">$welltap_prefix</span><span class="w"> </span><span class="o">-</span>cell<span class="w"> </span><span class="nv">$welltap_ref</span><span class="w"> </span><span class="o">-</span>cellInterval<span class="w"> </span><span class="mi">70</span><span class="w"> </span><span class="o">-</span>checkerBoard
</code></pre></div>
<h4 id="4_powerplan">4_powerPlan<a class="headerlink" href="#4_powerplan" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="c">### remove all existing power routing</span>
<span class="nv">editDelete</span><span class="w"> </span><span class="o">-</span>use<span class="w"> </span><span class="k">{</span><span class="nv">POWER</span><span class="k">}</span><span class="w"> </span><span class="o">-</span>shape<span class="w"> </span><span class="k">{</span><span class="nv">RING</span><span class="w"> </span>STRIPE<span class="w"> </span>FOLLOWPIN<span class="w"> </span>IOWIRE<span class="w"> </span>COREWIRE<span class="w"> </span>BLOCKWIRE<span class="w"> </span>PADRING<span class="w"> </span>BLOCKRING<span class="w"> </span>FILLWIRE<span class="w"> </span>FILLWIREOPC<span class="w"> </span>DRCFILL<span class="k">}</span>
</code></pre></div>
<p><img alt="image-20241002210533514" src="../assets/image-20241002210533514.png" /></p>
<div class="highlight"><pre><span></span><code><span class="c">#Add power Stripe</span>
<span class="nv">setAddStripeMode</span><span class="w"> </span><span class="o">-</span>reset
<span class="nv">setAddStripeMode</span><span class="w"> </span><span class="o">-</span>stacked_via_bottom_layer<span class="w"> </span>Metal1<span class="w"> </span><span class="o">-</span>stacked_via_top_layer<span class="w"> </span>Metal1<span class="err">#</span>指定最底层和最顶层要用via连接的是哪些层<span class="err">，</span>此处我们只create<span class="w"> </span>Metal1最底层的rails<span class="err">，</span>所以top_layer和bottom_layer都是Metal1<span class="err">。</span>
<span class="nv">addStripe</span><span class="w"> </span><span class="o">-</span>nets<span class="w"> </span><span class="k">{</span><span class="w"> </span><span class="nv">VDD</span><span class="w"> </span><span class="k">}</span><span class="w"> </span><span class="o">-</span>layer<span class="w"> </span>Metal1<span class="w"> </span><span class="o">-</span>direction<span class="w"> </span>horizontal<span class="w"> </span><span class="o">-</span>width<span class="w"> </span><span class="mf">0.120</span><span class="w"> </span><span class="o">-</span>spacing<span class="w"> </span><span class="mf">1.710</span><span class="w"> </span><span class="o">-</span>set_to_set_distance<span class="w"> </span><span class="mf">3.420</span><span class="w"> </span><span class="o">-</span>start<span class="w"> </span><span class="k">[expr</span><span class="w"> </span><span class="mf">1.71</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">0.120</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">2.0</span><span class="k">]</span><span class="w"> </span><span class="o">-</span>stop<span class="w"> </span><span class="nv">$die_y1</span><span class="w"> </span><span class="o">-</span>area<span class="w"> </span><span class="nv">$die_area</span><span class="w"> </span><span class="o">-</span>area_blockage<span class="w"> </span><span class="nv">$macro_region</span><span class="w"> </span>
<span class="err">#</span><span class="o">-</span>nets<span class="w"> </span>指定是VDD
<span class="c">#-layer 指定使用的层，此处是Metal1</span>
<span class="c">#-direction 指定方向，此处为horizontal</span>
<span class="c">#-width 一般来说是std cell的VDD的width是多少就设为多少，下图所示是0.12，所以我们也设为0.12</span>
<span class="nv">addStripe</span><span class="w"> </span><span class="o">-</span>nets<span class="w"> </span><span class="k">{</span><span class="w"> </span><span class="nv">VSS</span><span class="w"> </span><span class="k">}</span><span class="w"> </span><span class="o">-</span>layer<span class="w"> </span>Metal1<span class="w"> </span><span class="o">-</span>direction<span class="w"> </span>horizontal<span class="w"> </span><span class="o">-</span>width<span class="w"> </span><span class="mf">0.120</span><span class="w"> </span><span class="o">-</span>spacing<span class="w"> </span><span class="mf">1.710</span><span class="w"> </span><span class="o">-</span>set_to_set_distance<span class="w"> </span><span class="mf">3.420</span><span class="w"> </span><span class="o">-</span>start<span class="w"> </span><span class="k">[expr</span><span class="w"> </span><span class="mf">1.71</span><span class="o">*</span><span class="mi">2</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">0.120</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">2.0</span><span class="k">]</span><span class="w"> </span><span class="o">-</span>stop<span class="w"> </span><span class="nv">$die_y1</span><span class="w"> </span><span class="o">-</span>area<span class="w"> </span><span class="nv">$die_area</span><span class="w"> </span><span class="o">-</span>area_blockage<span class="w"> </span><span class="nv">$macro_region</span>
</code></pre></div>
<p><img alt="image-20241002210613856" src="../assets/image-20241002210613856.png" /></p>
<p><img alt="image-20241002210622058" src="../assets/image-20241002210622058.png" /></p>
<div class="highlight"><pre><span></span><code><span class="c">##给macro通过ring加上power strip</span>

<span class="c">### create power rings for memory cells {Metal8 &amp; Metal9}</span>
<span class="nv">setAddRingMode</span><span class="w"> </span><span class="o">-</span>reset
<span class="nv">deselectAll</span>
<span class="nv">selectInst</span><span class="w"> </span><span class="k">[</span><span class="nv">dbGet</span><span class="w"> </span><span class="k">[</span><span class="nv">dbGet</span><span class="w"> </span>top.insts.cell.subClass<span class="w"> </span>block<span class="w"> </span><span class="o">-</span>p2<span class="k">]</span>.name<span class="k">]</span>
<span class="nv">setAddRingMode</span><span class="w"> </span><span class="o">-</span>stacked_via_bottom_layer<span class="w"> </span>Metal1<span class="w"> </span><span class="o">-</span>stacked_via_top_layer<span class="w"> </span>Metal9
<span class="nv">addRing</span><span class="w"> </span><span class="o">-</span>nets<span class="w"> </span><span class="k">{</span><span class="nv">VDD</span><span class="w"> </span>VSS<span class="k">}</span><span class="w"> </span><span class="o">-</span>type<span class="w"> </span>block_rings<span class="w"> </span><span class="o">-</span>around<span class="w"> </span>selected<span class="w"> </span><span class="o">-</span>layer<span class="w"> </span><span class="k">{</span><span class="nv">top</span><span class="w"> </span>Metal9<span class="w"> </span>bottom<span class="w"> </span>Metal9<span class="w"> </span>left<span class="w"> </span>Metal8<span class="w"> </span>right<span class="w"> </span>Metal8<span class="k">}</span><span class="w"> </span><span class="o">-</span>width<span class="w"> </span><span class="k">{</span><span class="nv">top</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span>bottom<span class="w"> </span><span class="mi">5</span><span class="w"> </span>left<span class="w"> </span><span class="mi">5</span><span class="w"> </span>right<span class="w"> </span><span class="mi">5</span><span class="k">}</span><span class="w"> </span><span class="o">-</span>spacing<span class="w"> </span><span class="k">{</span><span class="nv">top</span><span class="w"> </span><span class="mf">1.25</span><span class="w"> </span>bottom<span class="w"> </span><span class="mf">1.25</span><span class="w"> </span>left<span class="w"> </span><span class="mf">1.25</span><span class="w"> </span>right<span class="w"> </span><span class="mf">1.25</span><span class="k">}</span><span class="w"> </span><span class="o">-</span>offset<span class="w"> </span><span class="k">{</span><span class="nv">top</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span>bottom<span class="w"> </span><span class="mi">5</span><span class="w"> </span>left<span class="w"> </span><span class="mi">5</span><span class="w"> </span>right<span class="w"> </span><span class="mi">5</span><span class="k">}</span>
<span class="nv">deselectAll</span>

<span class="c">### create power stripes (Metal8 and Metal9)</span>
<span class="c">#editDelete -use {POWER} -shape {RING STRIPE FOLLOWPIN IOWIRE COREWIRE BLOCKWIRE PADRING BLOCKRING FILLWIRE FILLWIREOPC DRCFILL}</span>
<span class="nv">setAddStripeMode</span><span class="w"> </span><span class="o">-</span>reset
<span class="nv">setAddStripeMode</span><span class="w"> </span><span class="o">-</span>break_at<span class="w"> </span><span class="k">{</span><span class="nv">block_ring</span><span class="k">}</span><span class="w"> </span><span class="o">-</span>stacked_via_bottom_layer<span class="w"> </span>Metal1<span class="w"> </span><span class="o">-</span>stacked_via_top_layer<span class="w"> </span>Metal9
<span class="nv">addStripe</span><span class="w"> </span><span class="o">-</span>nets<span class="w"> </span><span class="k">{</span><span class="nv">VDD</span><span class="w"> </span>VSS<span class="k">}</span><span class="w"> </span><span class="o">-</span>layer<span class="w"> </span>Metal9<span class="w"> </span><span class="o">-</span>direction<span class="w"> </span>horizontal<span class="w"> </span><span class="o">-</span>width<span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="o">-</span>spacing<span class="w"> </span><span class="mf">1.25</span><span class="w"> </span><span class="o">-</span>set_to_set_distance<span class="w"> </span><span class="mi">72</span><span class="w"> </span><span class="o">-</span>start_from<span class="w"> </span>bottom<span class="w"> </span><span class="o">-</span>start_offset<span class="w"> </span><span class="mi">40</span><span class="w"> </span><span class="o">-</span>stop_offset<span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">-</span>block_ring_top_layer_limit<span class="w"> </span>Metal9<span class="w"> </span><span class="o">-</span>block_ring_bottom_layer_limit<span class="w"> </span>Metal1

<span class="nv">setAddStripeMode</span><span class="w"> </span><span class="o">-</span>reset
<span class="nv">setAddStripeMode</span><span class="w"> </span><span class="o">-</span>break_at<span class="w"> </span><span class="k">{</span><span class="nv">block_ring</span><span class="k">}</span><span class="w"> </span><span class="o">-</span>stacked_via_bottom_layer<span class="w"> </span>Metal1<span class="w"> </span><span class="o">-</span>stacked_via_top_layer<span class="w"> </span>Metal9
<span class="nv">addStripe</span><span class="w"> </span><span class="o">-</span>nets<span class="w"> </span><span class="k">{</span><span class="nv">VDD</span><span class="w"> </span>VSS<span class="k">}</span><span class="w"> </span><span class="o">-</span>layer<span class="w"> </span>Metal8<span class="w"> </span><span class="o">-</span>direction<span class="w"> </span>vertical<span class="w"> </span><span class="o">-</span>width<span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="o">-</span>spacing<span class="w"> </span><span class="mf">1.25</span><span class="w"> </span><span class="o">-</span>set_to_set_distance<span class="w"> </span><span class="mi">75</span><span class="w"> </span><span class="o">-</span>start_from<span class="w"> </span>left<span class="w"> </span><span class="o">-</span>start_offset<span class="w"> </span><span class="mi">35</span><span class="w"> </span><span class="o">-</span>stop_offset<span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">-</span>block_ring_top_layer_limit<span class="w"> </span>Metal9<span class="w"> </span><span class="o">-</span>block_ring_bottom_layer_limit<span class="w"> </span>Metal1
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c">#check</span>
<span class="k">set</span><span class="w"> </span>report_drc_dir<span class="w">  </span><span class="nv">${project_root}</span><span class="o">/</span>reports<span class="o">/</span><span class="nv">${current_step}</span>
<span class="nb">file</span><span class="w"> </span>mkdir<span class="w"> </span><span class="nv">${report_drc_dir}</span>
<span class="nv">verify_drc</span><span class="w"> </span><span class="o">-</span>limit<span class="w"> </span><span class="mi">99999</span><span class="w"> </span><span class="o">-</span>report<span class="w"> </span><span class="nv">${report_drc_dir}</span><span class="o">/</span>verify_drc.rpt<span class="err">#</span>给一个error数量的限制<span class="w"> </span><span class="o">-</span>limit<span class="w"> </span><span class="mi">99999</span>
<span class="nv">verifyConnectivity</span><span class="w"> </span><span class="o">-</span>net<span class="w"> </span><span class="k">{</span><span class="nv">VDD</span><span class="w"> </span>VSS<span class="k">}</span><span class="w"> </span><span class="o">-</span>error<span class="w"> </span><span class="mi">99999</span><span class="w"> </span><span class="o">-</span>report<span class="w"> </span><span class="nv">${report_drc_dir}</span><span class="o">/</span>verifyConnectivity.rpt<span class="w"> </span><span class="err">#</span>给一个error数量的限制<span class="w"> </span><span class="o">-</span>limit<span class="w"> </span><span class="mi">99999</span>
<span class="nv">redirect</span><span class="w"> </span><span class="o">-</span>tee<span class="w"> </span><span class="nv">${report_drc_dir}</span><span class="o">/</span>checkPlace.rpt<span class="w"> </span><span class="k">{</span><span class="nv">checkPlace</span><span class="k">}</span>
</code></pre></div>
<p>可以在这里查看报告：</p>
<p><img alt="image-20241002221201441" src="../assets/image-20241002221201441.png" /></p>
<p><img alt="image-20241002221224592" src="../assets/image-20241002221224592.png" /></p>
<div class="highlight"><pre><span></span><code><span class="c">#上面这个bug：</span>
<span class="nv">deleteRouteBlk</span><span class="w"> </span><span class="o">-</span>name<span class="w"> </span><span class="nv">$rblkg_prefix</span>
</code></pre></div>
<h4 id="5_place_opt">5_place_opt<a class="headerlink" href="#5_place_opt" title="Permanent link">&para;</a></h4>
<ul>
<li>setDesignMode</li>
</ul>
<p><img alt="image-20241005100017174" src="../assets/image-20241005100017174.png" /></p>
<ul>
<li>
<p>-node，别称“超级开关”，是比较重要的一个设置，可以针对 <strong>某一种特定的工艺做一些基础的设置</strong>。它的选项很多，分别对应不同 Foundary 的不同工艺的区别，N 系列就是台积电的，S 系列就是三星的。。。</p>
</li>
<li>
<p>-process，相比于-node，-process 是更 <strong>通用的设置</strong>，因为可以看到-node 里面的都是 20 以下的，此处用到的工艺是 45，所以使用更为通用的-process 45。在成熟的工艺中，都有特定的数字去代替，比如 40，28 等等。</p>
</li>
<li>
<p>-topRoutingLayer,-bottomRoutingLayer. 就是告诉工具只能用哪些层进行绕线</p>
</li>
<li>
<p>setAnalysisMode</p>
</li>
</ul>
<p><img alt="image-20241005100057734" src="../assets/image-20241005100057734.png" /></p>
<ul>
<li>
<p>-analysisType {single | bcwc  | onChipVariation}</p>
<blockquote>
<p>其中(onChipVariation)模拟的 PVT 条件的偏差会更接近实际情况，会减少一些不必要的悲观量。</p>
<p>一般都用 OCV</p>
</blockquote>
</li>
<li>
<p>-cppr 是关于 clock line 上的 common path 的一个处理方式</p>
</li>
<li>
<p>setOptMode</p>
</li>
<li>
<p>-addInstancePrefix, -addNetPrefix </p>
<blockquote>
<p>工具在优化的过程中会增加很多新的 Cell，对于这些 Cell，我们希望他们都带一个我们能快速辨别他们的名字。也就是 Prefix（前缀）。当然，可以给 Instance 加 Prefix，那么也可以给 Net 加 Prefix</p>
<p>e.g.: </p>
<div class="highlight"><pre><span></span><code><span class="nv">setOptMode</span><span class="w"> </span><span class="o">-</span>addInstancePrefix<span class="w"> </span><span class="s2">&quot;PRECTS_&quot;</span><span class="w"> </span><span class="o">-</span>addNetPrefix<span class="w"> </span><span class="s2">&quot;PRECTS_NET_&quot;</span>
</code></pre></div>
</blockquote>
</li>
<li>
<p>-powerEffort {none|low|high}</p>
</li>
<li>
<p>-maxDensity <density></p>
</li>
<li>
<p>-maxLength <length></p>
</li>
<li>
<p>setTieHiLoMode</p>
</li>
</ul>
<p>这条命令本身只是去控制那些加的 Tie-high 和 Tie-low 的 Cell，也就是说在电路中某些地方电平需要拉高和拉低，就需要 <strong>专门的 Cell</strong> 去做这些连接。</p>
<ul>
<li>-maxFanout 2 ，就是设置一个 Tie cell 可以连接几个 Fanout。若设置的太大，可能出现的问题：需要拉高的时候拉不高，需要拉低的时候拉不低。若是设置的太小，可能导致 Tie Cell 最后局部的 density 会出现问题。</li>
<li>-honorDontTouch true ，就是设置为 honorDontTouch 的情况下到底要不要加 Tie，一般加的 DontTouch 都是工程师自己加的，也就是真的不希望动的地方，所以设置为 true</li>
<li>-honorDontUse true，同上一样，是工程师真的不需要用到的，所以设置为 true。</li>
<li>-prefix “PRECTS_TIE_” , 给加的 Tie cell 加一个 Prefix（前缀）。便于识别。</li>
<li>
<p>-cell {TIEHI TIELO} 就是指定我们需要加的 Tie Cell 的类型</p>
</li>
<li>
<p>setNanoRouteMode</p>
</li>
</ul>
<p>这里的绕线是 <strong>global route</strong></p>
<ul>
<li>
<p>-routeWithTimingDriven -true 也就是告诉工具在绕线的时候考虑时序。</p>
</li>
<li>
<p>group_path, setPathGroupOptions</p>
</li>
</ul>
<p><img alt="image-20241005101521934" src="../assets/image-20241005101521934.png" /></p>
<p><img alt="image-20241005101604972" src="../assets/image-20241005101604972.png" /></p>
<ul>
<li>
<p>-effortLevel 对不同的 path group 的关注不一样，如此处，我们 <strong>关心 reg2reg</strong>，所以把 reg2reg 的 effortLevel 设置为 high</p>
</li>
<li>
<p>set_dont_use_cells</p>
</li>
</ul>
<p>一般用于优化 PPA 的时候, 把一些面积大的, 功耗大的删掉</p>
<p><img alt="image-20241005101727826" src="../assets/image-20241005101727826.png" /></p>
<ul>
<li>set_clock_uncertainty</li>
</ul>
<p>set_clock_uncertainty 150 [all_clocks] -setup</p>
<ul>
<li>place : jitter + clock skew + route correlation (si) + extra margin</li>
<li>clock : jitter + route correlation (si) + extra margin</li>
<li>route : jitter + extra margin</li>
<li>
<p>signoff : jitter + extra margin</p>
</li>
<li>
<p>set_max_transition</p>
</li>
</ul>
<p>一般可以按照 clock_cycle 的比例来定，对 clock 上面的 transition 一般定为 5%-8%，对 data 上面的 transition 一般定为 15%-20%</p>
<p>库里面也有一些关于 max_transition 的限制, 但是往往比较宽松, 需要自己设置</p>
<ul>
<li>
<p>-clock_path xxx [all_clocks] </p>
</li>
<li>
<p>-data_path xxx [all_clocks] </p>
</li>
<li>
<p>-override, 覆盖其他地方的关于 max_transition 的设置</p>
</li>
<li>
<p>place_opt_design</p>
</li>
</ul>
<p>使用 GigaPlace 进行布局优化</p>
<ul>
<li>
<p>-expanded_views 就是告诉工具不要做 view 的 merge</p>
</li>
<li>
<p>-out_dir 就是告诉工具输出的 path 放在哪个地方</p>
</li>
<li>
<p>-prefix ”innovus_placeopt“</p>
</li>
</ul>
<h4 id="6_cts">6_CTS<a class="headerlink" href="#6_cts" title="Permanent link">&para;</a></h4>
<ul>
<li>
<p>set_ccopt_property</p>
</li>
<li>
<p>查看 clk_buffer 种类：<code>get_lib_cell *CLK*BUF*</code>，一般不选 hvt</p>
</li>
<li>buffer_cells</li>
<li>clock_gating_cells</li>
<li>use_inverters</li>
<li>effort</li>
<li>max_fanout</li>
<li>target_skew</li>
<li>target_max_trans</li>
<li>target_insertion_delay</li>
<li>route_type</li>
<li>
<p>use_estimated_routes_during_final_implementation</p>
</li>
<li>
<p>add_ndr</p>
</li>
</ul>
<p>NDR:(Non-Default Rule)</p>
<p>clock 上的 route 需要和 standard cell 上的不一样，需要更大的间距。。。</p>
<ul>
<li>ccopt_design</li>
</ul>
<div class="highlight"><pre><span></span><code>
</code></pre></div>
<h4 id="7_cts_opt">7_cts_opt<a class="headerlink" href="#7_cts_opt" title="Permanent link">&para;</a></h4>
<p><code>optDesign -expandedViews -setup -hold -drv -outDir "myreports/${current_step}/innovus_clockopt" -postCTS -prefix "innovus_clockopt"</code></p>
<h4 id="8_route">8_route<a class="headerlink" href="#8_route" title="Permanent link">&para;</a></h4>
<h3 id="_62">优化<a class="headerlink" href="#_62" title="Permanent link">&para;</a></h3>
<h4 id="_63">优化目标<a class="headerlink" href="#_63" title="Permanent link">&para;</a></h4>
<p>时序(Performance)</p>
<ul>
<li>设计规则(DRV): transition(slew)/cap/wire length</li>
<li>setup / hold /recovery/ removal /other</li>
<li>噪声: Sl violation</li>
</ul>
<p>功耗(Power):</p>
<ul>
<li>leakage/internal/switching</li>
</ul>
<p>面积(Area): total standard cell area</p>
<p>DFM: 电迁移(EM)</p>
<h4 id="innovus_1">innovus 优化流程<a class="headerlink" href="#innovus_1" title="Permanent link">&para;</a></h4>
<p><img alt="image-20241005210209336" src="../assets/image-20241005210209336.png" /></p>
<p>有些公司不做 postCTS_opt, 应为还没有进行真实的布线，RC 延时估算不准，尤其是对 hold 来说。</p>
<p>做关于 hold 的优化是很有限的，基本上只有插入 buffer 和调整 size，CTS 之后基本不会将存在的 buffer 删掉，因此一般没什么优化</p>
<p>在 placement 就存在的 vio 很难在后面的优化中去掉</p>
<h3 id="_64">文件名称<a class="headerlink" href="#_64" title="Permanent link">&para;</a></h3>
<p><img alt="image-20240930112843520" src="../assets/image-20240930112843520.png" /></p>
<h3 id="install">install<a class="headerlink" href="#install" title="Permanent link">&para;</a></h3>
<p><strong>环境：ubuntu20.04, innovus20</strong></p>
<p>安装包：<a href="E:\installer\innovus20_installer.7z">innovus20_install</a></p>
<h4 id="_65">依赖<a class="headerlink" href="#_65" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>apt-get<span class="w"> </span>-y<span class="w"> </span>install<span class="w"> </span>openjdk-11-jdk
sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>ksh
sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>csh
sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>xterm
sudo<span class="w"> </span>add-apt-repository<span class="w"> </span>ppa:linuxuprising/libpng12
sudo<span class="w"> </span>apt<span class="w"> </span>update
sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>libpng12-0
sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>libjpeg62
sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>libncurses5
</code></pre></div>
<p>1.进入 <a href="http://ftp.xfree86.org/pub/XFree86/4.8.0/binaries/Linux-x86_64-glibc23/">官网</a> 下载 Xbin.tgz 这个文件</p>
<p><img alt="image-20240929161609281" src="../assets/image-20240929161609281.png" /></p>
<h4 id="_66">解压<a class="headerlink" href="#_66" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="c1">#解压3个innovus20压缩包</span>
<span class="c1">#InstallScape是一个安装cadence软件的工具，解压以后进入03.InstallScape/iscape/bin/</span>
sh<span class="w"> </span>iscape.sh
</code></pre></div>
<h4 id="_67">安装<a class="headerlink" href="#_67" title="Permanent link">&para;</a></h4>
<p><img alt="image-20240929161325074" src="../assets/image-20240929161325074.png" /></p>
<p><img alt="image-20240929161335684" src="../assets/image-20240929161335684.png" /></p>
<p><img alt="image-20240929161347388" src="../assets/image-20240929161347388.png" /></p>
<p><img alt="image-20240929161354564" src="../assets/image-20240929161354564.png" /></p>
<p>等待，弹出终端选 no，然后回车结束</p>
<h4 id="_68">破解<a class="headerlink" href="#_68" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="c1">#在crack文件夹中</span>
./1patch.sh<span class="w"> </span>/your/install/path
python<span class="w"> </span>cdslicgen.py<span class="w"> </span><span class="c1">#生成license.dat</span>
cp<span class="w"> </span>patch/license.dat<span class="w"> </span>/path/you/want/to/place/License/<span class="w"> </span><span class="c1">#把license放到一个你要放的位置</span>
</code></pre></div>
<p>cdslicgen.py 破解改动在这里，我只是发现了别人的脚本在这里会报错，改了一点：</p>
<p><img alt="image-20240929160637105" src="../assets/image-20240929160637105.png" /></p>
<p><img alt="image-20240929160603054" src="../assets/image-20240929160603054.png" /></p>
<h4 id="_69">环境变量<a class="headerlink" href="#_69" title="Permanent link">&para;</a></h4>
<p>根据你的安装路径和 license 路径对应修改</p>
<div class="highlight"><pre><span></span><code><span class="c1"># &gt;&gt;&gt; innovus initialize &gt;&gt;&gt;</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">INNOVUS_HOME</span><span class="o">=</span>/opt/EDA_Tools/cadence/innovus20
<span class="c1"># license</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">LM_LICENSE_FILE</span><span class="o">=</span><span class="si">${</span><span class="nv">INNOVUS_HOME</span><span class="si">}</span>/License/license.dat

<span class="nb">export</span><span class="w"> </span><span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span><span class="si">${</span><span class="nv">LD_LIBRARY_PATH</span><span class="si">}</span>:<span class="si">${</span><span class="nv">INNOVUS_HOME</span><span class="si">}</span>/tools.lnx86/lib/64bit:<span class="si">${</span><span class="nv">INNOVUS_HOME</span><span class="si">}</span>/tools.lnx86
<span class="nb">export</span><span class="w"> </span><span class="nv">PATH</span><span class="o">=</span><span class="si">${</span><span class="nv">PATH</span><span class="si">}</span>:<span class="si">${</span><span class="nv">INNOVUS_HOME</span><span class="si">}</span>/tools.lnx86/bin

<span class="c1"># &lt;&lt;&lt; innovus initialize &lt;&lt;&lt;</span>
</code></pre></div>
<h4 id="_70">大致结束<a class="headerlink" href="#_70" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>innovus<span class="w"> </span><span class="p">&amp;</span>
</code></pre></div>
<p><img alt="image-20240929160000093" src="../assets/image-20240929160000093.png" /></p>
<p><img alt="image-20240929160148358" src="../assets/image-20240929160148358.png" /></p>
<h4 id="bug">其他相关 bug<a class="headerlink" href="#bug" title="Permanent link">&para;</a></h4>
<p>1.libstdc++.so.6</p>
<p><img alt="image-20240929192331139" src="../assets/image-20240929192331139.png" /></p>
<p><a href="https://blog.csdn.net/qq_44447544/article/details/122698979?ops_request_misc =%7B%22request%5Fid%22%3A%22A2277519-6B4E-4DD3-952A-1958A9EA40EA%22%2C%22scm%22%3A%2220140713.130102334..%22%7D&amp;request_id = A2277519-6B4E-4DD3-952A-1958A9EA40EA&amp;biz_id = 0&amp;utm_medium = distribute.pc_search_result.none-task-blog-2~all~top_click~default-2-122698979-null-null.142^v100^control&amp;utm_term = innovus 安装&amp;spm = 1018.2226.3001.4187">Cadence Innovus2020 在 Ubuntu20.04 上的安装教程【超详细】_innovus 安装-CSDN 博客</a></p>
<p>sudo ln -s /lib/x86_64-linux-gnu/libstdc++.so.6.0.30 libstdc++.so.6</p>
<p>2.No LSB modules are available.</p>
<p>sudo apt-get install lsb-core</p>
<p>3.place_opt_design 后</p>
<div class="highlight"><pre><span></span><code>terminate called after throwing an instance of &#39;std::runtime_error&#39;
  what():  locale::facet::_S_create_c_locale name not valid
Innovus terminated by internal (ABORT) error/signal...
*** Stack trace:
/opt/EDA_Tools/cadence/innovus20/tools.lnx86/innovus/bin/64bit/innovus [0x12f9ffe5]
/opt/EDA_Tools/cadence/innovus20/tools.lnx86/innovus/bin/64bit/innovus(syStackTrace+0xa5)[0x12fa0456]
/opt/EDA_Tools/cadence/innovus20/tools.lnx86/innovus/bin/64bit/innovus [0x4aa5ef3]
/opt/EDA_Tools/cadence/innovus20/tools.lnx86/innovus/bin/64bit/innovus(_ZN15goSignalHandler13executeActionEiP7siginfoPv+0x47)[0x7c97667]
/opt/EDA_Tools/cadence/innovus20/tools.lnx86/innovus/bin/64bit/innovus(_ZN15goSignalHandler16executeSigActionEiP7siginfoPv+0x84)[0x7c98494]
/lib/x86_64-linux-gnu/libc.so.6(+0x4251f)[0x7f2653c1951f]
/lib/x86_64-linux-gnu/libc.so.6(pthread_kill+0x12c)[0x7f2653c6d9fc]
/lib/x86_64-linux-gnu/libc.so.6(raise+0x15)[0x7f2653c19475]
/lib/x86_64-linux-gnu/libc.so.6(abort+0xd2)[0x7f2653bff7f2]
/opt/EDA_Tools/cadence/innovus20/tools.lnx86/lib/64bit/libstdc++.so.6(+0xa2b9d)[0x7f265ac76b9d]
/opt/EDA_Tools/cadence/innovus20/tools.lnx86/lib/64bit/libstdc++.so.6(+0xae20b)[0x7f265ac8220b]
/opt/EDA_Tools/cadence/innovus20/tools.lnx86/lib/64bit/libstdc++.so.6(_ZSt9terminatev+0x16)[0x7f265ac82276]
/opt/EDA_Tools/cadence/innovus20/tools.lnx86/lib/64bit/libstdc++.so.6(__cxa_throw+0x47)[0x7f265ac824d7]
/opt/EDA_Tools/cadence/innovus20/tools.lnx86/lib/64bit/libstdc++.so.6(_ZSt21__throw_runtime_errorPKc+0x3f)[0x7f265ac7951c]
/opt/EDA_Tools/cadence/innovus20/tools.lnx86/lib/64bit/libstdc++.so.6(_ZNSt6locale5facet18_S_create_c_localeERP15_ _locale_structPKcS2_+0x27)[0x7f265aca5257]
/opt/EDA_Tools/cadence/innovus20/tools.lnx86/lib/64bit/libstdc++.so.6(_ZNSt6locale5_ImplC2EPKcm+0x54)[0x7f265ac96d04]
/opt/EDA_Tools/cadence/innovus20/tools.lnx86/lib/64bit/libstdc++.so.6(_ZNSt6localeC1EPKc+0x144)[0x7f265ac978e4]
/opt/EDA_Tools/cadence/innovus20/tools.lnx86/innovus/bin/64bit/innovus(_ZNK11oiInstCntCL5printERKSsb+0x2a)[0x7490eaa]
/opt/EDA_Tools/cadence/innovus20/tools.lnx86/innovus/bin/64bit/innovus(_ZN15oiPhyDesignMcCL6createERK22oiPhyDesignGridParamCLiib+0x290)[0x74948e0]
/opt/EDA_Tools/cadence/innovus20/tools.lnx86/innovus/bin/64bit/innovus(_Z17oiPhyInitDesignMci+0x22)[0x7495112]
/opt/EDA_Tools/cadence/innovus20/tools.lnx86/innovus/bin/64bit/innovus [0x4d546fb]
/opt/EDA_Tools/cadence/innovus20/tools.lnx86/innovus/bin/64bit/innovus(_ZN10tcmBaseCmd7executeEP10Tcl_InterpiPPc+0x166)[0x15264886]
/opt/EDA_Tools/cadence/innovus20/tools.lnx86/innovus/bin/64bit/innovus(_ZN6tcmMgr9cmdParserEPvP10Tcl_InterpiPPc+0x693)[0x15257fe3]
/opt/EDA_Tools/cadence/innovus20/tools.lnx86/innovus/bin/64bit/innovus(TclInvokeStringCommand+0x7f)[0x20ed56df]
/opt/EDA_Tools/cadence/innovus20/tools.lnx86/innovus/bin/64bit/innovus(TclNRRunCallbacks+0x46)[0x20eda056]
/opt/EDA_Tools/cadence/innovus20/tools.lnx86/innovus/bin/64bit/innovus [0x20edc527]
/opt/EDA_Tools/cadence/innovus20/tools.lnx86/innovus/bin/64bit/innovus(Tcl_EvalEx+0x15)[0x20edce55]
/opt/EDA_Tools/cadence/innovus20/tools.lnx86/innovus/bin/64bit/innovus(Tcl_Eval+0x14)[0x20edce74]
/opt/EDA_Tools/cadence/innovus20/tools.lnx86/innovus/bin/64bit/innovus(_ZN5oiTcl9CmdInterp6evalOKEPKc+0x2d)[0x4d87a8d]
/opt/EDA_Tools/cadence/innovus20/tools.lnx86/innovus/bin/64bit/innovus(_ZNK14rdaOptDesignCL3runEv+0x9c3)[0x4d2b543]
/opt/EDA_Tools/cadence/innovus20/tools.lnx86/innovus/bin/64bit/innovus [0x4d4da81]
/opt/EDA_Tools/cadence/innovus20/tools.lnx86/innovus/bin/64bit/innovus(_ZN10tcmBaseCmd7executeEP10Tcl_InterpiPPc+0x166)[0x15264886]
/opt/EDA_Tools/cadence/innovus20/tools.lnx86/innovus/bin/64bit/innovus(_ZN6tcmMgr9cmdParserEPvP10Tcl_InterpiPPc+0xad2)[0x15258422]
/opt/EDA_Tools/cadence/innovus20/tools.lnx86/innovus/bin/64bit/innovus(TclInvokeStringCommand+0x7f)[0x20ed56df]
/opt/EDA_Tools/cadence/innovus20/tools.lnx86/innovus/bin/64bit/innovus(TclNRRunCallbacks+0x46)[0x20eda056]
/opt/EDA_Tools/cadence/innovus20/tools.lnx86/innovus/bin/64bit/innovus [0x20edc527]
/opt/EDA_Tools/cadence/innovus20/tools.lnx86/innovus/bin/64bit/innovus(Tcl_EvalEx+0x15)[0x20edce55]
/opt/EDA_Tools/cadence/innovus20/tools.lnx86/innovus/bin/64bit/innovus(TclNREvalObjEx+0x6e)[0x20edcefe]
/opt/EDA_Tools/cadence/innovus20/tools.lnx86/innovus/bin/64bit/innovus [0x20f9270a]
/opt/EDA_Tools/cadence/innovus20/tools.lnx86/innovus/bin/64bit/innovus [0x20ef0150]
/opt/EDA_Tools/cadence/innovus20/tools.lnx86/innovus/bin/64bit/innovus(TclNRRunCallbacks+0x46)[0x20eda056]
/opt/EDA_Tools/cadence/innovus20/tools.lnx86/innovus/bin/64bit/innovus(Tcl_RecordAndEvalObj+0xf3)[0x20f78753]
/opt/EDA_Tools/cadence/innovus20/tools.lnx86/innovus/bin/64bit/innovus(Tcl_RecordAndEval+0x37)[0x20f788b7]
/opt/EDA_Tools/cadence/innovus20/tools.lnx86/innovus/bin/64bit/innovus(_Z17rdaEditCmdLineEndPc+0x344)[0x4b68f44]
/opt/EDA_Tools/cadence/innovus20/tools.lnx86/innovus/bin/64bit/innovus(_ZN9seConsole7sesMode9DoExecuteERKSsPv+0xc6)[0xfb3bc66]
/opt/EDA_Tools/cadence/innovus20/tools.lnx86/innovus/bin/64bit/innovus(_ZN7Redline9EmacsMode10AcceptLineEv+0x3b)[0x10cac8eb]
/opt/EDA_Tools/cadence/innovus20/tools.lnx86/innovus/bin/64bit/innovus(_ZN7Redline11ModeCommandINS_9EmacsModeEE15CommandFnNoKeysERKN5boost8functionIFvRS1_EEERNS_6EditorE+0x60)[0x10cb4e70]
/opt/EDA_Tools/cadence/innovus20/tools.lnx86/innovus/bin/64bit/innovus(_ZN5boost6detail8function26void_function_obj_invoker2INS_3_bi6bind_tINS3_11unspecifiedENS_8functionIFvRN7Redline6EditorEEEENS3_5list1INS_3argILi1EEEEEEEvS9_RKNS7_14KeyCombinationEE6invokeERNS1_15function_bufferES9_SJ_+0x1a)[0x10cc46ca]
/opt/EDA_Tools/cadence/innovus20/tools.lnx86/innovus/bin/64bit/innovus(_ZNK7Redline7Command3RunERNS_6EditorERKNS_14KeyCombinationE+0x1b)[0x10cc43eb]
/opt/EDA_Tools/cadence/innovus20/tools.lnx86/innovus/bin/64bit/innovus(_ZN7Redline6Editor9Internals3RunEb+0xdf)[0x10ca8f0f]
/opt/EDA_Tools/cadence/innovus20/tools.lnx86/innovus/bin/64bit/innovus [0x20fdce36]
/opt/EDA_Tools/cadence/innovus20/tools.lnx86/innovus/bin/64bit/innovus(Tcl_ServiceEvent+0x86)[0x20f9e886]
/opt/EDA_Tools/cadence/innovus20/tools.lnx86/innovus/bin/64bit/innovus(Tcl_DoOneEvent+0x128)[0x20f9eb88]
/opt/EDA_Tools/cadence/innovus20/tools.lnx86/lib/64bit/libtq.so(_ZN17TqEventDispatcher13processEventsE6QFlagsIN10QEventLoop17ProcessEventsFlagEE+0x69)[0x7f265741b239]
/opt/EDA_Tools/cadence/innovus20/tools.lnx86/Qt/v5//64bit/lib/libcdsQt5Core.so.5(_ZN10QEventLoop4execE6QFlagsINS_17ProcessEventsFlagEE+0xe9)[0x7f2656ad00c9]
/opt/EDA_Tools/cadence/innovus20/tools.lnx86/Qt/v5//64bit/lib/libcdsQt5Core.so.5(_ZN16QCoreApplication4execEv+0x83)[0x7f2656ad8953]
/opt/EDA_Tools/cadence/innovus20/tools.lnx86/lib/64bit/libtq.so(_ZN13TqApplication4execEv+0x176)[0x7f265741a896]
/opt/EDA_Tools/cadence/innovus20/tools.lnx86/innovus/bin/64bit/innovus(_Z12edi_app_initP10Tcl_Interp+0x2a8)[0x4b510d8]
/opt/EDA_Tools/cadence/innovus20/tools.lnx86/innovus/bin/64bit/innovus(Tcl_MainEx+0x176)[0x20f993c6]
/opt/EDA_Tools/cadence/innovus20/tools.lnx86/innovus/bin/64bit/innovus(main+0x1d1)[0x41d4b71]
/lib/x86_64-linux-gnu/libc.so.6(+0x29d8f)[0x7f2653c00d8f]
/lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0x7f)[0x7f2653c00e3f]
/opt/EDA_Tools/cadence/innovus20/tools.lnx86/innovus/bin/64bit/innovus [0x4aa2c1c]
==== ==== ==== ==== ==== ==== ==== ==== ==== ====
                gdb
==== ==== ==== ==== ==== ==== ==== ==== ==== ====
Using: gdb
Could not attach to process.  If your uid matches the uid of the target
process, check the setting of /proc/sys/kernel/yama/ptrace_scope, or try
again as the root user.  For more details, see /etc/sysctl.d/10-ptrace.conf
ptrace: Operation not permitted.
/home/pengxuan/Project/mylab/innovus/lab2/work/1314912: No such file or directory.
</code></pre></div>
<h4 id="_71">参考<a class="headerlink" href="#_71" title="Permanent link">&para;</a></h4>
<p><a href="https://blog.csdn.net/qq_44447544/article/details/122698979?ops_request_misc=%7B%22request%5Fid%22%3A%22A2277519-6B4E-4DD3-952A-1958A9EA40EA%22%2C%22scm%22%3A%2220140713.130102334..%22%7D&amp;request_id=A2277519-6B4E-4DD3-952A-1958A9EA40EA&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~top_click~default-2-122698979-null-null.142^v100^control&amp;utm_term=innovus安装&amp;spm=1018.2226.3001.4187">Cadence Innovus2020 在Ubuntu20.04上的安装教程【超详细】_innovus安装-CSDN博客</a></p>
<p><a href="https://blog.csdn.net/dacming/article/details/129873358?spm=1001.2101.3001.6650.1&amp;utm_medium=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~Rate-1-129873358-blog-138365651.235^v43^control&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~Rate-1-129873358-blog-138365651.235^v43^control&amp;utm_relevant_index=2">innovus2020安装_innovus安装-CSDN博客</a></p>
<p><a href="https://blog.csdn.net/RONAL_DINHO/article/details/139830971">Ubuntu18.04安装Cadence Innovus2021_innovus安装-CSDN博客</a></p>
<h3 id="_72">参考<a class="headerlink" href="#_72" title="Permanent link">&para;</a></h3>
<ol>
<li>官方文档：UserGuide, Command reference </li>
</ol>
<p><img alt="image-20240930110542683" src="../assets/image-20240930110542683.png" /></p>
<ol>
<li>
<p><a href="https://www.bilibili.com/video/BV1Ha411v7NL?spm_id_from=333.788.videopod.episodes">数字后端实训Innovus软件及后端流程介绍1_哔哩哔哩_bilibili</a></p>
</li>
<li>
<p><a href="https://zhuanlan.zhihu.com/p/580275898">Innovus流程（4）-Route和ECO - 知乎</a></p>
</li>
</ol>
<h2 id="pdk">PDK<a class="headerlink" href="#pdk" title="Permanent link">&para;</a></h2>
<p>DK即Process Design Kit 工艺设计包，是连接IC设计公司、代工厂和EDA公司的桥梁. PDK包含了从芯片设计到制造的各个环节所需的数据和信息，为了更直观地了解它，我们可以将<strong>PDK比作芯片设计过程中的“指导手册”</strong></p>
<p>PDK的主要作用是将晶圆代工厂的制造工艺要求转化为芯片设计师能够理解的信息。设计师利用PDK中的数据来确保他们的设计能够顺利制造，并将PDK导入到EDA软件中，进行设计、模拟和验证。一旦完成设计，设计师就可以将设计文件发送给晶圆代工厂进行生产。</p>
<p>A Process Design Kit (PDK) serves as the fundamental building block for integrated circuit (IC) design, playing a crucial role in transforming chip designs  into <strong>silicon reality</strong>. These files serve as essential  inputs for Electronic Design Automation (EDA) tools during chip design. Clients engage with a foundry's PDKs before production to ensure that their chip  designs align with the foundry's capabilities and intended functionality.EDA Tool Ecosystem and PDK Integration. These tools rely on  <strong>accurate PDK data to generate layouts, verify designs, and simulate performance.</strong> <strong>Standardized interfaces</strong> across diverse technology platforms enhance  PDK usability.</p>
<h3 id="_73">概述<a class="headerlink" href="#_73" title="Permanent link">&para;</a></h3>
<p><img alt="image-20241030144210841" src="../assets/image-20241030144210841.png" /></p>
<p><img alt="image-20241030144818640" src="../assets/image-20241030144818640.png" /></p>
<p><img alt="image-20241030145734998" src="../assets/image-20241030145734998.png" /></p>
<p><img alt="image-20241030150017974" src="../assets/image-20241030150017974.png" /></p>
<h4 id="_74">生态<a class="headerlink" href="#_74" title="Permanent link">&para;</a></h4>
<p><img alt="image-20241030142942533" src="../assets/image-20241030142942533.png" /></p>
<p>上游到下游</p>
<p><img alt="image-20241030143150122" src="../assets/image-20241030143150122.png" /></p>
<h3 id="_75">金属层<a class="headerlink" href="#_75" title="Permanent link">&para;</a></h3>
<p><img alt="image-20251117151847166" src="../assets/image-20251117151847166.png" /></p>
<p><a href="https://zhuanlan.zhihu.com/p/656143449">(59 封私信 / 80 条消息) PDK中的Design Layer和Mask Layer以及FEOL和BEOL - 知乎</a></p>
<p><img alt="PDK中的Design Layer和Mask Layer以及FEOL和BEOL" src="../assets/v2-83dcd40e286b632da263586dc9ca8dd8_1440w.png" /></p>
<blockquote>
<p>[!WARNING]</p>
<p>每个PDK名称会有些不一样</p>
</blockquote>
<h4 id="aa">AA<a class="headerlink" href="#aa" title="Permanent link">&para;</a></h4>
<p>离子注入的主要位置</p>
<h4 id="poly">POLY<a class="headerlink" href="#poly" title="Permanent link">&para;</a></h4>
<p>多晶硅材质，电压就是压在他上面</p>
<blockquote>
<p>gate 和 poly 的区别：</p>
<p>poly指的是多晶硅这种材料，gate指的是mos管的栅极、源级、漏级中的栅极
在很多尺寸的工艺中，mos管的栅极是用poly这种材料制作的。
但是poly不仅可以用在栅极这个地方，在一些小的cell中，poly可以用来做短距离的导线起连接的作用，以此来减少这个cell所用的metal的层数。</p>
</blockquote>
<h4 id="pc">PC<a class="headerlink" href="#pc" title="Permanent link">&para;</a></h4>
<p>poly connect layer</p>
<h4 id="ct">CT<a class="headerlink" href="#ct" title="Permanent link">&para;</a></h4>
<p>下面晶体管Drain/Source跟上面金属线的连接层</p>
<h4 id="gt">GT<a class="headerlink" href="#gt" title="Permanent link">&para;</a></h4>
<p>gate</p>
<h4 id="mx">Mx<a class="headerlink" href="#mx" title="Permanent link">&para;</a></h4>
<p>金属层</p>
<h4 id="vx">Vx<a class="headerlink" href="#vx" title="Permanent link">&para;</a></h4>
<p>过孔</p>
<h4 id="fin">Fin<a class="headerlink" href="#fin" title="Permanent link">&para;</a></h4>
<p>for FinFET</p>
<h3 id="_76">文件汇总<a class="headerlink" href="#_76" title="Permanent link">&para;</a></h3>
<h4 id="spcdl">sp/cdl<a class="headerlink" href="#spcdl" title="Permanent link">&para;</a></h4>
<ul>
<li>模拟网表</li>
<li><code>cdl</code>基本是<code>spcie</code>格式的，略有不同，主要是用来做LVS的，只包含<code>LVS</code>中需要比较的参数。通过子电路的形式来写的，即使是顶层单元，也要用子电路形式。</li>
<li>spice则略有不同，顶层模块没有子电路的外框。也可以用来做LVS，需要手动提取。直接提取的为cdl形式的。spice还可以用来==仿真==。</li>
</ul>
<h5 id="_77">语法<a class="headerlink" href="#_77" title="Permanent link">&para;</a></h5>
<ul>
<li><strong>行类型</strong>：以 <code>*</code> 开头为注释，<code>+</code> 表示上一行续行；<code>.</code> 开头是控制语句，如 <code>.TITLE</code>、<code>.LIB</code>、<code>.PARAM</code>、<code>.OP</code>、<code>.AC</code>、<code>.TRAN</code>、<code>.TEMP</code>、<code>.OPTION</code>、<code>.PRINT</code> 等。</li>
<li><strong>元件语法</strong>：首字母区分器件类型，后接节点列表和参数；常见如 <code>Rname n1 n2 value</code>、<code>Cname n1 n2 value</code>、<code>Mname nd ng ns nb model L=... W=...</code>、<code>Vname n+ n- type(...)</code>。</li>
<li><strong>子电路</strong>：用 <code>.SUBCKT name pin1 pin2 ...</code> 定义，内部可实例化器件或其他子电路，结束用 <code>.ENDS name</code>。实例化语法为 <code>Xname node... subckt_name [参数]</code>。</li>
<li><strong>模型与库</strong>：通过 <code>.MODEL</code> 定义简单模型，或用 <code>.LIB filepath libname</code> 引用工艺库；调用时在器件行写模型名。</li>
<li><strong>分析与输出</strong>：在主体结构后放置分析指令（如 <code>.DC</code>、<code>.TRAN</code>）和输出控制（如 <code>.PRINT</code>、<code>.MEASURE</code>），文件以 <code>.END</code> 结束。</li>
</ul>
<p><img src="assets/image-20251021173051610.png" alt="image-20251021173051610" style="zoom: 65%;" /></p>
<p><strong>参考：</strong></p>
<p><a href="https://blog.csdn.net/Tranquil_ovo/article/details/132500664">【HSPICE】输入网表文件 --- 基本内容_hspice写网表-CSDN博客</a></p>
<h4 id="lef">LEF<a class="headerlink" href="#lef" title="Permanent link">&para;</a></h4>
<ul>
<li>
<p>（library exchange format）, 叫库交换格式，</p>
</li>
<li>
<p>它是描述库单元的物理属性，包括端口位置、层定义和通孔定义。</p>
</li>
<li>
<p>它抽象了单元的底层几何细节，提供了足够的信息，以便允许布线器在不对内部单元约束来进行修订的基础上进行单元连接。</p>
</li>
<li>
<p>包含了==工艺的技术信息==，如布线的层数、最小的线宽、线与线之间的最小距离以及每个被选用 cell，BLOCK，PAD 的大小和 pin 的实际位置。 cell，PAD 的这些信息由厂家提供的 LEF 文件给出，自己定制的 BLOCK 的 LEF 文件描述经 ABSTRACT 后生成，只要把这两个 LEF 文件整合起来就可以了。</p>
</li>
<li>
<p>案例</p>
</li>
<li>
<p><code>DATABASE MICRONS 2000</code></p>
<p>表示 1 微米 = 2000DBU。</p>
<p>有些.lef会定义为 <code>DISTANCE MICRONS &lt;dbu&gt;</code></p>
</li>
<li>
<p><code>MANUFACTURINGGRID 0.0005 ;</code></p>
<p>0.0005 微米 = 1/2000 微米，说明最小网格是 1 DBU。</p>
</li>
<li>
<p><code>LAYER Metal1
      TYPE ROUTING ;
      DIRECTION HORIZONTAL ;
      PITCH 0.19 0.19 ;
      WIDTH 0.06 ;
      AREA 0.02 ;
      SPACINGTABLE
        PARALLELRUNLENGTH 0 
        WIDTH 0    0.06 
        WIDTH 0.1  0.1 
        WIDTH 0.75 0.25 
        WIDTH 1.5  0.45 ;
      SPACING 0.09 ENDOFLINE 0.09 WITHIN 0.025 ;
    END Metal1</code></p>
</li>
<li>
<p><code>LAYER Via1
      TYPE CUT ;
      SPACING 0.07 ;
      WIDTH 0.07 ;
    END Via1</code></p>
</li>
<li>
<p><code>SITE CoreSite
      CLASS CORE ;
      SIZE 0.2 BY 1.71 ;
    END CoreSite</code></p>
</li>
<li></li>
</ul>
<h4 id="def">DEF<a class="headerlink" href="#def" title="Permanent link">&para;</a></h4>
<ul>
<li>
<p>（design exchange format），叫设计交换格式</p>
</li>
<li>
<p>它描述的是 实际的设计，对库单元及它们的位置和连接关系进行了列表，使用 DEF 来在不同的设计系统间传递设计，同时又可以保持设计的内容不变。DEF 与只传递几何信息的 GDSII 不一样。它还给出了器件的物理位置关系和时序限制等信息。</p>
</li>
<li>
<p>案例：</p>
</li>
<li>
<p>版图面积<code>DIEAREA ( 0 0 ) ( 390800 383040 ) ;</code></p>
</li>
<li>
<p>数字标准单元行信息：</p>
<p><code>ROW ROW_93 CoreSite 0 318060 N DO 977 BY 1 STEP 400 0</code></p>
<ul>
<li>ROW ROW_93：行名（唯一标识）。</li>
<li>CoreSite：引用的 SITE 类型（在 LEF 里定义单元高度/对齐网格）。</li>
<li>0 318060：行起点坐标 (x y)。</li>
<li>N 或 FS：行的朝向/翻转。N=不翻转朝上，FS=沿 X 轴翻转且行方向反向。</li>
<li>DO 977 BY 1：重复次数，X 方向 977 个 site，Y 方向 1 行。</li>
<li>STEP 400 0：相邻重复的步长（X 步长 400，Y 步长 0），对应 site 宽度和行间距。</li>
<li>每行末尾 ;：语句结束。</li>
</ul>
<blockquote>
<p>为什么是 STEP 400 0?</p>
<p>已知： UNITS DISTANCE MICRONS 2000</p>
<p>CoreSite 宽度 0.2 微米 → 0.2 * 2000 = 400 DBU，因此 X
    步长写成 400</p>
</blockquote>
</li>
<li>
<p>TRACK 信息：</p>
<p><code>TRACKS X 200 DO 977 STEP 400 LAYER Metal9 ;</code></p>
<p>在 X 方向的扫描线上放置 977 条平行于 Y 轴的轨迹，起始于 x=200（DBU），相邻轨迹的间距 400（DBU），适用于 Metal9。</p>
<p><code>TRACKS Y 950 DO 503 STEP 760 LAYER Metal9 ;</code></p>
<p>在 Y 方向的扫描线上放置 503 条平行于 X 轴的轨迹，起始于 y=950（DBU），间距 760（DBU），适用于 Metal9。</p>
<blockquote>
<p>注意，根据TRACK算面积不是：200+977*400 = 391000</p>
<p>而是：
<img alt="image-20251214160016957" src="../assets/image-20251214160016957.png" /></p>
<p>这个可以不等于diearea</p>
</blockquote>
</li>
<li>
<p><code>GCELLGRID X 0 DO 65 STEP 6000 ;
    GCELLGRID X 384000 DO 2 STEP 6800 ;</code></p>
<p>GCell</p>
<blockquote>
<p>（65-1）*6000 = 384000</p>
<p>384000+6800 = 390800 == die_are.width</p>
</blockquote>
</li>
</ul>
<h4 id="lib">Lib<a class="headerlink" href="#lib" title="Permanent link">&para;</a></h4>
<ul>
<li>
<p>文本格式: .lib 文件通常是文本文件，使用人类可读的 ASCII 文本来描述。</p>
</li>
<li>
<p>标准化: .lib 文件使用的是<code>Liberty 格式</code>，这是一个业界标准，用于描述电子电路库的性能。</p>
</li>
<li>
<p>可携带性和可读性: 由于它是一个文本文件，所以很容易通过文本编辑器查看和修改，并且容易在不同的设计工具和平台之间转移。</p>
</li>
<li>
<p>用途: Liberty 文件主要用于逻辑合成和静态时序分析（STA）。它包含有关单元（如门、触发器等）的时序和功耗特性</p>
</li>
<li>
<p>连线负载模型（wire load models）：电阻、电容、面积。</p>
</li>
<li>
<p>工作环境/条件（Operating conditions）:制程（process）（电压和温度的比例因数k，表示不同的环境之间，各参数缩放的比例）</p>
</li>
<li>
<p>设计规则约束（Design ）:最大最小电容、最大最小转换时间、最大最小扇出。</p>
</li>
<li>
<p>延迟模型：指明在计算延迟时用的那个模型，主要有generic_cmos(默认值)、table-lookup(非线性模型)、piecewise-cmos(optional)、dcm(Delay Calculation Module)、polynomial。这个库使用的非线性模型。</p>
</li>
<li>
<p>Design Compiler工具本身是没有单位的。然而在建立工艺库和产生报告时，必须要有单位。库中有6个库级属性定义单位:time_ unit(时间单位)、voltage_unit(电压单位)、current_  unit(电流单位)、pulling_resistance_unit(上/下拉电阻单位)、capacitive_load_unit(电容负载单位)、leakage_power_unit(漏电功耗单位)。</p>
</li>
<li>
<p>I/Opad属性（pad attributes）：主要就是定义I/O引脚的电平属性，告诉你输入是COMS还是TTL，什么时候达到高电平、什么时候是低电平。</p>
</li>
<li>
<p>线负载模型（wire-loads）</p>
</li>
<li>
<p>DC采用wire-load模型在<strong>布局前</strong>预估连线的延时。通常，在工艺库中，根据不同的芯片面积给出了几种模型（上图所示）。这些模型定义了<strong>电容、电阻与面积因子</strong>。此外，导线负载模型还设置了slope与fanout_length，fanout-length设置了与扇出数相关的导线的长度。</p>
</li>
<li>
<p>有时候，除了扇出与长度，该属性还包括其他参数的值（这个工艺库没有），例如average_capacitance、standard_deviation与number_of_nets，在DC产生导线负载模型时会自动写出这些值。对于超过fanout-length属性的节点，可将该导线分成斜率不同的几段，以确定它的值</p>
</li>
<li>
<p>比例缩放因子（k-factors）</p>
</li>
</ul>
<p><img alt="image-20250409111717694" src="../assets/image-20250409111717694.png" /></p>
<ul>
<li>
<p>标准单元</p>
</li>
<li>
<p>输入引脚的fanout-load属性、输出引脚的max_fanout属性、输入或输出引脚的max_transition属性、输出或者inout引脚的max_capacitance属性</p>
</li>
<li>如果某个单元的输出最大只能接0.2pF的负载，但在实际综合的网表中却连接了0.3pF的负载，这时候综合工具就会报出DRC错误</li>
<li>通常，fanout_load与max_fanout一起使用max_transition与max_capacitance一起使用。 如果一个节点的扇出为4，它驱动3个与非门，每个与非门的fanout-load是2，则这三个与非门无法被驱动(因为3*2&gt;4)。</li>
<li></li>
</ul>
<h5 id="_78">参考<a class="headerlink" href="#_78" title="Permanent link">&para;</a></h5>
<ul>
<li><a href="https://www.cnblogs.com/IClearner/p/6622524.html">Tcl与Design Compiler （五）——综合库（时序库）和DC的设计对象 - IC_learner - 博客园</a></li>
</ul>
<h4 id="db">DB<a class="headerlink" href="#db" title="Permanent link">&para;</a></h4>
<ul>
<li>.lib文件，经过LC编译后，产生.db文件。</li>
<li>不可读</li>
</ul>
<h4 id="itf-ict">ITF, ICT<a class="headerlink" href="#itf-ict" title="Permanent link">&para;</a></h4>
<ul>
<li>工艺参数文件，记录了每层材料的电阻率、介电常数、温度系数、最小宽度等详细信息。EDA工具没有直接使用这类文件进行RC的抽取，因为计算量是巨大的，将严重影响EDA工具的速度。</li>
<li><code>itf</code>（S家工具用到的互联工艺格式文件）</li>
<li><code>ict</code>文件（C家工具用到的互连工艺格式文件）</li>
<li>互连线工艺文件，主要包括：
  工艺参数：比如金属的厚度，金属层的方块电阻值，介质层的厚度，介质层的介电常数等。
  工艺效应系数和PVT系数：比如线宽增大效应，温度系数等。</li>
<li><code>ICT</code>和<code>ITF</code>文件可以相互转换</li>
<li>不同金属层有不同的对应<code>.ict/itf</code>文件</li>
</ul>
<h5 id="tluplus-captable">tluplus, capTable<a class="headerlink" href="#tluplus-captable" title="Permanent link">&para;</a></h5>
<p>2D model</p>
<p>为了减少RC抽取过程中的计算量，节省RC抽取的时间，我们一般不直接使用这种文件而是先将其转换成<a href="https://so.csdn.net/so/search?q=查找表&amp;spm=1001.2101.3001.7020">查找表</a>文件（TLU+以及capTable）。PR工具根据导线的长度和宽度查表即可得到电阻电容值，虽然过程中也要计算一些系数的影响(比如温度系数)，但计算量已经大幅降低了。</p>
<ul>
<li>
<p>tluplus</p>
</li>
<li>
<p>S家PR工具（<a href="https://so.csdn.net/so/search?q=ICC2&amp;spm=1001.2101.3001.7020">ICC2</a>）用的net电阻电容查找表，tlu升级版格式</p>
</li>
<li>
<p>itf文件可以转换为<code>tluplus</code></p>
<ul>
<li>通过<code>grdgenxo</code>命令，</li>
</ul>
</li>
<li>
<p>capTable</p>
</li>
<li>
<p>captable的精度低于qrcTechfile</p>
</li>
<li>
<p>C家PR工具（Innovous）用的net电阻电容查找表</p>
</li>
<li>
<p><code>ict</code>文件可以转换为captable文件</p>
<ul>
<li>
<p>通过<code>generateCapTbl</code>命令，<code>generateCapTbl</code>是Innovus安装包里面的一个程序</p>
</li>
<li>
<p>captable的生成过程就是由ict中的工艺参数按照一些特定的导线尺寸计算出相应电阻电容值的过程。</p>
</li>
<li>
<p><code>tcl
  generateCapTbl -lef tech.lef -ict LIB/ICT/qrc_min.ict -output LIB/captable/cmin.captbl
  generateCapTbl -lef tech.lef -ict LIB/ICT/qrc_typ.ict -output LIB/captable/typ.captbl
  generateCapTbl -lef tech.lef -ict LIB/ICT/qrc_max.ict -output LIB/captable/cmax.captbl</code></p>
</li>
</ul>
</li>
</ul>
<h5 id="nxtgrdqrctechfile">nxtgrd，qrcTechFile<a class="headerlink" href="#nxtgrdqrctechfile" title="Permanent link">&para;</a></h5>
<p>3D model</p>
<ul>
<li><code>ict</code>文件可以使用<code>techgen</code>命令（qrc）生成<code>qrcTechFile</code>，qrc吃<code>qrcTechFile</code>可以抽取<code>spef</code></li>
<li><code>qrcTechFile</code>由<code>ict</code>文件生成，其内容主要是电容电阻的查找表，通常由半导体厂提供。</li>
<li>为了提高RC提取的精度，我们会使用更加精确的RC提取引擎或者RC提取工具（如<code>StarRC</code>），它们的输入是<code>nxtgrd</code>/<code>qrcTechfile</code>文件。同样，它们也可以由<code>itf</code>和<code>ict</code>文件转换而成，用的命令分别是<code>Techgen</code>和<code>grdgenxo</code>。</li>
</ul>
<blockquote>
<p>32nm及以上工艺，要么用<code>qrcTechfile</code>文件，要么用<code>captable</code>。若<code>qrcTechfile</code>和<code>captable</code>都没有，Innovus会利用默认工艺参数生成一个captable，但精度会差很多。</p>
<p>32nm及以下更先进工艺则必须要<code>qrcTechfile</code>。</p>
</blockquote>
<h4 id="sdf">SDF<a class="headerlink" href="#sdf" title="Permanent link">&para;</a></h4>
<ul>
<li>(Standard delay format), 叫标准延时格式，是 IEEE 标准，它描述设计中的时序信息，指明了模块管脚和管脚之间的延迟、时钟到数据的延迟和内部连接延迟。</li>
</ul>
<h4 id="gds">GDS<a class="headerlink" href="#gds" title="Permanent link">&para;</a></h4>
<p>通用的版图文件，可以认为该文件不受限于EDA工具和厂商。</p>
<p>数字模块生成结束后，将其生成为.gds再导入到版图工具（比如Virtuoso）中。在芯片版图画完后，也是将其生成为.gds提交流片。</p>
<h4 id="map">map<a class="headerlink" href="#map" title="Permanent link">&para;</a></h4>
<p>版图转换文件</p>
<p>在版图转换时，经常用到.map文件，其说明各层的名称、作用、GDS层序号等等。</p>
<p>在Innovus导出版图时需要一个参考.map文件。但是其实有若干个.map文件，在不同地方使用的。因此需要根据内容进行区分</p>
<h4 id="innovusdat">Innovus.dat<a class="headerlink" href="#innovusdat" title="Permanent link">&para;</a></h4>
<p>保存文件</p>
<p><img src="assets/image-20250608184228533.png" alt="image-20250608184228533" style="zoom:50%;" /></p>
<h4 id="map-layermap">各种map, layermap<a class="headerlink" href="#map-layermap" title="Permanent link">&para;</a></h4>
<p>在gds导入导出的时候会用到一些map（映射）文件</p>
<p>在starRC生成<code>.spef</code>文件时也会用到一个<code>.map</code>文件</p>
<h4 id="spef">spef<a class="headerlink" href="#spef" title="Permanent link">&para;</a></h4>
<p>寄生参数网表</p>
<h4 id="nxtgrd">nxtgrd<a class="headerlink" href="#nxtgrd" title="Permanent link">&para;</a></h4>
<p>和寄生参数提取相关，在<code>starRC</code>中使用</p>
<h3 id="_79">工艺类型<a class="headerlink" href="#_79" title="Permanent link">&para;</a></h3>
<h4 id="planar">Planar<a class="headerlink" href="#planar" title="Permanent link">&para;</a></h4>
<h4 id="finfet">FinFET<a class="headerlink" href="#finfet" title="Permanent link">&para;</a></h4>
<p><a href="https://www.zhihu.com/question/426949421">Finfet电流模型里fin, finger, multiplier指的是什么啊？ - 知乎</a></p>
<p><a href="https://zhuanlan.zhihu.com/p/584196314">(67 封私信 / 80 条消息) 来，一块了解下半导体工艺FinFET - 知乎</a></p>
<p><a href="https://www.elecfans.com/article/89/2024/202402212408720.html">深度解析finFET设计规则 - 制造/封装 - 电子发烧友网</a></p>
<p><img alt="image-20251205094032412" src="../assets/image-20251205094032412.png" /></p>
<p><img alt="image-20251105112744316" src="../assets/image-20251105112744316.png" /></p>
<p>随着<a href="https://zhida.zhihu.com/search?content_id=434296346&amp;content_type=Answer&amp;match_order=1&amp;q=晶体管&amp;zhida_source=entity">晶体管</a>尺寸的缩小，传统的面结构的FET的<a href="https://zhida.zhihu.com/search?content_id=434296346&amp;content_type=Answer&amp;match_order=1&amp;q=栅控能力&amp;zhida_source=entity">栅控能力</a>减弱，所以引进了新的结构<a href="https://zhida.zhihu.com/search?content_id=434296346&amp;content_type=Answer&amp;match_order=1&amp;q=FinFET&amp;zhida_source=entity">FinFET</a>，从结构上看，FinFET结构增大了栅极和沟道的接触面积，使得栅控能力增强，抑制<a href="https://zhida.zhihu.com/search?content_id=434296346&amp;content_type=Answer&amp;match_order=1&amp;q=短沟道效应&amp;zhida_source=entity">短沟道效应</a>，减小<a href="https://zhida.zhihu.com/search?content_id=434296346&amp;content_type=Answer&amp;match_order=1&amp;q=亚阈值漏电流&amp;zhida_source=entity">亚阈值漏电流</a></p>
<p><img alt="image-20251105120312230" src="../assets/image-20251105120312230.png" /></p>
<p><img alt="image-20251105134021920" src="../assets/image-20251105134021920.png" /></p>
<p>参数<code>nfin</code>:控制宽度</p>
<p><img alt="image-20251105120334265" src="../assets/image-20251105120334265.png" /></p>
<p>管子高度step是限制的，也就是fin的边界和OD层次的高度必须是fin的倍数</p>
<p>一个fin step = 0.048um</p>
<p>从techfile得到的数据</p>
<p><img alt="img" src="../assets/v2-2bbbd95232e3fcdf3da17880e4c2371b_1440w.webp" /></p>
<p>调用了一个lvt的nmos，电路中管子的参数如下：</p>
<p><img alt="img" src="../assets/v2-2e5bc97ab5ba76bfefc6c5310d326d47_1440w.webp" /></p>
<p>nmos的fin数量为5，对应的width为202n，如果fin=6，加一个fin step 0.048um，那么width为250n</p>
<p><img alt="img" src="../assets/v2-f3c168b7950f54d421848cd6c8d86292_1440w.webp" /></p>
<p>如果fin =1 width=10nm，</p>
<p>w=(nfin-1)finpitch + findrawnwidth(单个fin的width，这里wdith=10nm)</p>
<p><img alt="image-20251105132904291" src="../assets/image-20251105132904291.png" /></p>
<h4 id="gaa">GAA<a class="headerlink" href="#gaa" title="Permanent link">&para;</a></h4>
<h3 id="smic">SMIC<a class="headerlink" href="#smic" title="Permanent link">&para;</a></h3>
<h4 id="_80">文件目录简要介绍<a class="headerlink" href="#_80" title="Permanent link">&para;</a></h4>
<h5 id="liberty">liberty<a class="headerlink" href="#liberty" title="Permanent link">&para;</a></h5>
<p>下文会介绍</p>
<h5 id="verilog">verilog<a class="headerlink" href="#verilog" title="Permanent link">&para;</a></h5>
<p>包含标准单元的逻辑功能模型，用于逻辑仿真和综合。</p>
<ul>
<li>
<p>文件类型：</p>
</li>
<li>
<p>基本Verilog模型(.v)</p>
</li>
<li>
<p>带有负载的Verilog模型(_neg.v)</p>
</li>
<li>
<p>带有电源/地连接的Verilog模型(_pg.v)</p>
</li>
<li>
<p>带有电源/地和负载的Verilog模型(_neg_pg.v)</p>
</li>
</ul>
<h5 id="lef_1">lef<a class="headerlink" href="#lef_1" title="Permanent link">&para;</a></h5>
<p>包含物理设计所需的单元布局信息。</p>
<ul>
<li>
<p>scc28nhkcp_hdc30p140_pmk_rvt.lef - 基本物理描述</p>
</li>
<li>
<p>scc28nhkcp_hdc30p140_pmk_rvt_ant.lef - 带有天线规则的描述</p>
</li>
</ul>
<h5 id="gds_1">gds<a class="headerlink" href="#gds_1" title="Permanent link">&para;</a></h5>
<p>包含标准单元的物理版图数据，用于流片。</p>
<ul>
<li>文件：scc28nhkcp_hdc30p140_pmk_rvt.gds(版图数据库文件)</li>
</ul>
<h5 id="_81">其他<a class="headerlink" href="#_81" title="Permanent link">&para;</a></h5>
<ul>
<li>
<p>cdl/ - 包含电路描述语言文件，用于LVS验证</p>
</li>
<li>
<p>astro/ - 包含Synopsys Astro工具所需文件</p>
</li>
<li>
<p>symbol/ - 包含原理图符号</p>
</li>
<li>
<p>aocv/ - 包含高级片上变化(AOCV)模型</p>
</li>
<li>
<p>cdb/ - 包含Cadence设计库文件</p>
</li>
<li>
<p>voltagestorm/ - 包含功耗分析所需文件</p>
</li>
<li>
<p>icc2_ndm/ - 包含ICC2所需的NDM库</p>
</li>
</ul>
<h4 id="_82">标准单元库<a class="headerlink" href="#_82" title="Permanent link">&para;</a></h4>
<p>绝大多数的数字设计流程都是基于标准单元的半定制设计流程。标准单元库包含了==反相器、缓冲、与非、或非、与或非、锁存器、触发器等等逻辑单元综合模型的物理信息==，标准单元是完成通用功能的逻辑，<mark>具有同等的高度（宽度可以不同）</mark>，这样方便了数字后端的自动布局布线。</p>
<p>STDCELL文件夹下是不同类型的标准单元库</p>
<blockquote>
<p>|-- SCC28NHKCP_12T25OD33_RVT_V0p2
|-- SCC28NHKCP_HDC30P140_PMK_RVT_V0p2
|-- SCC28NHKCP_HDC30P140_PMK_ULVT_V0p2
|-- SCC28NHKCP_HDC30P140_RVT_V0p2
|-- SCC28NHKCP_HSC30P140_RVT_V0p2
|-- SCC28NHKCP_VHSC30P140_PMK_LVT_V0p1a
`-- SCC28NHKCP_VHSC30P140_PMK_RVT_V0p1a</p>
</blockquote>
<h5 id="_83">命名方式<a class="headerlink" href="#_83" title="Permanent link">&para;</a></h5>
<blockquote>
<p>SCC28NHKCP_12T25OD33_RVT_V0p2
│   │  │   │  │   │   │   │
│   │  │   │  │   │   │   └── 版本号 (Version 0.2)
│   │  │   │  │   │   └── 阈值电压类型 (RVT: Regular Vt)
│   │  │   │  │   └── 栅氧厚度 (25OD33: 25Å)
│   │  │   │  └── 晶体管类型 (12T: 12-track)
│   │  │   └── 工艺节点 (28nm HKC+)
│   │  └── 代工厂 (SMIC)
│   └── 标准单元库 (Standard Cell)</p>
</blockquote>
<p><img alt="image-20250408200847162" src="../assets/image-20250408200847162.png" /></p>
<p><img alt="image-20250408200901894" src="../assets/image-20250408200901894.png" /></p>
<p><img alt="image-20250408200930992" src="../assets/image-20250408200930992.png" /></p>
<h5 id="_84">应用场景<a class="headerlink" href="#_84" title="Permanent link">&para;</a></h5>
<p><img alt="image-20250408201158248" src="../assets/image-20250408201158248.png" /></p>
<h5 id="_85">注意<a class="headerlink" href="#_85" title="Permanent link">&para;</a></h5>
<ul>
<li>
<p>不同库之间不能混用! 不过可以在不同模块使用不同库，但要注意接口匹配（AI生成·）</p>
</li>
<li>
<p>不能混用原因：</p>
<p><img alt="image-20250408201439405" src="../assets/image-20250408201439405.png" /></p>
<p><img alt="image-20250408201451971" src="../assets/image-20250408201451971.png" /></p>
</li>
</ul>
<h4 id="pvt">同一标准单元库下不同时序模型和PVT条件组合<a class="headerlink" href="#pvt" title="Permanent link">&para;</a></h4>
<p>在<code>liberty</code>文件夹下</p>
<h5 id="_86">命名规则<a class="headerlink" href="#_86" title="Permanent link">&para;</a></h5>
<blockquote>
<p>scc28nhkcp_12t25od33_rvt_tt_v3p3_25c_basic.lib
│   │  │   │  │  │  │  │  │  │
│   │  │   │  │  │  │  │  │  └── 时序模型类型 (basic)
│   │  │   │  │  │  │  │  └── 温度 (25°C)
│   │  │   │  │  │  │  └── 电压 (3.3V)
│   │  │   │  │  │  └── 工艺角 (tt: typical)
│   │  │   │  │  └── 阈值电压类型 (rvt)
│   │  │   │  └── 栅氧厚度 (25OD33)
│   │  │   └── 晶体管类型 (12T)
│   │  └── 工艺节点 (28nm HKC+)
│   └── 代工厂 (SMIC)</p>
</blockquote>
<p><img alt="image-20250408202338574" src="../assets/image-20250408202338574.png" /></p>
<p><img alt="image-20250408202404512" src="../assets/image-20250408202404512.png" /></p>
<blockquote>
<p>ff/tt/ss貌似是根据电压区分的？</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="c"># 不同corner</span>

<span class="nv">set_operating_conditions</span><span class="w"> </span><span class="o">-</span>library<span class="w"> </span>scc28nhkcp_12t25od33_rvt_ss_v2p97_125c_ccs.db<span class="w"> </span>ss_v2p97_125c
<span class="c"># ss: slow-slow process (最慢工艺)</span>
<span class="c"># v2p97: 2.97V (最低电压)</span>
<span class="c"># 125c: 125°C (最高温度)</span>
<span class="c"># 这种组合会导致最慢的时序</span>

<span class="nv">set_operating_conditions</span><span class="w"> </span><span class="o">-</span>library<span class="w"> </span>scc28nhkcp_12t25od33_rvt_ff_v3p63_-40c_ccs.db<span class="w"> </span>ff_v3p63_-40c
<span class="c"># ff: fast-fast process (最快工艺)</span>
<span class="c"># v3p63: 3.63V (最高电压)</span>
<span class="c"># -40c: -40°C (最低温度)</span>
<span class="c"># 这种组合会导致最快的时序</span>

<span class="nv">set_operating_conditions</span><span class="w"> </span><span class="o">-</span>library<span class="w"> </span>scc28nhkcp_12t25od33_rvt_ff_v3p63_125c_ccs.db<span class="w"> </span>ff_v3p63_125c
<span class="c"># ff: fast-fast process (更多漏电)</span>
<span class="c"># v3p63: 3.63V (最高电压)</span>
<span class="c"># 125c: 125°C (最高温度)</span>
<span class="c"># 这种组合会导致最高的动态功耗和漏电功耗</span>

<span class="nv">set_operating_conditions</span><span class="w"> </span><span class="o">-</span>library<span class="w"> </span>scc28nhkcp_12t25od33_rvt_ss_v2p97_-40c_ccs.db<span class="w"> </span>ss_v2p97_-40c
<span class="c"># ss: slow-slow process (较少漏电)</span>
<span class="c"># v2p97: 2.97V (最低电压)</span>
<span class="c"># -40c: -40°C (最低温度)</span>
<span class="c"># 这种组合会导致最低的功耗</span>

<span class="nv">set_operating_conditions</span><span class="w"> </span><span class="o">-</span>library<span class="w"> </span>scc28nhkcp_12t25od33_rvt_tt_v3p3_25c_ccs.db<span class="w"> </span>tt_v3p3_25c
<span class="c"># tt: typical-typical process (典型工艺)</span>
<span class="c"># v3p3: 3.3V (标称电压)</span>
<span class="c"># 25c: 25°C (室温)</span>
<span class="c"># 这种组合代表典型工作条件</span>
</code></pre></div>
<blockquote>
<p>LVT的变准单元库一般会有较多的电压域：
<img alt="image-20250408203300284" src="../assets/image-20250408203300284.png" /></p>
<p><img alt="image-20250408203418440" src="../assets/image-20250408203418440.png" /></p>
</blockquote>
<p><img alt="image-20250408202435037" src="../assets/image-20250408202435037.png" /></p>
<h3 id="tsmc">TSMC<a class="headerlink" href="#tsmc" title="Permanent link">&para;</a></h3>
<h5 id="_87">参考<a class="headerlink" href="#_87" title="Permanent link">&para;</a></h5>
<p><a href="https://zhuanlan.zhihu.com/p/243485197">tsmc28nm数字工艺库介绍 - 知乎</a></p>
<h3 id="pdk_1">开源PDK<a class="headerlink" href="#pdk_1" title="Permanent link">&para;</a></h3>
<h4 id="sky130">sky130<a class="headerlink" href="#sky130" title="Permanent link">&para;</a></h4>
<p><img alt="image-20241030135407199" src="../assets/image-20241030135407199.png" /></p>
<p><img alt="image-20241030150721498" src="../assets/image-20241030150721498.png" /></p>
<p><img alt="image-20241030153630245" src="../assets/image-20241030153630245.png" /></p>
<p><img alt="image-20241030153816684" src="../assets/image-20241030153816684.png" /></p>
<p><img alt="image-20241030154313594" src="../assets/image-20241030154313594.png" /></p>
<p><img alt="image-20241030154345423" src="../assets/image-20241030154345423.png" /></p>
<p><img alt="image-20241030154638631" src="../assets/image-20241030154638631.png" /></p>
<p><img alt="image-20241030154711517" src="../assets/image-20241030154711517.png" /></p>
<p><img alt="image-20241030154828143" src="../assets/image-20241030154828143.png" /></p>
<p><img alt="image-20241030155001235" src="../assets/image-20241030155001235.png" /></p>
<p><img alt="image-20241030155014644" src="../assets/image-20241030155014644.png" /></p>
<p><img alt="image-20241030155116167" src="../assets/image-20241030155116167.png" /></p>
<h4 id="gf180">GF180<a class="headerlink" href="#gf180" title="Permanent link">&para;</a></h4>
<h4 id="freepdk45">FreePDK45<a class="headerlink" href="#freepdk45" title="Permanent link">&para;</a></h4>
<h4 id="nangate45"><a href="https://github.com/rbarzic/platform_nangate45">nangate45</a><a class="headerlink" href="#nangate45" title="Permanent link">&para;</a></h4>
<p>FreePDK45 是<strong>北卡罗来纳州立大学</strong>的电子设计自动化实验室提供的免费开源的45nm工艺库，使用了MOSIS工艺</p>
<h4 id="ihp-open-source-pdk">IHP Open Source PDK<a class="headerlink" href="#ihp-open-source-pdk" title="Permanent link">&para;</a></h4>
<h4 id="asap7">ASAP7<a class="headerlink" href="#asap7" title="Permanent link">&para;</a></h4>
<p>7nm Predictive PDK</p>
<h4 id="asap5">ASAP5<a class="headerlink" href="#asap5" title="Permanent link">&para;</a></h4>
<p>5nm</p>
<p><a href="https://github.com/The-OpenROAD-Project/asap5">The-OpenROAD-Project/asap5</a></p>
<p>貌似还用不了</p>
<h3 id="_88">参考<a class="headerlink" href="#_88" title="Permanent link">&para;</a></h3>
<p><a href="DesignAutomationConference_SFO_2024.pdf">DesignAutomationConference_SFO_2024</a> </p>
<p><a href="https://www.zhihu.com/question/426949421">Finfet电流模型里fin, finger, multiplier指的是什么啊？ - 知乎</a></p>
<h2 id="openroadorfsopenlane">OpenROAD/ORFS/OpenLane<a class="headerlink" href="#openroadorfsopenlane" title="Permanent link">&para;</a></h2>
<p>数字后端EDA领域的开源工具</p>
<h3 id="_89">特点<a class="headerlink" href="#_89" title="Permanent link">&para;</a></h3>
<h4 id="_90">优点<a class="headerlink" href="#_90" title="Permanent link">&para;</a></h4>
<ul>
<li>
<p>开源，可以自定义修改</p>
</li>
<li>
<p>该领域的热门应用</p>
</li>
<li>
<p>作者回复迅速（一般第二天就会回复）</p>
</li>
<li>
<p>自动化程度较高</p>
</li>
<li>
<p>还在不断更新中，更新快</p>
</li>
</ul>
<p><img alt="image-20241216092602072" src="../assets/image-20241216092602072.png" /></p>
<h4 id="_91">缺点<a class="headerlink" href="#_91" title="Permanent link">&para;</a></h4>
<ul>
<li>有一些商用工具有的功能他没有</li>
</ul>
<h3 id="relation-between-openroadsrfsopenlane">relation between openroad/SRFS/openlane<a class="headerlink" href="#relation-between-openroadsrfsopenlane" title="Permanent link">&para;</a></h3>
<h4 id="openroad">openroad<a class="headerlink" href="#openroad" title="Permanent link">&para;</a></h4>
<ul>
<li>basic model</li>
<li>netlist2gds, 也可以hdl2gds，但是比较麻烦， 用abc做综合</li>
<li>越来越流行了，比赛也开始用了</li>
</ul>
<h4 id="orfs">ORFS<a class="headerlink" href="#orfs" title="Permanent link">&para;</a></h4>
<ul>
<li>hdl2gds</li>
<li>pdk friendly， 可以直接跑7nm</li>
<li>支持重新编译OpenROAD（自定义修改）</li>
<li>gui不知道为什么用起来很卡</li>
<li>内置AutoTuner，一个扫参自动优化PPA的工具</li>
<li>支持在线使用（Colab）</li>
</ul>
<h4 id="openlance"><strong>openlance</strong><a class="headerlink" href="#openlance" title="Permanent link">&para;</a></h4>
<ul>
<li>hdl2gds</li>
<li>most auto</li>
<li>内置只有sky130 PDK</li>
<li>不支持重新编译OpenROAD</li>
<li></li>
</ul>
<h3 id="architecture">Architecture<a class="headerlink" href="#architecture" title="Permanent link">&para;</a></h3>
<p><strong>openlane</strong></p>
<p><img alt="image-20241012145943913" src="../assets/image-20241012145943913.png" /></p>
<h3 id="openlane-flow-stages">OpenLane Flow Stages<a class="headerlink" href="#openlane-flow-stages" title="Permanent link">&para;</a></h3>
<p>OpenLane flow consists of several stages. By default all flow steps are run in sequence. Each stage may consist of multiple sub-stages. OpenLane can also be run interactively as shown [here][25].</p>
<ol>
<li><strong>Synthesis</strong></li>
<li><a href="https://github.com/yosyshq/yosys">Yosys</a> - Perform RTL synthesis and technology mapping.</li>
<li><a href="https://github.com/the-openroad-project/opensta">OpenSTA</a> - Performs static timing analysis on the resulting netlist to generate timing reports</li>
<li><strong>Floorplaning</strong></li>
<li><a href="https://github.com/the-openroad-project/openroad/tree/master/src/ifp">OpenROAD/Initialize Floorplan</a> - Defines the core area for the macro as well as the rows (used for placement) and the tracks (used for routing)</li>
<li>OpenLane IO Placer - Places the macro input and output ports</li>
<li><a href="https://github.com/the-openroad-project/openroad/tree/master/src/pdn">OpenROAD/PDN Generator</a> - Generates the power distribution network</li>
<li><a href="https://github.com/the-openroad-project/openroad/tree/master/src/tap">OpenROAD/Tapcell</a> - Inserts welltap and endcap cells in the floorplan</li>
<li><strong>Placement</strong></li>
<li><a href="https://github.com/the-openroad-project/openroad/tree/master/src/gpl">OpenROAD/RePlace</a> - Performs global placement</li>
<li><a href="https://github.com/the-openroad-project/openroad/tree/master/src/rsz">OpenROAD/Resizer</a> - Performs optional optimizations on the design</li>
<li><a href="https://github.com/the-openroad-project/openroad/tree/master/src/dpl">OpenROAD/OpenDP</a> - Performs detailed placement to legalize the globally placed components</li>
<li><strong>CTS</strong></li>
<li><a href="https://github.com/the-openroad-project/openroad/tree/master/src/cts">OpenROAD/TritonCTS</a> - Synthesizes the clock distribution network (the clock tree)</li>
<li><strong>Routing</strong></li>
<li><a href="https://github.com/the-openroad-project/openroad/tree/master/src/grt">OpenROAD/FastRoute</a> - Performs global routing to generate <strong>a guide file</strong> for the detailed router</li>
<li><a href="https://github.com/the-openroad-project/openroad/tree/master/src/drt">OpenROAD/TritonRoute</a> - Performs detailed routing</li>
<li><a href="https://github.com/the-openroad-project/openroad/tree/master/src/rcx">OpenROAD/OpenRCX</a> - Performs SPEF extraction</li>
<li><strong>Tapeout</strong></li>
<li><a href="https://github.com/rtimothyedwards/magic">Magic</a> - Streams out the final GDSII layout file from the routed def</li>
<li><a href="https://github.com/klayout/klayout">KLayout</a> - Streams out the final GDSII layout file from the routed def as a back-up</li>
<li><strong>Signoff</strong></li>
<li><a href="https://github.com/rtimothyedwards/magic">Magic</a> - Performs DRC Checks &amp; Antenna Checks</li>
<li><a href="https://github.com/klayout/klayout">Magic</a> - Performs DRC Checks &amp; an XOR sanity-check between the two generated GDS-II files</li>
<li><a href="https://github.com/rtimothyedwards/netgen">Netgen</a> - Performs LVS Checks</li>
</ol>
<p>All tools in the OpenLane flow are free, libre and open-source software. While OpenLane itself as a script (and its associated build scripts) are under the Apache License, version 2.0, tools may fall under stricter licenses.</p>
<blockquote>
<p>Everything in Floorplanning through Routing is done using <a href="https://github.com/The-OpenROAD-Project/OpenROAD">OpenROAD</a> and its various sub-utilities, hence the name “OpenLane.”</p>
</blockquote>
<h3 id="pdk_2">PDK<a class="headerlink" href="#pdk_2" title="Permanent link">&para;</a></h3>
<p>The OpenROAD application is PDK independent. However, it has been tested and validated with specific PDKs in the context of various flow controllers.</p>
<p>OpenLane supports SkyWater 130nm and GlobalFoundries 180nm.</p>
<p>OpenROAD-flow-scripts supports several public and private PDKs including:</p>
<h5 id="open-source-pdks">Open-Source PDKs<a class="headerlink" href="#open-source-pdks" title="Permanent link">&para;</a></h5>
<ul>
<li><code>GF180</code> - 180nm</li>
<li><code>SKY130</code> - 130nm</li>
<li><code>Nangate45</code> - 45nm</li>
<li><code>ASAP7</code> - Predictive FinFET 7nm</li>
</ul>
<h5 id="proprietary-pdks">Proprietary PDKs<a class="headerlink" href="#proprietary-pdks" title="Permanent link">&para;</a></h5>
<p>These PDKS are supported in <strong>OpenROAD-flow-scripts only</strong>. They are used to test and calibrate OpenROAD against commercial platforms and ensure good QoR. The PDKs and platform-specific files for these kits cannot be provided due to NDA restrictions. However, if you are able to access these platforms independently, you can create the necessary platform-specific files yourself.</p>
<ul>
<li><code>GF55</code> - 55nm</li>
<li><code>GF12</code> - 12nm</li>
<li><code>Intel22</code> - 22nm</li>
<li><code>Intel16</code> - 16nm</li>
<li><code>TSMC65</code> - 65nm</li>
</ul>
<h3 id="basic-run">Basic Run<a class="headerlink" href="#basic-run" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>openroad<span class="w"> </span><span class="o">[</span>-help<span class="o">]</span><span class="w"> </span><span class="o">[</span>-version<span class="o">]</span><span class="w"> </span><span class="o">[</span>-no_init<span class="o">]</span><span class="w"> </span><span class="o">[</span>-exit<span class="o">]</span><span class="w"> </span><span class="o">[</span>-gui<span class="o">]</span>
<span class="w">         </span><span class="o">[</span>-threads<span class="w"> </span>count<span class="p">|</span>max<span class="o">]</span><span class="w"> </span><span class="o">[</span>-log<span class="w"> </span>file_name<span class="o">]</span><span class="w"> </span>cmd_file
<span class="w">  </span>-help<span class="w">              </span>show<span class="w"> </span><span class="nb">help</span><span class="w"> </span>and<span class="w"> </span><span class="nb">exit</span>
<span class="w">  </span>-version<span class="w">           </span>show<span class="w"> </span>version<span class="w"> </span>and<span class="w"> </span><span class="nb">exit</span>
<span class="w">  </span>-no_init<span class="w">           </span><span class="k">do</span><span class="w"> </span>not<span class="w"> </span><span class="nb">read</span><span class="w"> </span>.openroad<span class="w"> </span>init<span class="w"> </span>file
<span class="w">  </span>-threads<span class="w"> </span>count<span class="p">|</span>max<span class="w"> </span>use<span class="w"> </span>count<span class="w"> </span>threads
<span class="w">  </span>-no_splash<span class="w">         </span><span class="k">do</span><span class="w"> </span>not<span class="w"> </span>show<span class="w"> </span>the<span class="w"> </span>license<span class="w"> </span>splash<span class="w"> </span>at<span class="w"> </span>startup
<span class="w">  </span>-exit<span class="w">              </span><span class="nb">exit</span><span class="w"> </span>after<span class="w"> </span>reading<span class="w"> </span>cmd_file
<span class="w">  </span>-gui<span class="w">               </span>start<span class="w"> </span><span class="k">in</span><span class="w"> </span>gui<span class="w"> </span>mode
<span class="w">  </span>-python<span class="w">            </span>start<span class="w"> </span>with<span class="w"> </span>python<span class="w"> </span>interpreter<span class="w"> </span><span class="o">[</span>limited<span class="w"> </span>to<span class="w"> </span>db<span class="w"> </span>operations<span class="o">]</span>
<span class="w">  </span>-log<span class="w"> </span>&lt;file_name&gt;<span class="w">   </span>write<span class="w"> </span>a<span class="w"> </span>log<span class="w"> </span><span class="k">in</span><span class="w"> </span>&lt;file_name&gt;
<span class="w">  </span>cmd_file<span class="w">           </span><span class="nb">source</span><span class="w"> </span>cmd_file
</code></pre></div>
<p>OpenROAD sources the Tcl command file <code>~/.openroad</code> unless the command line option <code>-no_init</code> is specified.</p>
<p>OpenROAD then sources the command file <code>cmd_file</code> if it is specified on the command line. Unless the <code>-exit</code> command line flag is specified, it enters an interactive Tcl command interpreter.</p>
<p>A list of the available tools/modules included in the OpenROAD app and their descriptions are available <a href="https://openroad.readthedocs.io/en/latest/contrib/Logger.html#openroad-tool-list">here</a>.</p>
<h3 id="basic-command">Basic Command<a class="headerlink" href="#basic-command" title="Permanent link">&para;</a></h3>
<h4 id="area">area<a class="headerlink" href="#area" title="Permanent link">&para;</a></h4>
<p>ord::get_die_area
ord::get_core_area</p>
<h4 id="save-image">Save Image<a href="https://openroad.readthedocs.io/en/latest/main/src/gui/README.html#save-image">#</a><a class="headerlink" href="#save-image" title="Permanent link">&para;</a></h4>
<p>This command can be both be used when the GUI is active and not active to save a screenshot with various options.</p>
<div class="highlight"><pre><span></span><code><span class="nv">save_image</span><span class="w"> </span>
<span class="w">    </span><span class="k">[</span><span class="nv">-resolution</span><span class="w"> </span>microns_per_pixel<span class="k">]</span>
<span class="w">    </span><span class="k">[</span><span class="nv">-area</span><span class="w"> </span><span class="k">{</span><span class="nv">x0</span><span class="w"> </span>y0<span class="w"> </span>x1<span class="w"> </span>y1<span class="k">}]</span>
<span class="w">    </span><span class="k">[</span><span class="nv">-width</span><span class="w"> </span>width<span class="k">]</span>
<span class="w">    </span><span class="k">[</span><span class="nv">-display_option</span><span class="w"> </span><span class="k">{</span><span class="nv">option</span><span class="w"> </span>value<span class="k">}]</span>
<span class="w">    </span><span class="nv">filename</span>
</code></pre></div>
<h5 id="options">Options<a class="headerlink" href="#options" title="Permanent link">&para;</a></h5>
<table>
<thead>
<tr>
<th>Switch Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>filename</code></td>
<td>path to save the image to.</td>
</tr>
<tr>
<td><code>-area</code></td>
<td>x0, y0 - first corner of the layout area (in microns) to be saved, default is to save what is visible on the screen unless called when gui is not active and then it selected the whole block. x1, y1 - second corner of the layout area (in microns) to be saved, default is to save what is visible on the screen unless called when gui is not active and then it selected the whole block.</td>
</tr>
<tr>
<td><code>-resolution</code></td>
<td>resolution in microns per pixel to use when saving the image, default will match what the GUI has selected.</td>
</tr>
<tr>
<td><code>-width</code></td>
<td>width of the output image in pixels, default will be computed from the resolution. Cannot be used with <code>-resolution</code>.</td>
</tr>
<tr>
<td><code>-display_option</code></td>
<td>specific setting for a display option to show or hide specific elements. For example, to hide metal1 <code>-display_option {Layers/metal1 false}</code>, to show routing tracks <code>-display_option {Tracks/Pref true}</code>, or to show everthing <code>-display_option {* true}</code></td>
</tr>
</tbody>
</table>
<h4 id="select-objects">Select Objects<a class="headerlink" href="#select-objects" title="Permanent link">&para;</a></h4>
<p>This command selects object based on options. Returns: number of objects selected.</p>
<div class="highlight"><pre><span></span><code>select 
    -type object_type
    [-name glob_pattern]
    [-filter attribute = value]
    [-case_insensitive]
    [-highlight group]
</code></pre></div>
<h5 id="options_1">Options<a class="headerlink" href="#options_1" title="Permanent link">&para;</a></h5>
<table>
<thead>
<tr>
<th>Switch Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>-type</code></td>
<td>name of the object type. For example, <code>Inst</code> for instances, <code>Net</code> for nets, and <code>Marker</code> for database markers.</td>
</tr>
<tr>
<td><code>-name</code></td>
<td>(optional) filter selection by the specified name. For example, to only select clk nets <code>*clk*</code>. Use <code>-case_insensitive</code> to filter based on case insensitive instead of case sensitive.</td>
</tr>
<tr>
<td><code>-filter</code></td>
<td>(optional) filter selection based on the objects’ properties. <code>attribute</code> represents the property’s name and <code>value</code> the property’s value. In case the property holds a collection (e. g. BTerms in a Net) or a table (e. g. Layers in a Generate Via Rule) <code>value</code> can be any element within those. A special case exists for checking whether a collection is empty or not by using the value <code>CONNECTED</code>. This can be useful to select a specific group of elements (e. g. BTerms=CONNECTED will select only Nets connected to Input/Output Pins).</td>
</tr>
<tr>
<td><code>-highlight</code></td>
<td>(optional) add the selection to the specific highlighting group. Values can be 0 to 7.</td>
</tr>
</tbody>
</table>
<h4 id="add-a-single-net-to-selection">Add a single net to selection<a class="headerlink" href="#add-a-single-net-to-selection" title="Permanent link">&para;</a></h4>
<p>To add a single net to the selected items:</p>
<div class="highlight"><pre><span></span><code>gui:: selection_add_net 
    name
</code></pre></div>
<h5 id="options_2">Options<a class="headerlink" href="#options_2" title="Permanent link">&para;</a></h5>
<table>
<thead>
<tr>
<th>Switch Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>name</code></td>
<td>name of the net to add.</td>
</tr>
</tbody>
</table>
<h4 id="add-multiple-nets-to-selection">Add multiple nets to selection<a class="headerlink" href="#add-multiple-nets-to-selection" title="Permanent link">&para;</a></h4>
<p>To add several nets to the selected items using a regex:</p>
<div class="highlight"><pre><span></span><code>gui:: selection_add_nets 
name_regex
</code></pre></div>
<h5 id="options_3">Options<a class="headerlink" href="#options_3" title="Permanent link">&para;</a></h5>
<table>
<thead>
<tr>
<th>Switch Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>name_regex</code></td>
<td>regular expression of the net names to add.</td>
</tr>
</tbody>
</table>
<h4 id="add-a-single-inst-to-selection">Add a single inst to selection<a class="headerlink" href="#add-a-single-inst-to-selection" title="Permanent link">&para;</a></h4>
<p>To add a single instance to the selected items:</p>
<div class="highlight"><pre><span></span><code>gui:: selection_add_inst 
    name
</code></pre></div>
<h5 id="options_4">Options<a class="headerlink" href="#options_4" title="Permanent link">&para;</a></h5>
<table>
<thead>
<tr>
<th>Switch Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>name</code></td>
<td>name of the instance to add.</td>
</tr>
</tbody>
</table>
<h4 id="add-multiple-insts-to-selection">Add multiple insts to selection<a class="headerlink" href="#add-multiple-insts-to-selection" title="Permanent link">&para;</a></h4>
<p>To add several instances to the selected items using a regex:</p>
<div class="highlight"><pre><span></span><code>gui:: selection_add_insts 
    name_regex
</code></pre></div>
<h5 id="options_5">Options<a class="headerlink" href="#options_5" title="Permanent link">&para;</a></h5>
<table>
<thead>
<tr>
<th>Switch Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>name_regex</code></td>
<td>regular expression of the instance names to add.</td>
</tr>
</tbody>
</table>
<h4 id="select-at-point-or-area">Select at point or area<a class="headerlink" href="#select-at-point-or-area" title="Permanent link">&para;</a></h4>
<p>To add items at a specific point or in an area:</p>
<p>Example usage:</p>
<div class="highlight"><pre><span></span><code>gui:: select_at x y
gui:: select_at x y append
gui:: select_at x0 y0 x1 y1
gui:: select_at x0 y0 x1 y1 append
</code></pre></div>
<div class="highlight"><pre><span></span><code>gui:: select_at 
    x0 y0 x1 y1
    [append]

Or

gui:: select_at
    x y 
    [append]
</code></pre></div>
<h5 id="options_6">Options<a class="headerlink" href="#options_6" title="Permanent link">&para;</a></h5>
<table>
<thead>
<tr>
<th>Switch Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>x, y</code></td>
<td>point in the layout area in microns.</td>
</tr>
<tr>
<td><code>x0, y0, x1, y1</code></td>
<td>first and second corner of the layout area in microns.</td>
</tr>
<tr>
<td><code>append</code></td>
<td>if <code>true</code> (the default value) append the new selections to the current selection list, else replace the selection list with the new selections.</td>
</tr>
</tbody>
</table>
<h4 id="select-next-item-from-selection">Select next item from selection<a class="headerlink" href="#select-next-item-from-selection" title="Permanent link">&para;</a></h4>
<p>To navigate through multiple selected items: Returns: current index of the selected item.</p>
<div class="highlight"><pre><span></span><code>gui:: select_next
</code></pre></div>
<h4 id="select-previous-item-from-selection">Select previous item from selection<a class="headerlink" href="#select-previous-item-from-selection" title="Permanent link">&para;</a></h4>
<p>To navigate through multiple selected items: Returns: current index of the selected item.</p>
<div class="highlight"><pre><span></span><code>gui:: select_previous 
</code></pre></div>
<h4 id="clear-selection">Clear Selection<a class="headerlink" href="#clear-selection" title="Permanent link">&para;</a></h4>
<p>To clear the current set of selected items:</p>
<div class="highlight"><pre><span></span><code>gui:: clear_selections
</code></pre></div>
<h4 id="set-heatmap">Set Heatmap<a class="headerlink" href="#set-heatmap" title="Permanent link">&para;</a></h4>
<p>To control the settings in the heat maps:</p>
<p>The currently availble heat maps are:</p>
<ul>
<li><code>Power</code></li>
<li><code>Routing</code></li>
<li><code>Placement</code></li>
<li><code>IRDrop</code></li>
<li><code>RUDY</code> [<a href="https://openroad.readthedocs.io/en/latest/main/src/gui/README.html#rudy">1]</a></li>
</ul>
<p>These options can also be modified in the GUI by double-clicking the underlined display control for the heat map.</p>
<div class="highlight"><pre><span></span><code>gui:: set_heatmap 
    name
    [option]
    [value]
</code></pre></div>
<h5 id="options_7">Options<a class="headerlink" href="#options_7" title="Permanent link">&para;</a></h5>
<table>
<thead>
<tr>
<th>Switch Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>name</code></td>
<td>is the name of the heatmap.</td>
</tr>
<tr>
<td><code>option</code></td>
<td>is the name of the option to modify. If option is <code>rebuild</code> the map will be destroyed and rebuilt.</td>
</tr>
<tr>
<td><code>value</code></td>
<td>is the new value for the specified option. This is not used when rebuilding map.</td>
</tr>
</tbody>
</table>
<h4 id="dump-heatmap-to-file">Dump Heatmap to file<a class="headerlink" href="#dump-heatmap-to-file" title="Permanent link">&para;</a></h4>
<p>To save the raw data from the heat maps ins a comma separated value (CSV) format:</p>
<div class="highlight"><pre><span></span><code>gui:: dump_heatmap 
    name 
    filename
</code></pre></div>
<h5 id="options_8">Options<a class="headerlink" href="#options_8" title="Permanent link">&para;</a></h5>
<table>
<thead>
<tr>
<th>Switch Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>name</code></td>
<td>is the name of the heatmap.</td>
</tr>
<tr>
<td><code>filename</code></td>
<td>path to the file to write the data to.</td>
</tr>
</tbody>
</table>
<h3 id="init">init<a class="headerlink" href="#init" title="Permanent link">&para;</a></h3>
<h3 id="floorplant">floorplant<a class="headerlink" href="#floorplant" title="Permanent link">&para;</a></h3>
<h3 id="placement_1">placement<a class="headerlink" href="#placement_1" title="Permanent link">&para;</a></h3>
<h3 id="routing">Routing<a class="headerlink" href="#routing" title="Permanent link">&para;</a></h3>
<h4 id="globle-routing">globle routing<a class="headerlink" href="#globle-routing" title="Permanent link">&para;</a></h4>
<h5 id="write-guides">Write Guides<a class="headerlink" href="#write-guides" title="Permanent link">&para;</a></h5>
<p>This command writes global routing guides, which can be used as input for global routing.</p>
<p>Example: <code>write_guides route.guide</code>.</p>
<div class="highlight"><pre><span></span><code>write_guides file_name
</code></pre></div>
<h5 id="options_9">Options<a class="headerlink" href="#options_9" title="Permanent link">&para;</a></h5>
<table>
<thead>
<tr>
<th>Switch Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>file_name</code></td>
<td>Guide file name.</td>
</tr>
</tbody>
</table>
<h3 id="report-and-dump">report and dump<a class="headerlink" href="#report-and-dump" title="Permanent link">&para;</a></h3>
<h4 id="write-macro-placement">Write Macro Placement<a class="headerlink" href="#write-macro-placement" title="Permanent link">&para;</a></h4>
<p>This command writes macro placement.</p>
<div class="highlight"><pre><span></span><code>write_macro_placement file_name
</code></pre></div>
<h3 id="global-routing-fastroute41">Global Routing - FastRoute4.1<a class="headerlink" href="#global-routing-fastroute41" title="Permanent link">&para;</a></h3>
<p><a href="https://github.com/the-openroad-project/openroad/tree/master/src/grt">OpenROAD/src/grt at master · The-OpenROAD-Project/OpenROAD</a></p>
<table>
<thead>
<tr>
<th>Switch Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>-guide_file</code></td>
<td>Set the output guides file name (e.g., <code>route.guide</code>).</td>
</tr>
<tr>
<td><code>-congestion_iterations</code></td>
<td>Set the number of iterations made to remove the overflow of the routing. The default value is <code>50</code>, and the allowed values are integers <code>[0, MAX_INT]</code>.</td>
</tr>
<tr>
<td><code>-congestion_report_file</code></td>
<td>Set the file name to save the congestion report. The file generated can be read by the DRC viewer in the GUI (e.g., <code>report_file.rpt</code>).</td>
</tr>
<tr>
<td><code>-congestion_report_iter_step</code></td>
<td>Set the number of iterations to report. The default value is <code>0</code>, and the allowed values are integers <code>[0, MAX_INT]</code>.</td>
</tr>
<tr>
<td><code>-grid_origin</code></td>
<td>Set the (x, y) origin of the routing grid in DBU. For example, <code>-grid_origin {1 1}</code> corresponds to the die (0, 0) + 1 DBU in each x--, y- direction.</td>
</tr>
<tr>
<td><code>-critical_nets_percentage</code></td>
<td>Set the percentage of nets with the worst slack value that are considered timing critical, having preference over other nets during congestion iterations (e.g. <code>-critical_nets_percentage 30</code>). The default value is <code>0</code>, and the allowed values are integers <code>[0, MAX_INT]</code>.</td>
</tr>
<tr>
<td><code>-allow_congestion</code></td>
<td>Allow global routing results to be generated with remaining congestion. The default is false.</td>
</tr>
<tr>
<td><code>-verbose</code></td>
<td>This flag enables the full reporting of the global routing.</td>
</tr>
<tr>
<td><code>-start_incremental</code></td>
<td>This flag initializes the GRT listener to get the net modified. The default is false.</td>
</tr>
<tr>
<td><code>-end_incremental</code></td>
<td>This flag run incremental GRT with the nets modified. The default is false.</td>
</tr>
</tbody>
</table>
<h3 id="using-macro-in-openlane">Using Macro in openlane<a class="headerlink" href="#using-macro-in-openlane" title="Permanent link">&para;</a></h3>
<h3 id="debug-in-openroad">debug in openroad<a class="headerlink" href="#debug-in-openroad" title="Permanent link">&para;</a></h3>
<h5 id="make-as-follow">make as follow<a class="headerlink" href="#make-as-follow" title="Permanent link">&para;</a></h5>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>OpenROAD
mkdir<span class="w"> </span>build_debug
<span class="nb">cd</span><span class="w"> </span>build_debug
cmake<span class="w"> </span>..<span class="w"> </span>-DCMAKE_BUILD_TYPE<span class="o">=</span>DEBUG
<span class="c1">#wait</span>
make
<span class="c1">#make  -j $thread_to_make</span>
</code></pre></div>
<h4 id="my-lancunjson">my lancun.json<a class="headerlink" href="#my-lancunjson" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>{
    &quot;configurations&quot;: [
    {
        &quot;name&quot;: &quot;(gdb) Launch&quot;,
        &quot;type&quot;: &quot;cppdbg&quot;,
        &quot;request&quot;: &quot;launch&quot;,
        &quot;program&quot;: &quot;/you/path/OpenROAD/build_debug/src/openroad&quot;,
        &quot;args&quot;: [],
        &quot;stopAtEntry&quot;: false,
        &quot;cwd&quot;: &quot;/you/path/OpenROAD-flow-scripts/tools/OpenROAD/build_debug/src/&quot;,
        &quot;environment&quot;: [],
        &quot;externalConsole&quot;: false,
        &quot;MIMode&quot;: &quot;gdb&quot;,
        &quot;setupCommands&quot;: [
            {
                &quot;description&quot;: &quot;Enable pretty-printing for gdb&quot;,
                &quot;text&quot;: &quot;-enable-pretty-printing&quot;,
                &quot;ignoreFailures&quot;: true
            },
            {
                &quot;description&quot;: &quot;Set Disassembly Flavor to Intel&quot;,
                &quot;text&quot;: &quot;-gdb-set disassembly-flavor intel&quot;,
                &quot;ignoreFailures&quot;: true
            }
        ]
    }
    ]
}
</code></pre></div>
<p>after add your breakpoints, click the triangle to debug
and you have to wait a minutes
<img alt="image" src="https://github.com/user-attachments/assets/31ea56d6-d450-4e57-9bf8-9ba68e831a08" /></p>
<p>then you can input you command to debug openroad in terminal
<img alt="image" src="https://github.com/user-attachments/assets/1deb746c-ab28-4cdb-8c94-ab83beabdd02" /></p>
<p>I just found out how to do that too, holp this help.</p>
<h3 id="install_1">install<a class="headerlink" href="#install_1" title="Permanent link">&para;</a></h3>
<p><a href="https://openroad.readthedocs.io/en/latest/user/Build.html#install-dependencies">Installing OpenROAD — OpenROAD documentation</a></p>
<div class="highlight"><pre><span></span><code>#在ubuntu:20.04新的docker容器中
apt update
apt-get update --fix-missing
apt install git
git clone --recursive https://github.com/The-OpenROAD-Project/OpenROAD.git
cd OpenROAD/
./etc/DependencyInstaller.sh
cd build/
make
make install
openroad -help
</code></pre></div>
<p><strong>install in a new ubuntu20.04 container</strong></p>
<p>现在openroad中安装依赖，再直接build ORFS</p>
<p><a href="https://openroad-flow-scripts.readthedocs.io/en/latest/user/BuildWithDocker.html">Build from sources using Docker — OpenROAD Flow documentation</a></p>
<div class="highlight"><pre><span></span><code>apt<span class="w"> </span>install<span class="w"> </span>swig
apt-get<span class="w"> </span>install<span class="w"> </span>libboost-all-dev
</code></pre></div>
<p>a bug:</p>
<blockquote>
<p>Ign:1 https://download.docker.com/linux/ubuntu focal InRelease</p>
<p>Err:2 https://download.docker.com/linux/ubuntu focal Release                                               </p>
<p>Could not handshake: Error in the pull function. [IP: 13.35.210.84 443]</p>
<p>Hit:3 http://security.ubuntu.com/ubuntu focal-security InRelease                                           </p>
<p>Hit:4 http://archive.ubuntu.com/ubuntu focal InRelease                                                     </p>
<p>Hit:5 http://archive.ubuntu.com/ubuntu focal-updates InRelease</p>
<p>Hit:6 http://archive.ubuntu.com/ubuntu focal-backports InRelease</p>
<p>Reading package lists... Done</p>
<p>E: The repository 'https://download.docker.com/linux/ubuntu focal Release' no longer has a Release file.</p>
<p>N: Updating from such a repository can't be done securely, and is therefore disabled by default.</p>
<p>N: See apt-secure(8) manpage for repository creation and user configuration details.</p>
</blockquote>
<div class="highlight"><pre><span></span><code>build<span class="w"> </span><span class="k">in</span><span class="w"> </span>docker,<span class="w"> </span>not<span class="w"> </span><span class="k">in</span><span class="w"> </span>locally
</code></pre></div>
<h2 id="ieda">iEDA<a class="headerlink" href="#ieda" title="Permanent link">&para;</a></h2>
<p><a href="https://github.com/OSCC-Project/iEDA">OSCC-Project/iEDA: An open-source EDA infrastructure and tools from netlist to GDS</a></p>
<p>数字后端EDA领域的开源工具</p>
<h2 id="magical">Magical<a class="headerlink" href="#magical" title="Permanent link">&para;</a></h2>
<p><a href="https://github.com/magical-eda/MAGICAL?tab=readme-ov-file">magical-eda/MAGICAL: Machine Generated Analog IC Layout</a></p>
<ul>
<li>MAGICAL: Machine Generated Analog IC Layout</li>
<li>ML-enhance</li>
</ul>
<p>maintain seperate components, such as constraint generation, placement and routing, in different repository. And we integrate each component through top-level python flow.</p>
<h2 id="align">ALIGN<a class="headerlink" href="#align" title="Permanent link">&para;</a></h2>
<p><a href="https://github.com/ALIGN-analoglayout/ALIGN-public">ALIGN-analoglayout/ALIGN-public</a></p>
<p><a href="EDA4PR-Analog">Detail Notes</a></p>
<ul>
<li>ALIGN is an open-source automatic layout generator for analog circuits jointly developed under the DARPA IDEA program by the University of Minnesota, Texas A&amp;M University, and Intel Corporation.</li>
<li>The goal of ALIGN (Analog Layout, Intelligently Generated from Netlists) is to automatically translate an unannotated (or partially annotated) SPICE netlist of an analog circuit to a GDSII layout. The repository also releases a set of analog circuit designs.</li>
<li>ML-enhance</li>
</ul>
<h2 id="klayout">KLayout<a class="headerlink" href="#klayout" title="Permanent link">&para;</a></h2>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../EDA4PR-LCM/" class="btn btn-neutral float-left" title="EDA4PR-LCM"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../Algorithms/" class="btn btn-neutral float-right" title="Algorithms">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../EDA4PR-LCM/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../Algorithms/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
